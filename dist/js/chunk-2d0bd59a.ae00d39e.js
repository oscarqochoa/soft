(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bd59a"],{"2c2e":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("cool-light-box",{attrs:{items:e.itemImage,index:e.showImage,effect:"fade"},on:{close:function(t){e.showImage=null}}}),s("b-card",{staticClass:"mb-0",attrs:{"no-body":""}},[s("filter-slot",{directives:[{name:"scrollbar",rawName:"v-scrollbar"}],attrs:{filter:e.filters,"filter-principal":e.filterPrincipal,"total-rows":e.totalLeads,paginate:e.paginate,"start-page":e.fromPage,"to-page":e.toPage,"send-multiple-sms":!1},on:{reload:e.getSNRecoveryLeads,onChangeCurrentPage:e.onChangeCurrentPage},scopedSlots:e._u([{key:"buttons",fn:function(){return[s("b-button",{staticClass:"ml-1",attrs:{variant:"success",disabled:!e.leadsSelecteds.length},on:{click:e.modalSmssOpen}},[s("feather-icon",{staticClass:"mr-50",attrs:{icon:"MessageCircleIcon"}}),e._v("Send SMS ")],1)]},proxy:!0}])},[s("b-table",{ref:"refUserListTable",staticClass:"position-relative",attrs:{slot:"table","primary-key":"id","empty-text":"No matching records found","select-mode":"multi",responsive:"sm","table-class":"text-nowrap","sticky-header":"50vh",small:"","show-empty":"","sort-by":e.sortBy,fields:e.fields,items:e.S_LEADS.items,"sort-desc":e.isSortDirDesc,busy:e.isBusy},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.isSortDirDesc=t},"update:sort-desc":function(t){e.isSortDirDesc=t},"update:busy":function(t){e.isBusy=t},"row-selected":e.onRowSelected},slot:"table",scopedSlots:e._u([{key:"table-busy",fn:function(){return[s("div",{staticClass:"text-center text-primary my-2"},[s("b-spinner",{staticClass:"align-middle mr-1"}),s("strong",[e._v("Loading ...")])],1)]},proxy:!0},{key:"head(selected)",fn:function(){return[s("b-form-checkbox",{on:{input:e.selectedAll},model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}})]},proxy:!0},{key:"cell(selected)",fn:function(t){return[t.item.mobile?s("b-form-group",[s("b-form-checkbox",{on:{input:function(s){return e.onSelectedRow(t.item)}},model:{value:t.item.selected,callback:function(s){e.$set(t.item,"selected",s)},expression:"data.item.selected"}})],1):e._e()]}},{key:"cell(nickname)",fn:function(t){return[s("div",{staticStyle:{"white-space":"pre-wrap"}},[s("router-link",{class:e.textLink,staticStyle:{"font-size":"9pt","margin-left":"-3px"},attrs:{to:"/social-network/leads/new/dashboard/"+t.item.id,target:"_blank"}},[e._v(" "+e._s(t.item.nickname?t.item.nickname:t.item.not_nickname)+" ")]),s("br"),null!=t.item.lead_name?s("small",[e._v(e._s(t.item.lead_name))]):e._e()],1)]}},{key:"cell(parent)",fn:function(t){return[s("div",[1==t.item.parent?s("div",{staticClass:"text-center"},[s("b-img",{staticStyle:{width:"35px","margin-bottom":"3px"},attrs:{fluid:"",src:e.baseUrl+"/images/social-network/facebook.png"}}),s("br"),s("span",{staticStyle:{"font-size":"9pt"}},[e._v(e._s(t.item.child))])],1):e._e(),2==t.item.parent?s("div",{staticClass:"text-center"},[s("b-img",{staticStyle:{width:"35px","margin-bottom":"3px"},attrs:{fluid:"",src:e.baseUrl+"/images/social-network/google.png"}}),s("br"),s("span",{staticStyle:{"font-size":"9pt"}},[e._v(" "+e._s(t.item.contact_method)+" ")])],1):e._e()])]}},{key:"cell(fanpage)",fn:function(t){return[s("div",[t.item.logo?s("b-img",{staticStyle:{width:"50px"},attrs:{thumbnail:"",fluid:"",src:e.baseUrl+t.item.logo}}):s("b-badge",{staticStyle:{width:"40px"},attrs:{variant:"primary"}},[e._v(" CRM ")])],1)]}},{key:"cell(attend)",fn:function(t){return[s("div",[2==t.item.attend?s("span",{staticClass:"text-capitalize text-success"},[e._v(" YES "),s("feather-icon",{staticClass:"mr-50 text-success",attrs:{icon:"CheckCircleIcon",size:"15"}})],1):1==t.item.attend?s("span",{staticClass:"text-capitalize text-success"},[e._v(" YES ")]):null==t.item.attend?s("span",{staticClass:"text-capitalize text-danger"},[e._v(" NO ")]):e._e(),null!=t.item.seller_name?s("div",[e._v(" "+e._s(t.item.seller_name)+" ")]):e._e(),null!=t.item.attend_date?s("div",[e._v(" "+e._s(e._f("myGlobalDay")(t.item.attend_date))+" ")]):e._e(),null!=t.item.real_time&&"CA"!=t.item.state_hour?s("div",[e._v(" "+e._s(e._f("myGlobalDay")(t.item.real_time))+" "+e._s(t.item.state_hour)+" ")]):e._e()])]}},{key:"cell(created_at)",fn:function(t){return[s("small",[e._v(e._s(e._f("myGlobalDay")(t.item.created_at)))])]}},{key:"cell(tracking)",fn:function(t){return[s("div",{staticClass:"text-center"},[s("feather-icon",{staticClass:"text-primary cursor-pointer",attrs:{icon:"ListIcon",size:"15"},on:{click:function(s){return e.openModalTracking(t.item.id,t.item.nickname)}}})],1)]}},{key:"cell(actions)",fn:function(t){return[s("actions-table",{attrs:{id:t.item.id,name:t.item.nickname},on:{onDeleteLead:e.deleteLead,onShowSmsList:e.openModalSmsList,onSendSms:function(s){return e.openModalSendSMS(t.item)}}})]}}])})],1)],1),e.showModalTracking?s("modal-tracking",{attrs:{show:e.showModalTracking,name:e.nameLeadSelected},on:{onClose:e.closeModalTracking}}):e._e(),e.showModalSmsList?s("modal-sms-list",{attrs:{show:e.showModalSmsList,name:e.nameLeadSelected},on:{onClose:e.closeModalSmsList}}):e._e(),e.sendModalSms?s("modal-send-sms",{attrs:{smss:e.leads_sms,modul:e.currentUser.modul_id,show:e.sendModalSms,typesms:e.typesms,sms:e.leads_sms_o,"name-leads":e.name_leads_arr},on:{hide:e.closeModalSendSms}}):e._e()],1)},n=[],l=s("1da1"),r=s("5530"),i=(s("d3b7"),s("3ca3"),s("ddb0"),s("d81d"),s("c740"),s("a434"),s("159b"),s("caad"),s("96cf"),s("2f62")),o=s("5547"),c=(s("2223"),[{type:"datepicker",margin:!0,showLabel:!0,label:"From",placeholder:"Date",class:"font-small-3",model:null,locale:"en",dateFormOptions:{year:"numeric",month:"numeric",day:"numeric"},cols:6},{type:"datepicker",margin:!0,showLabel:!0,label:"To",placeholder:"Date",class:"font-small-3",model:null,locale:"en",dateFormOptions:{year:"numeric",month:"numeric",day:"numeric"},cols:6},{type:"select",margin:!0,showLabel:!0,label:"CR",model:null,options:[{value:0,label:"ALL"},{value:2,label:"YES"},{value:1,label:"NO"}],reduce:"value",selectText:"label",cols:6},{type:"select",margin:!0,showLabel:!0,label:"STATUS LEAD",model:null,options:[],reduce:"id",selectText:"name",cols:6},{type:"select",margin:!0,showLabel:!0,label:"SOURCE",model:null,options:[{id:0,name:"ALL"},{id:1,name:"Facebook"},{id:2,name:"Google"}],reduce:"id",selectText:"name",cols:12},{type:"select",margin:!0,showLabel:!0,label:"SUB SOURCE",model:null,options:[],reduce:"id",selectText:"name",cols:12,visible:!1},{type:"select",margin:!0,showLabel:!0,label:"CONTACT METHOD",model:null,options:[],reduce:"id",selectText:"name",cols:12,visible:!1},{type:"select",margin:!0,showLabel:!0,label:"OWNER",model:null,options:[],reduce:"id",selectText:"user_name",cols:12},{type:"select",margin:!0,showLabel:!0,label:"TASK",model:null,options:[{value:"4",label:"ALL"},{value:"2",label:"ATTEND"},{value:"1",label:"YES"},{value:"0",label:"NO"}],reduce:"value",selectText:"label",cols:6},{type:"select",margin:!0,showLabel:!0,label:"PHONE",model:null,options:[{value:"0",label:"ALL"},{value:"1",label:"YES"},{value:"2",label:"NO"}],reduce:"value",selectText:"label",cols:6},{type:"select",margin:!0,showLabel:!0,label:"FANPAGE",model:null,options:[],reduce:"id",selectText:"value",cols:12,visible:!1}]),d=s("0e20"),m=[{key:"selected",label:"",sortable:!1},{key:"nickname",label:"Nickname",sortable:!0,formatter:d["f"]},{key:"parent",label:"Source / SubSource",sortable:!1},{key:"mobile",label:"Mobile",sortable:!0},{key:"fanpage",label:"Fanpage",sortable:!1},{key:"attend",label:"Task",sortable:!1},{key:"created_at",label:"Created date",sortable:!0},{key:"owner",label:"Owner",sortable:!0},{key:"tracking",label:"Tracking",sortable:!1},{key:"actions",label:"Actions",sortable:!1}],u=s("0800"),S=s("0b4e"),_=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-dropdown",{attrs:{variant:"link","no-caret":""},scopedSlots:e._u([{key:"button-content",fn:function(){return[s("feather-icon",{staticClass:"align-middle text-body",attrs:{icon:"MoreVerticalIcon",size:"16"}})]},proxy:!0}])},[s("b-dropdown-item",{on:{click:e.sendSMS}},[s("feather-icon",{attrs:{icon:"MessageCircleIcon"}}),s("span",{staticClass:"align-middle ml-50"},[e._v(" Send SMS ")])],1),s("b-dropdown-item",{on:{click:e.showSMSList}},[s("feather-icon",{attrs:{icon:"AlignLeftIcon"}}),s("span",{staticClass:"align-middle ml-50"},[e._v(" SMS List ")])],1),s("b-dropdown-item",{on:{click:e.deleteLead}},[s("feather-icon",{staticClass:"text-danger",attrs:{icon:"TrashIcon"}}),s("span",{staticClass:"align-middle ml-50 text-danger"},[e._v(" Delete ")])],1)],1)},p=[],f=(s("a9e3"),s("b0c0"),{props:{id:{type:Number},name:{type:String}},methods:{sendToRecovery:function(){this.$emit("onSendToRecovery",this.id)},sendToClosed:function(){this.$emit("onSendToClosed",this.id)},sendSMS:function(){this.$emit("onSendSms",this.id)},showSMSList:function(){this.$emit("onShowSmsList",this.id,this.name)},deleteLead:function(){this.$emit("onDeleteLead",this.id)}}}),b=f,h=s("2877"),g=Object(h["a"])(b,_,p,!1,null,null,null),E=g.exports,L=s("48ec"),w=s("3b4e"),y=s("cd56"),k={components:{FeatherIcon:u["a"],"modal-tracking":S["a"],"actions-table":E,"modal-send-sms":L["a"],"modal-sms-list":w["a"],"cool-light-box":o["a"]},data:function(){return{items:[],baseUrl:"https://pre.amgsoft.us",filters:c,filterPrincipal:{type:"input",inputType:"text",placeholder:"Search...",model:""},totalLeads:0,paginate:{currentPage:1,perPage:10},fromPage:0,toPage:0,sortBy:"id",fields:m,isSortDirDesc:!0,isBusy:!1,showModalTracking:!1,nameLeadSelected:"",showModalSmsList:!1,sendModalSms:!1,rowData:[],typesms:null,leads_sms_o:[],leads_sms:[],name_leads_arr:[],showImage:null,itemImage:[],lead_id:"",lead_name:"",selectAll:!1,leadsSelecteds:[]}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(i["e"])({S_LEADS:function(e){return e.SocialNetworkLeadsStore.S_LEADS},S_LEAD_STATUS_SN:function(e){return e.SocialNetworkLeadsStore.S_LEAD_STATUS_SN},S_SELLERS_FILTERS:function(e){return e.SocialNetworkLeadsStore.S_SELLERS_FILTERS},S_SUB_SOURCES_FILTERS:function(e){return e.SocialNetworkLeadsStore.S_SUB_SOURCES_FILTERS},S_FAN_PAGE_PROGRAMS_FILTERS:function(e){return e.SocialNetworkLeadsStore.S_FAN_PAGE_PROGRAMS_FILTERS}})),Object(i["e"])("auth",["currentUser"])),{},{sourceFilter:function(){return this.filters[4].model}}),created:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.setOptionsOnFilters();case 1:case"end":return t.stop()}}),t)})))()},methods:Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])({},y["a"]),Object(i["b"])("SocialNetworkLeadsStore",["A_GET_RECOVERY_LEADS_SN_BY_PROGRAM","A_SET_FILTERS","A_GET_TRACKING_NEW_LEADS","A_DELETE_LEAD","A_GET_SMS_SENT_TO_NEW_LEADS","A_GET_STATUS_LEAD","A_GET_FILTER_SELLERS","A_GET_SUB_SOURCES_FILTERS","A_GET_FAN_PAGE_PROGRAMS_FILTERS"])),Object(i["b"])("CrmLeadStore",["A_SET_SELECTED_LEADS"])),{},{getSNRecoveryLeads:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isBusy=!0,t.next=4,e.A_GET_RECOVERY_LEADS_SN_BY_PROGRAM({name_text:e.filterPrincipal.model,lead_status:e.filters[3].model,cr:e.filters[2].model,evidence:null,date_from:e.filters[0].model,date_to:e.filters[1].model,orderby:10,order:"desc",user_owner:e.filters[7].model,mobile:e.filters[9].model,iduser:e.currentUser.user_id,idrole:e.currentUser.role_id,type:3,task:e.filters[8].model,last_action:null,fanpage:e.$route.meta.program,sourcename:e.filters[4].model,perpage:e.paginate.perPage,page:e.paginate.currentPage,notcall:0==e.$route.meta.program?1:0,subsource:1==e.filters[4].model?e.filters[5].model:e.filters[6].model});case 4:s=t.sent,e.totalLeads=s.total,e.fromPage=s.from,e.toPage=s.to,e.isBusy=!1,t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log("Somtehing went wrong getSNRecoveryLeads",t.t0),e.showToast("danger","top-right","Oop!","AlertOctagonIcon",e.getInternalErrors(t.t0));case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))()},setOptionsOnFilters:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.A_GET_STATUS_LEAD("recovery"),e.A_GET_FAN_PAGE_PROGRAMS_FILTERS(),e.A_GET_FILTER_SELLERS({moduleId:15,roles:"[]"})]);case 2:e.filters[3].options=e.S_LEAD_STATUS_SN,e.filters[10].options=e.S_FAN_PAGE_PROGRAMS_FILTERS,e.filters[7].options=e.S_SELLERS_FILTERS;case 5:case"end":return t.stop()}}),t)})))()},onChangeCurrentPage:function(e){this.paginate.currentPage=e,this.getSNRecoveryLeads()},openModalTracking:function(e,t){var s=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,s.A_GET_TRACKING_NEW_LEADS({lead_id:e});case 2:s.nameLeadSelected=t,s.showModalTracking=!0;case 4:case"end":return a.stop()}}),a)})))()},closeModalTracking:function(){this.showModalTracking=!1},deleteLead:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){var a,n,l;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.showConfirmSwal("Are you sure?","You won't be able to revert this!","question");case 2:if(a=s.sent,!a.value){s.next=9;break}return n=t.currentUser.user_id,s.next=7,t.A_DELETE_LEAD({lead_id:e,user_id:n});case 7:l=s.sent,t.isResponseSuccess(l)?t.showToast("success","top-right","Deleted!","CheckIcon","Your file has been deleted."):t.showToast("warning","top-right","Warning!","AlertTriangleIcon","Something went wrong.".concat(l.message));case 9:case"end":return s.stop()}}),s)})))()},openModalSendSMS:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.rowData=e,t.leads_sms=[],t.typesms=1,t.leads_sms_o=[],t.leads_sms_o.push(e.id),t.name_leads_arr=[{name:e.nickname,id:e.id}],t.sendModalSms=!0;case 7:case"end":return s.stop()}}),s)})))()},closeModalSendSms:function(e){this.sendModalSms=e},openModalSmsList:function(e,t){var s=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,s.A_GET_SMS_SENT_TO_NEW_LEADS({id:e});case 2:s.nameLeadSelected=t,s.showModalSmsList=!0;case 4:case"end":return a.stop()}}),a)})))()},closeModalSmsList:function(){this.showModalSmsList=!1},modalSmssOpen:function(){this.typesms=0,this.name_leads_arr=this.leadsSelecteds.map((function(e){return{name:e.nickname,id:e.id}})),this.leads_sms=this.leadsSelecteds.map((function(e){return e.id})),this.sendModalSms=!0},onSelectedRow:function(e){var t=this.leadsSelecteds.findIndex((function(t){return t.id===e.id}));!0===e.selected&&-1===t?this.leadsSelecteds.push(e):!1===e.selected&&-1!==t&&this.leadsSelecteds.splice(t,1),this.onRowSelected()},onRowSelected:function(){this.A_SET_SELECTED_LEADS(this.leadsSelecteds)},selectedAll:function(){this.selectAll?this.S_LEADS.items.forEach((function(e){return e.selected=!0})):this.S_LEADS.items.forEach((function(e){return e.selected=!1})),this.onRowSelected()},open:function(e){this.itemImage=[e],this.showImage=0}}),mounted:function(){[1,2].includes(this.currentUser.role_id)&&0===this.type&&this.actionsOptions.push("delete")},watch:{sourceFilter:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(1!=e&&2!=e){s.next=21;break}if(1!=e){s.next=11;break}return s.next=4,t.A_GET_SUB_SOURCES_FILTERS(e);case 4:t.$set(t.filters[5],"options",t.S_SUB_SOURCES_FILTERS),t.filters[5].visible=!0,t.filters[6].options=[],t.filters[6].visible=!1,t.filters[6].model=null,s.next=19;break;case 11:if(2!=e){s.next=19;break}return s.next=14,t.A_GET_SUB_SOURCES_FILTERS(e);case 14:t.$set(t.filters[6],"options",t.S_SUB_SOURCES_FILTERS),t.filters[6].visible=!0,t.filters[5].options=[],t.filters[5].visible=!1,t.filters[5].model=null;case 19:s.next=27;break;case 21:t.filters[5].visible=!1,t.filters[5].options=[],t.filters[5].model=null,t.filters[6].options=[],t.filters[6].visible=!1,t.filters[6].model=null;case 27:case"end":return s.stop()}}),s)})))()}}},v=k,T=Object(h["a"])(v,a,n,!1,null,null,null);t["default"]=T.exports}}]);
//# sourceMappingURL=chunk-2d0bd59a.ae00d39e.js.map