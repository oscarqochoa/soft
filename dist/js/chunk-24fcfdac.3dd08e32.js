(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24fcfdac"],{"30b2":function(e,t,r){"use strict";r("c6c4")},"6cc9":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("file-mananger-general",{attrs:{"current-user":e.currentUser}})},a=[],o=r("5530"),i=r("2f62"),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-card",[r("header-slot",{attrs:{"no-border-bottom":""},scopedSlots:e._u([{key:"actions",fn:function(){return[r("b-row",[r("b-col",{staticClass:"d-flex align-items-end justify-content-end flex-column"},[r("div",[r("b-button",{staticClass:"mr-1",attrs:{variant:"outline-info"},on:{click:e.openModalNewFolder}},[e._v(" New Folder ")]),r("b-button",{attrs:{variant:"outline-primary"},on:{click:e.openUploadFileMoadl}},[e._v(" Add Files ")])],1)])],1)]},proxy:!0}])})],1),r("b-card",[r("b-row",{staticClass:"pl-1"},[e._l(e.history,(function(t,n){return[r("div",{key:n,staticClass:"d-flex align-items-center justify-content-between cursor-pointer",on:{click:function(t){return e.historyClicked(n)}}},[r("feather-icon",{staticClass:"font-medium-5",class:{"text-warning":""===t.icon,"text-primary":"HomeIcon"===t.icon},attrs:{icon:t.icon}}),r("span",{staticClass:"ml-50 d-flex align-items-center justify-content-center font-medium-1"},[e._v(e._s(t.label))]),r("span",{staticClass:"font-large-1 ml-50"},[e._v("/")])],1)]}))],2)],1),r("b-card",{staticClass:"p-0",attrs:{"body-class":"py-0"}},[r("b-row",{staticClass:"my-1"},[r("b-col",{staticClass:"d-flex align-items-center justify-content-end py-0"},[r("b-form-radio-group",{attrs:{buttons:"","button-variant":"outline-primary"},model:{value:e.selectedView,callback:function(t){e.selectedView=t},expression:"selectedView"}},[r("b-form-radio",{attrs:{value:!0}},[r("feather-icon",{attrs:{icon:"FolderIcon",size:"18"}})],1),r("b-form-radio",{attrs:{value:!1}},[r("feather-icon",{attrs:{icon:"ListIcon",size:"18"}})],1)],1)],1)],1),e.selectedView?r("b-row",{staticClass:"mb-4"},e._l(e.currentFiles,(function(t,n){return r("b-col",{key:n,class:"dark"===e.skin?"hover-shadow-dark":"hover-shadow-light",attrs:{cols:"6",sm:"4",md:"3",lg:"2",xl:"2"}},[r("file-component",{attrs:{"current-user":e.currentUser,content:t},on:{contentClicked:e.contentClicked,details:e.openFileDetail,deleteFile:e.deleteFile,shareFile:e.openShareFileModal,edit:e.updateEditState}})],1)})),1):r("b-row",{staticClass:"mb-1"},[r("b-table",{attrs:{fields:e.fields,items:e.currentFiles,responsive:""},scopedSlots:e._u([{key:"cell(file_name)",fn:function(t){return[e.selectedFile===t.item&&e.editState?r("b-form-input",{attrs:{size:"sm"},on:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.renameFile(t.item)},blur:function(r){return e.renameFile(t.item)}},model:{value:e.selectedFile.file_name,callback:function(t){e.$set(e.selectedFile,"file_name",t)},expression:"selectedFile.file_name"}}):r("span",{staticClass:"\n              cursor-pointer\n              d-flex\n              align-items-center\n              justify-content-start\n            ",on:{click:function(r){return e.contentClicked(t.item)}}},[r("amg-icon",{staticClass:"mr-50",class:{"text-warning":"Folder"===t.item.type},style:"Folder"===t.item.type?"fill: #ff9f43":"",attrs:{icon:t.item.extension?"CustomFileIcon":"CustomFolderIcon",size:"15"}}),r("span",{staticClass:"font-small-4"},[e._v(e._s(t.item.file_name+(t.item.extension?"."+t.item.extension:"")))])],1)]}},{key:"cell(countfiel)",fn:function(t){return[t.item.extension?r("span",[e._v(e._s(t.item.size))]):r("span",[e._v(e._s(t.item.countfiel))])]}},{key:"cell(user_upload)",fn:function(t){return[r("p",[e._v(e._s(t.item.user_upload))]),r("p",[e._v(e._s(e._f("myGlobalWithHour")(t.item.created_at)))])]}},{key:"cell(user_modified)",fn:function(t){return[t.item.user_modified?r("div",[r("p",[e._v(e._s(t.item.user_modified))]),r("p",[e._v(e._s(e._f("myGlobalWithHour")(t.item.updated_at)))])]):e._e()]}},{key:"cell(actions)",fn:function(t){return[r("b-row",[e.currentUser.modul_id===t.item.module_id?r("b-col",{staticClass:"d-flex align-items-center justify-content-around"},[r("feather-icon",{staticClass:"text-primary cursor-pointer",attrs:{icon:"EditIcon",size:"15"},on:{click:function(r){e.selectedFile=e.currentFiles[t.index],e.updateEditState(!0)}}}),r("feather-icon",{staticClass:"text-danger cursor-pointer",attrs:{icon:"TrashIcon",size:"15"},on:{click:function(r){return e.asyncDeleteFile(t.item)}}}),null==t.item.parent?r("feather-icon",{staticClass:"text-success cursor-pointer",attrs:{icon:"Share2Icon",size:"15"},on:{click:function(r){return e.openShareFileModal(t.item)}}}):e._e()],1):e._e()],1)]}}])})],1)],1),r("b-sidebar",{attrs:{id:"sidebar-right",right:"","bg-variant":"white",lazy:"",backdrop:""}},[r("b-container",[r("b-row",{staticClass:"mb-1"},[e.selectedFile!=={}?r("b-col",{staticClass:"d-flex align-items-center justify-content-center"},[r("amg-icon",{class:{"text-warning":"Folder"===e.selectedFile.type},attrs:{size:"50",icon:"Folder"===e.selectedFile.type?"CustomFolderIcon":"CustomFileIcon"}})],1):e._e()],1),r("b-row",{staticClass:"border-bottom border-bottom-2"},[r("b-col",{staticClass:"d-flex align-items-center justify-content-center"},[r("h3",{staticClass:"font-weight-bolder"},[e._v(" "+e._s(e.selectedFile.file_name)+" ")])])],1),r("b-row",{staticClass:"mt-1"},[r("b-col",[r("p",{staticClass:"font-medium-1"},[e._v(" Created: "+e._s(e._f("myGlobal")(e.selectedFile.created_at))+" by "+e._s(e.selectedFile.user_upload)+" ")])])],1),e.selectedFile.updated_at?r("b-row",{staticClass:"mt-10"},[r("b-col",[r("p",{staticClass:"font-medium-1"},[e._v(" Updated: "+e._s(e._f("myGlobal")(e.selectedFile.updated_at))+" ")])])],1):e._e(),"Folder"===e.selectedFile.type?r("b-row",{staticClass:"mt-10"},[r("b-col",[r("p",{staticClass:"font-medium-1"},[e._v("Files: "+e._s(e.selectedFile.countfiel))])])],1):r("b-row",{staticClass:"mt-10"},[r("b-col",[r("p",{staticClass:"font-medium-1"},[e._v("Size: "+e._s(e.selectedFile.size))])])],1),r("b-row",{staticClass:"mt-10"},[r("b-col",[r("p",{staticClass:"font-medium-1"},[e._v("Route: "+e._s(e.currentRoute))])])],1),r("b-row",{staticClass:"mt-10"},[r("b-col",[r("p",{staticClass:"font-medium-1"},[e._v(" Permissions: "),e.currentUser.modul_id==e.selectedFile.module_id?r("span",[e._v(" Rename, Delete, "),null==e.selectedFile.parent?r("span",[e._v("Share")]):e._e()]):r("span",[e._v("None")])])])],1),r("b-row",[r("b-col",[r("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.sidebar-right",modifiers:{"sidebar-right":!0}}],staticClass:"w-100",attrs:{variant:"primary"},on:{click:function(t){return e.contentClicked(e.selectedFile)}}},[e._v("Open")])],1)],1)],1)],1),e.shareFileModal?r("share-file-modal",{attrs:{"selected-file":e.selectedFile,"show-modal":e.shareFileModal},on:{closeModal:e.closeShareFileModal}}):e._e(),e.newFolderModal?r("new-folder-modal",{attrs:{"current-user":e.currentUser,"show-modal":e.newFolderModal,"current-folder":e.currentFolder,"current-folder-module":e.currentFolderModule},on:{closeModal:e.closeModalNewFolder,closeModalAndRefresh:e.closeModalNewFolderAndRefresh}}):e._e(),r("b-modal",{attrs:{title:"Upload File","modal-class":"modal-primary","body-class":"p-50","button-size":"sm","ok-title":"Ok","hide-footer":0===e.files.length,centered:""},on:{hidden:e.actionOnHideUploadFileModal},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[r("b-button",{attrs:{variant:"primary"},on:{click:e.onUploadFile}},[e._v(" Upload ")])]},proxy:!0}]),model:{value:e.uploadFileModal,callback:function(t){e.uploadFileModal=t},expression:"uploadFileModal"}},[r("drag-and-drop",{attrs:{"files-array":e.files},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}})],1)],1)},s=[],c=r("1da1"),d=(r("96cf"),r("d3b7"),r("159b"),r("b0c0"),r("fb6a"),r("a434"),r("2616")),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"d-flex flex-column"},[r("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.b.bottom",value:e.content.file_name,expression:"content.file_name",modifiers:{hover:!0,b:!0,bottom:!0}}],staticClass:"w-100 d-flex flex-column align-items-center justify-content-center mt-50",on:{contextmenu:function(t){return t.preventDefault(),e.contentRightClicked.apply(null,arguments)}}},[r("amg-icon",{staticClass:"font-large-4 cursor-pointer",class:{"text-warning":"Folder"===e.content.type},style:"Folder"===e.content.type?"fill: #ff9f43":"",attrs:{icon:"Folder"===e.content.type?"CustomFolderIcon":"CustomFileIcon"},on:{click:e.clickFile}}),e.edit?r("b-form-input",{ref:"editInput",attrs:{size:"sm"},on:{blur:e.renameFile},model:{value:e.newName,callback:function(t){e.newName=t},expression:"newName"}}):r("h5",{staticClass:"mt-1 text-center text w-100"},[e._v(" "+e._s(e.content.file_name)+" ")]),r("h6",[e._v(" "+e._s(e._f("myGlobal")(e.content.created_at))+" ")])],1),r("b-dropdown",{ref:"dropdown",staticClass:"bg-danger",staticStyle:{width:"0px",height:"0px"},attrs:{variant:"transparent","toggle-class":"text-decoration-none","no-caret":""},scopedSlots:e._u([{key:"button-content",fn:function(){},proxy:!0}])},[r("b-dropdown-item",{directives:[{name:"b-toggle",rawName:"v-b-toggle.sidebar-right",modifiers:{"sidebar-right":!0}}],on:{click:function(t){return e.$emit("details",e.content)}}},[r("feather-icon",{staticClass:"mr-50",attrs:{icon:"InfoIcon"}}),e._v("Details ")],1),e.currentUser.modul_id===e.content.module_id?r("div",[r("b-dropdown-item",{on:{click:e.enableRenameFile}},[r("feather-icon",{staticClass:"mr-50",attrs:{icon:"EditIcon"}}),e._v("Rename ")],1),r("b-dropdown-item",{on:{click:e.deleteFile}},[r("feather-icon",{staticClass:"mr-50",attrs:{icon:"TrashIcon"}}),e._v("Delete ")],1),null==e.content.parent?r("b-dropdown-item",{on:{click:e.shareFile}},[r("feather-icon",{staticClass:"mr-50",attrs:{icon:"Share2Icon"}}),e._v("Share ")],1):e._e()],1):e._e()],1)],1)},m=[],f={name:"FileComponent",directives:{"b-tooltip":d["a"]},props:["content","currentUser"],data:function(){return{edit:!1,newName:""}},methods:{contentRightClicked:function(){this.$refs.dropdown.show()},enableRenameFile:function(){this.newName=this.content.file_name,this.edit=!0,this.$emit("edit",!0)},renameFile:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.newName!==e.content.file_name){t.next=3;break}return e.edit=!1,t.abrupt("return");case 3:return r={file_id:e.content.id,name_file:e.newName},t.prev=4,t.next=7,amgApi.post("/file-manager/update-file-name",r);case 7:e.content.file_name=e.newName,e.showToast("success","top-right","","CheckIcon","Rename success"),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](4),e.showErrorSwal(t.t0);case 14:e.edit=!1,e.$emit("edit",!1);case 16:case"end":return t.stop()}}),t,null,[[4,11]])})))()},deleteFile:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={file_id:e.content.id,user_id:e.currentUser.user_id},t.prev=1,t.next=4,e.showConfirmSwal();case 4:if(n=t.sent,!n.isConfirmed){t.next=10;break}return t.next=8,amgApi.post("/file-manager/remove-file-from-module",r);case 8:e.showSuccessSwal("File has been deleted successfully"),e.$emit("deleteFile",e.content);case 10:t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](1),e.showErrorSwal(t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})))()},shareFile:function(){this.$emit("shareFile",this.content)},clickFile:function(){this.edit=!1,this.$emit("contentClicked",this.content)}}},p=f,h=(r("7d38"),r("2877")),b=Object(h["a"])(p,u,m,!1,null,"6a844124",null),w=b.exports,F=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-modal",{attrs:{title:"Share "+e.selectedFile.file_name,"hide-footer":"","modal-class":"modal-primary","no-close-on-backdrop":""},on:{hidden:e.hideModal},model:{value:e.ownShowModal,callback:function(t){e.ownShowModal=t},expression:"ownShowModal"}},[r("b-row",[r("b-col",[r("b-form-group",{attrs:{label:"Select Modules","label-class":"font-weight-bolder"}},[r("v-select",{attrs:{options:e.modulesList,label:"name",multiple:""},model:{value:e.selectedModules,callback:function(t){e.selectedModules=t},expression:"selectedModules"}})],1)],1)],1),r("b-row",[r("b-col",{staticClass:"d-flex align-items-center justify-content-end"},[r("b-button",{attrs:{variant:"info"},on:{click:e.shareFolderToModules}},[r("feather-icon",{attrs:{icon:"Share2Icon"}}),e._v("Share ")],1)],1)],1)],1)},v=[],_=r("4a7a"),g=r.n(_),x={name:"ShareFileModal",components:{vSelect:g.a},props:["showModal","selectedFile"],data:function(){return{modulesList:[],selectedModules:[],ownShowModal:!1}},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getListModules();case 2:return t.next=4,e.getSelectedModules();case 4:e.ownShowModal=e.showModal;case 5:case"end":return t.stop()}}),t)})))()},methods:{hideModal:function(){this.$emit("closeModal"),this.ownShowModal=!1},shareFolderToModules:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.showConfirmSwal();case 3:if(r=t.sent,!r.isConfirmed){t.next=10;break}return n={idfolder:e.selectedFile.id,modules:e.selectedModules},t.next=8,amgApi.post("/file-manager/save-file-permission",n);case 8:e.showSuccessSwal(),e.hideModal();case 10:t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),e.showErrorSwal(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},getListModules:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,amgApi.get("/module/get-modules");case 3:r=t.sent,e.modulesList=r.data,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.showErrorSwal(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getSelectedModules:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,amgApi.post("/file-manager/verify-file-permission",{idfolder:e.selectedFile.id});case 3:r=t.sent,e.selectedModules=JSON.parse(r.data[0].share),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.showErrorSwal(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},k=x,y=Object(h["a"])(k,F,v,!1,null,"d2891f16",null),M=y.exports,C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-modal",{attrs:{"hide-footer":"","modal-class":"modal-primary",title:"New Folder"},on:{hidden:e.hideModal},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[r("b-row",[r("b-col",[r("validation-observer",{ref:"form"},[r("label",[e._v("Folder name")]),r("validation-provider",{attrs:{name:"folderName",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[r("b-form-input",{model:{value:e.newFolderName,callback:function(t){e.newFolderName=t},expression:"newFolderName"}}),n[0]?r("label",{staticClass:"text-danger"},[e._v(" Required ")]):e._e()]}}])})],1)],1)],1),r("b-row",[r("b-col",{staticClass:"d-flex align-items-center justify-content-end mt-1"},[r("b-button",{attrs:{variant:"primary"},on:{click:e.createFolder}},[e._v(" Create ")])],1)],1)],1)},S=[],R={name:"NewFolderModal",props:["showModal","currentFolder","currentUser","currentFolderModule"],data:function(){return{newFolderName:""}},methods:{hideModal:function(){this.$emit("closeModal")},hideModalAndRefresh:function(){this.$emit("closeModalAndRefresh")},createFolder:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.form.validate();case 3:if(r=t.sent,!r){t.next=14;break}return t.next=7,e.showConfirmSwal();case 7:if(n=t.sent,!n.isConfirmed){t.next=14;break}return a={folderid:e.currentFolder,module_id:e.currentFolderModule,name_folder:e.newFolderName,user_id:e.currentUser.user_id},t.next=12,amgApi.post("/file-manager/save-module-folder",a);case 12:e.hideModalAndRefresh(),e.showSuccessSwal();case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),e.showErrorSwal(t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))()}}},j=R,O=Object(h["a"])(j,C,S,!1,null,"45e74814",null),N=O.exports,U=r("5f4a"),I={name:"FileManangerGeneral",components:{DragAndDrop:U["a"],NewFolderModal:N,ShareFileModal:M,FileComponent:w},directives:{"b-tooltip":d["a"]},props:{currentUser:{type:Object,required:!0}},data:function(){return{editState:!1,fileModel:{model:!1},selectedView:!0,fields:[{key:"file_name",label:"File Name "},{key:"countfiel",label:"Files/Size",class:"text-center"},{key:"user_upload",label:"Created By",class:"text-center"},{key:"user_modified",label:"Modified By",class:"text-center"},{key:"actions",label:"Actions"}],shareFileModal:!1,newFolderModal:!1,uploadFileModal:!1,selectedFile:{},history:[{label:"",icon:"HomeIcon",folderId:null,folderModule:this.currentUser.modul_id}],currentFiles:[],currentFolder:"",currentFolderModule:"",files:[]}},computed:Object(o["a"])(Object(o["a"])({},Object(i["c"])({skin:"appConfig/skin"})),{},{currentRoute:function(){var e="";return this.history.forEach((function(t){e+="".concat(t.label,"/")})),e}}),created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getFilesFromFolder(null);case 2:case"end":return t.stop()}}),t)})))()},methods:{updateEditState:function(e){this.editState=e},actionOnHideUploadFileModal:function(){this.files=[]},onUploadFile:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.showConfirmSwal();case 3:if(r=t.sent,!r.isConfirmed){t.next=21;break}return n=new FormData,e.files.forEach((function(e){n.append("images[]",e,e.name)})),e.addPreloader(),n.append("module_id",e.currentFolderModule),n.append("folder_name",""),n.append("user_id",e.currentUser.user_id),n.append("idfolder",e.currentFolder?e.currentFolder:""),a={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){this.uploadPercentage=Math.round(100*e.loaded/e.total)}.bind(e)},t.next=15,amgApi.post("/file-manager/save-file-by-module",n,a);case 15:if(o=t.sent,200!==o.status){t.next=21;break}return e.uploadFileModal=!1,e.showSuccessSwal(),t.next=21,e.getFilesFromFolder(e.currentFolder,e.currentFolderModule);case 21:t.next=26;break;case 23:t.prev=23,t.t0=t["catch"](0),e.showErrorSwal(t.t0);case 26:case"end":return t.stop()}}),t,null,[[0,23]])})))()},openUploadFileMoadl:function(){this.uploadFileModal=!0},getFilesFromFolder:function(e){var t=arguments,r=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.length>1&&void 0!==t[1]?t[1]:r.currentUser.modul_id,n.prev=1,r.addPreloader(),n.next=5,amgApi.post("/file-manager/search-files-manager",{module_id:a,order:"asc",orderby:2,parent:e,typee:null});case 5:o=n.sent,r.currentFiles=[],r.currentFiles=o.data.data,r.currentFolder=e,r.currentFolderModule=a,r.removePreloader(),n.next=17;break;case 13:n.prev=13,n.t0=n["catch"](1),r.showErrorSwal(n.t0),r.removePreloader();case 17:case"end":return n.stop()}}),n,null,[[1,13]])})))()},contentClicked:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("Folder"!==e.type){r.next=6;break}return r.next=3,t.getFilesFromFolder(e.id,e.module_id);case 3:t.history.push({label:e.file_name,icon:"",folderId:e.id,folderModule:e.module_id}),r.next=7;break;case 6:window.open(e.url,"_blank");case 7:case"end":return r.stop()}}),r)})))()},openModalNewFolder:function(){this.newFolderModal=!0},closeModalNewFolder:function(){this.newFolderModal=!1},closeModalNewFolderAndRefresh:function(){this.newFolderModal=!1,this.getFilesFromFolder(this.currentFolder,this.currentFolderModule)},openShareFileModal:function(e){this.selectedFile=e,this.shareFileModal=!0},closeShareFileModal:function(){this.shareFileModal=!1},historyClicked:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.history[e],r.next=3,t.getFilesFromFolder(n.folderId,n.folderModule);case 3:t.history=t.history.slice(0,e+1);case 4:case"end":return r.stop()}}),r)})))()},openFileDetail:function(e){this.selectedFile=e},asyncDeleteFile:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n={file_id:e.id,user_id:t.currentUser.user_id},r.prev=1,r.next=4,t.showConfirmSwal();case 4:if(a=r.sent,!a.isConfirmed){r.next=10;break}return r.next=8,amgApi.post("/file-manager/remove-file-from-module",n);case 8:t.showSuccessSwal("File has been deleted successfully"),t.deleteFile(e);case 10:r.next=15;break;case 12:r.prev=12,r.t0=r["catch"](1),t.showErrorSwal(r.t0);case 15:case"end":return r.stop()}}),r,null,[[1,12]])})))()},deleteFile:function(e){var t=this.currentFiles.indexOf(e);t>-1&&this.currentFiles.splice(t,1)},renameFile:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n={file_id:e.id,name_file:t.selectedFile.file_name},r.prev=1,r.next=4,amgApi.post("/file-manager/update-file-name",n);case 4:r.next=9;break;case 6:r.prev=6,r.t0=r["catch"](1),t.showErrorSwal(r.t0);case 9:t.selectedFile={};case 10:case"end":return r.stop()}}),r,null,[[1,6]])})))()}}},E=I,A=(r("30b2"),Object(h["a"])(E,l,s,!1,null,"bc810dc8",null)),$=A.exports,z={name:"FileMananger",components:{FileManangerGeneral:$},computed:Object(o["a"])({},Object(i["c"])({currentUser:"auth/currentUser"}))},D=z,G=Object(h["a"])(D,n,a,!1,null,"6ca199d9",null);t["default"]=G.exports},"7d38":function(e,t,r){"use strict";r("f98a6")},c6c4:function(e,t,r){},f98a6:function(e,t,r){}}]);
//# sourceMappingURL=chunk-24fcfdac.3dd08e32.js.map