(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58e8bc78"],{"2d14":function(e,t,r){},"60e3":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("header-slot",{scopedSlots:e._u([{key:"actions",fn:function(){return[r("b-row",{staticClass:"justify-content-end mr-1"},[r("b-button",{attrs:{variant:"outline-danger",to:"/home"}},[e._v(" Cancel ")]),r("b-button",{staticClass:"ml-1",attrs:{variant:"primary"},on:{click:e.updateProfile}},[e._v(" Save ")])],1)]},proxy:!0}])}),r("b-alert",{attrs:{variant:"danger",show:void 0===e.currentUser}},[r("h4",{staticClass:"alert-heading"},[e._v("Error fetching user data")]),r("div",{staticClass:"alert-body"},[e._v(" No user found with this user id. Check "),r("b-link",{staticClass:"alert-link",attrs:{to:{name:"apps-users-list"}}},[e._v(" User List ")]),e._v(" for other users. ")],1)]),e.currentUser?[r("b-row",[r("b-col",{attrs:{cols:"12"}},[r("user-view-user-info-card",{attrs:{"user-data":e.currentUser,form:e.form}})],1)],1),r("b-row",[r("b-col",{attrs:{cols:"12",lg:"6"}},[r("user-view-access-card",{attrs:{"user-data":e.currentUser}})],1),r("b-col",{attrs:{cols:"12",lg:"6"}},[r("user-view-session-list-card")],1)],1)]:e._e()],2)},s=[],n=r("1da1"),o=r("5530"),l=(r("96cf"),r("2f62")),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card",{attrs:{title:"User Information"}},[r("b-container",{staticClass:"mx-1 pr-3 my-1"},[r("b-row",[r("b-col",{staticClass:"\n          d-flex\n          justify-content-between\n          flex-column\n          mb-lg-0 mb-md-3 mb-md-3 mb-sm-3 mb-3\n        ",attrs:{cols:"21",xl:"5",md:"12"}},[r("div",{staticClass:"d-flex justify-content-start"},[""!=e.form.file?r("div",{class:["avatar-container",{backdrop:e.form.remove}]},[e.form.remove?r("div",{staticClass:"remove-temporal-avatar",on:{click:e.clearFileData}},[r("div",[r("feather-icon",{attrs:{icon:"XIcon",size:"35"}})],1)]):e._e(),r("b-avatar",{ref:"previewEl",attrs:{src:e.form.file,text:e.avatarText(e.userData.fullName),size:"130px",rounded:""}})],1):r("b-avatar",{attrs:{src:e.userData.avatar,text:e.avatarText(e.userData.fullName),variant:"light-primary",size:"130px",rounded:""}}),r("div",{staticClass:"ml-2"},[r("div",{staticClass:"mb-1"},[r("h4",{staticClass:"mb-0"},[r("b",[e._v(" "+e._s(e.userData.fullName)+" ")])]),r("span",{staticClass:"card-text"},[e._v(e._s(e.userData.email))])]),r("b-button",{attrs:{variant:"outline-primary",size:"sm"},on:{click:e.addFile}},[r("b-form-file",{ref:"refInputEl",staticClass:"d-none",on:{change:e.fillFileData}}),r("feather-icon",{staticClass:"d-inline mr-25",attrs:{icon:"ImageIcon"}}),r("span",{staticClass:"d-none d-sm-inline"},[e._v("Upload")])],1)],1)],1)]),r("b-col",{staticClass:"information-form",attrs:{cols:"12",xl:"3",md:"6"}},[r("b-form-group",{attrs:{"label-cols-lg":"5","label-cols-md":"5","label-cols-sm":"4","label-cols":"12","content-cols-lg":"7","content-cols-md":"7","content-cols-sm":"8","content-cols":"12"},scopedSlots:e._u([{key:"label",fn:function(){return[r("feather-icon",{staticClass:"mr-75",attrs:{icon:"UserIcon"}}),e._v(" First Name ")]},proxy:!0}])},[r("b-form-input",{model:{value:e.userData.first_name,callback:function(t){e.$set(e.userData,"first_name",t)},expression:"userData.first_name"}})],1),r("b-form-group",{attrs:{"label-cols-lg":"5","label-cols-md":"5","label-cols-sm":"4","label-cols":"12","content-cols-lg":"7","content-cols-md":"7","content-cols-sm":"8","content-cols":"12"},scopedSlots:e._u([{key:"label",fn:function(){return[r("feather-icon",{staticClass:"mr-75",attrs:{icon:"UserIcon"}}),e._v(" Last Name ")]},proxy:!0}])},[r("b-form-input",{model:{value:e.userData.last_name,callback:function(t){e.$set(e.userData,"last_name",t)},expression:"userData.last_name"}})],1),r("b-form-group",{attrs:{"label-cols-lg":"5","label-cols-md":"5","label-cols-sm":"4","label-cols":"12","content-cols-lg":"7","content-cols-md":"7","content-cols-sm":"8","content-cols":"12"},scopedSlots:e._u([{key:"label",fn:function(){return[r("feather-icon",{staticClass:"mr-75",attrs:{icon:"StarIcon"}}),e._v(" Phone ")]},proxy:!0}])},[r("b-form-input",{directives:[{name:"mask",rawName:"v-mask",value:"(XXX)-XXX-XXXX",expression:"'(XXX)-XXX-XXXX'"}],model:{value:e.userData.phone,callback:function(t){e.$set(e.userData,"phone",t)},expression:"userData.phone"}})],1)],1),r("b-col",{staticClass:"information-form",attrs:{cols:"12",xl:"4",md:"6"}},[r("b-form-group",{attrs:{"label-cols-lg":"4","label-cols-md":"5","label-cols-sm":"4","label-cols":"12","content-cols-lg":"7","content-cols-md":"7","content-cols-sm":"8","content-cols":"12"},scopedSlots:e._u([{key:"label",fn:function(){return[r("feather-icon",{staticClass:"mr-75",attrs:{icon:"PhoneIcon"}}),e._v(" Extension ")]},proxy:!0}])},[r("b-form-input",{model:{value:e.userData.extension,callback:function(t){e.$set(e.userData,"extension",t)},expression:"userData.extension"}})],1),r("b-form-group",{attrs:{"label-cols-lg":"4","label-cols-md":"5","label-cols-sm":"4","label-cols":"12","content-cols-lg":"7","content-cols-md":"7","content-cols-sm":"8","content-cols":"12"},scopedSlots:e._u([{key:"label",fn:function(){return[r("feather-icon",{staticClass:"mr-75",attrs:{icon:"CalendarIcon"}}),e._v(" Date of Birth ")]},proxy:!0}])},[r("b-form-datepicker",{model:{value:e.userData.date_of_birth,callback:function(t){e.$set(e.userData,"date_of_birth",t)},expression:"userData.date_of_birth"}})],1),r("b-form-group",{attrs:{"label-cols-lg":"4","label-cols-md":"5","label-cols-sm":"4","label-cols":"12","content-cols-lg":"7","content-cols-md":"7","content-cols-sm":"8","content-cols":"12"},scopedSlots:e._u([{key:"label",fn:function(){return[r("feather-icon",{staticClass:"mr-75",attrs:{icon:"FlagIcon"}}),e._v(" Country ")]},proxy:!0}])},[r("b-form-input",{attrs:{readonly:"",value:"PE"==e.userData.country?"Peru":"USA"}})],1)],1)],1)],1)],1)},i=[],u=(r("b0c0"),r("0e20")),d={props:{userData:{type:Object,required:!0},form:{type:Object}},methods:{avatarText:function(e){return Object(u["a"])(e)},addFile:function(){this.$refs.refInputEl.$el.childNodes[0].click()},fillFileData:function(e){var t=this,r=e.srcElement.files[0];this.form.image=r.name;var a=new FileReader;a.readAsDataURL(r),a.onload=function(){return t.form.file=a.result},this.form.remove=!0},clearFileData:function(){this.form.file="",this.form.image="",this.form.remove=!1,this.$refs.refInputEl.reset()}}},m=d,f=(r("a300"),r("2877")),b=Object(f["a"])(m,c,i,!1,null,null,null),p=b.exports,v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card",{staticStyle:{height:"93%"},attrs:{title:"User Access"}},[r("b-row",[r("b-col",[r("table",{staticClass:"mt-2 mt-xl-0 w-100"},[r("tr",[r("th",{staticClass:"pb-50"},[r("feather-icon",{staticClass:"mr-75",attrs:{icon:"UserIcon"}}),r("span",{staticClass:"font-weight-bold"},[e._v("Email")])],1),r("td",{staticClass:"pb-50"},[e._v(" "+e._s(e.userData.email)+" ")])]),r("tr",[r("th",{staticClass:"pb-50"},[r("feather-icon",{staticClass:"mr-75",attrs:{icon:"UserIcon"}}),r("span",{staticClass:"font-weight-bold"},[e._v("Password")])],1),r("td",{staticClass:"pb-50"},[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.change-password-modal",modifiers:{"change-password-modal":!0}}],attrs:{variant:"outline-primary",size:"sm"}},[e._v(" Change password ")])],1)]),r("tr",[r("th",[r("feather-icon",{staticClass:"mr-75",attrs:{icon:"LockIcon"}}),r("span",{staticClass:"font-weight-bold"},[e._v("Rol")])],1),r("td",[e._l(e.userData.arrRoles,(function(t,a){return[r("span",{key:t.role_id},[e._v(e._s(t.role_name)+e._s(a!=e.userData.arrRoles.length-1?", ":""))])]}))],2)])]),r("b-form-group",{staticClass:"mt-3",attrs:{id:"label-modules",label:"Module(s)","label-for":"modules"},scopedSlots:e._u([{key:"label",fn:function(){return[r("span",{staticStyle:{"font-size":"14px"}},[e._v("Module(s)")])]},proxy:!0}])},["CEO"!=e.userData.roleName?r("b-row",e._l(e.userData.arrModuls,(function(t){return r("b-col",{key:t.id_module,attrs:{cols:"12",md:"3",id:"modules"}},[r("b-badge",{staticClass:"w-100 mt-1",attrs:{variant:"light-primary"}},[e._v(" "+e._s(t.module_name)+" ")])],1)})),1):r("b-badge",{staticClass:"w-100 mt-1 p-1",attrs:{variant:"light-primary"}},[e._v(" ALL MODULES ")])],1)],1)],1),r("b-modal",{attrs:{id:"change-password-modal",title:"Change user password",centered:"","no-close-on-backdrop":"","cancel-variant":"outline-danger"},on:{ok:function(t){return t.preventDefault(),e.$refs.changePasswordModal.changePassword()}}},[r("change-user-password",{ref:"changePasswordModal",on:{closeModal:function(t){return e.$bvModal.hide("change-password-modal")}}})],1)],1)},_=[],h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("validation-observer",{ref:"form"},[r("b-row",[r("b-col",{attrs:{cols:"12"}},[r("b-form-group",{attrs:{label:"Current Password","label-for":"current-password"}},[r("validation-provider",{attrs:{vid:"current",name:"current",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors,s=t.valid;return[r("b-form-input",{attrs:{id:"current-password",type:"password",placeholder:"Current Password",state:!a[0]&&(!!s||null)},model:{value:e.userData.currentPassword,callback:function(t){e.$set(e.userData,"currentPassword",t)},expression:"userData.currentPassword"}}),r("b-form-invalid-feedback",[e._v(" Current Password "+e._s(a[0])+" ")])]}}])})],1)],1),r("b-col",{attrs:{cols:"12"}},[r("b-form-group",{attrs:{label:"New Password","label-for":"new-password"}},[r("validation-provider",{attrs:{rules:"required|specialpassword|password:@confirm"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors,s=t.valid;return[r("b-form-input",{attrs:{id:"new-password",type:"password",placeholder:"New Password",state:!a[0]&&(!!s||null)},model:{value:e.userData.newPassword,callback:function(t){e.$set(e.userData,"newPassword",t)},expression:"userData.newPassword"}}),r("b-form-invalid-feedback",[e._v(" New Password "+e._s(a[0])+" ")])]}}])})],1)],1),r("b-col",{attrs:{cols:"12"}},[r("b-form-group",{attrs:{label:"Confirm Password","label-for":"confirm-password"}},[r("validation-provider",{attrs:{rules:"required",name:"confirm"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.errors,s=t.valid;return[r("b-form-input",{attrs:{id:"confirm-password",type:"password",placeholder:"Confirm Password",state:!a[0]&&(!!s||null)},model:{value:e.userData.confirmPassword,callback:function(t){e.$set(e.userData,"confirmPassword",t)},expression:"userData.confirmPassword"}}),r("b-form-invalid-feedback",[e._v(" Confirm Password "+e._s(a[0])+" ")])]}}])})],1)],1)],1)],1)],1)},g=[],w=r("8903"),x={data:function(){return{userData:{currentPassword:"",newPassword:"",confirmPassword:""}}},computed:Object(o["a"])({},Object(l["c"])({currentUser:"auth/currentUser"})),methods:{changePassword:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.form.validate();case 2:if(r=t.sent,!r){t.next=27;break}return t.next=6,w["a"].validatePasswordUser({id_user:e.currentUser.user_id,ceo_password:e.userData.currentPassword});case 6:if(a=t.sent,a.data){t.next=11;break}e.$refs.form.setErrors({current:"is incorrect"}),t.next=25;break;case 11:return e.addPreloader(),t.prev=12,t.next=15,w["a"].changePasswordUser({id_user:e.currentUser.user_id,new_password:e.userData.newPassword});case 15:t.sent,e.removePreloader(),e.showSuccessSwal("Password changed successfully"),e.$emit("closeModal"),t.next=25;break;case 21:t.prev=21,t.t0=t["catch"](12),e.removePreloader(),e.showErrorSwal(t.t0);case 25:t.next=28;break;case 27:console.log("error");case 28:case"end":return t.stop()}}),t,null,[[12,21]])})))()}}},y=x,C=Object(f["a"])(y,h,g,!1,null,null,null),P=C.exports,U={props:{userData:{type:Object,required:!0}},components:{ChangeUserPassword:P}},S=U,k=Object(f["a"])(S,v,_,!1,null,null,null),D=k.exports,E=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card",{attrs:{"no-body":""}},[r("b-card-body",[r("b-card-title",[e._v("Session List")]),r("b-card-sub-title",[e._v("Session list according to user")])],1),e.loading?r("b-skeleton-table",{attrs:{rows:4,columns:3,"table-props":{striped:!0}}}):r("b-table",{staticClass:"mb-0",staticStyle:{"max-height":"210px",overflow:"auto"},attrs:{striped:"",responsive:"",items:e.S_USER_SESSIONS,fields:e.arrayColumns},scopedSlots:e._u([{key:"table-busy",fn:function(){return[r("div",{staticClass:"text-center text-primary my-2"},[r("b-spinner",{staticClass:"align-middle mr-1"}),r("strong",[e._v("Loading...")])],1)]},proxy:!0},{key:"cell(start_login)",fn:function(t){return[e._v(" "+e._s(e._f("myGlobal")(t.item.start_login))+" ")]}},{key:"cell(end_login)",fn:function(t){return[e._v(" "+e._s(e._f("myGlobal")(t.item.end_login))+" ")]}}],null,!1,1086234095)}),r("div",{staticClass:"mx-2 mb-2 mt-1"},[r("b-row",[r("b-col",{staticClass:"\n          d-flex\n          align-items-center\n          justify-content-center justify-content-sm-start\n        ",attrs:{cols:"12",sm:"6"}},[r("span",{staticClass:"text-muted"},[e._v(" Showing "+e._s(e.startPage)+" to "+e._s(e.toPage)+" of "+e._s(e.totalData)+" entries ")])]),r("b-col",{staticClass:"\n          d-flex\n          align-items-center\n          justify-content-center justify-content-sm-end\n        ",attrs:{cols:"12",sm:"6"}},[r("b-pagination",{staticClass:"mb-0 mt-1 mt-sm-0",attrs:{"total-rows":e.totalData,"per-page":e.perPage,"first-number":"","last-number":"","prev-class":"prev-item","next-class":"next-item"},scopedSlots:e._u([{key:"prev-text",fn:function(){return[r("feather-icon",{attrs:{icon:"ChevronLeftIcon",size:"18"}})]},proxy:!0},{key:"next-text",fn:function(){return[r("feather-icon",{attrs:{icon:"ChevronRightIcon",size:"18"}})]},proxy:!0}]),model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)],1)],1)},O=[],I={mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getUserSessions();case 2:case"end":return t.stop()}}),t)})))()},data:function(){return{arrayColumns:[{key:"ip",label:"IP",sortable:!0,visible:!0},{key:"start_login",label:"Start Login",sortable:!0,visible:!0},{key:"end_login",label:"End Login",sortable:!0,visible:!0}],totalData:0,perPage:5,currentPage:1,startPage:1,toPage:10,loading:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(l["c"])({currentUser:"auth/currentUser"})),Object(l["e"])({S_USER_SESSIONS:function(e){return e.UserStore.S_USER_SESSIONS}})),methods:Object(o["a"])(Object(o["a"])({},Object(l["b"])({A_GET_USER_SESSIONS:"UserStore/A_GET_USER_SESSIONS"})),{},{getUserSessions:function(){var e=arguments,t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:1,t.loading=!0,r.prev=2,r.next=5,t.A_GET_USER_SESSIONS({id:t.currentUser.user_id,perpage:t.perPage,page:a});case 5:s=r.sent,t.totalData=s.data.total,t.currentPage=s.data.current_page,t.startPage=s.data.from,t.toPage=s.data.to,t.loading=!1,r.next=17;break;case 13:r.prev=13,r.t0=r["catch"](2),t.showErrorSwal(r.t0),t.loading=!1;case 17:case"end":return r.stop()}}),r,null,[[2,13]])})))()}}),watch:{currentPage:function(e){this.getUserSessions(e)}}},j=I,N=Object(f["a"])(j,E,O,!1,null,null,null),A=N.exports,$={components:{UserViewUserInfoCard:p,UserViewAccessCard:D,UserViewSessionListCard:A},data:function(){return{form:{file:"",image:"",remove:!1}}},computed:Object(o["a"])({},Object(l["c"])({currentUser:"auth/currentUser"})),methods:Object(o["a"])(Object(o["a"])({},Object(l["b"])({A_UPDATE_PROFILE:"ProfileStore/A_UPDATE_PROFILE",updateCurrentUserInformation:"auth/updateCurrentUserInformation"})),{},{updateProfile:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.addPreloader(),r={cellphone:e.currentUser.cellphone,country:e.currentUser.country,date_of_birth:e.currentUser.date_of_birth,email:e.currentUser.email,extension:e.currentUser.extension,first_name:e.currentUser.first_name,id:e.currentUser.user_id,last_name:e.currentUser.last_name,module:"",password:"",phone:e.currentUser.phone,status:e.currentUser.status,superid:""},""!=e.form.file&&""!=e.form.image&&(r=Object.assign(r,e.form)),t.next=6,e.A_UPDATE_PROFILE(r);case 6:a=t.sent,200==a.status&&(e.showGenericToast({text:"User edit in successfully"}),e.updateCurrentUserInformation({data:e.currentUser,avatar:""!=e.form.file?e.form.file:e.currentUser.avatar}),e.form.remove=!1),e.removePreloader(),t.next=15;break;case 11:throw t.prev=11,t.t0=t["catch"](0),e.removePreloader(),t.t0;case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))()}}),created:function(){this.$store.commit("appConfig/UPDATE_NAV_MENU_HIDDEN",!0),this.$store.commit("appConfig/UPDATE_NAVBAR_CONFIG",{type:"sticky"})},destroyed:function(){this.$store.commit("appConfig/UPDATE_NAVBAR_CONFIG",{type:"sticky"}),this.$store.commit("appConfig/UPDATE_NAV_MENU_HIDDEN",this.menuHidden),this.$store.commit("appConfig/UPDATE_LAYOUT_TYPE","vertical")}},R=$,X=Object(f["a"])(R,a,s,!1,null,null,null);t["default"]=X.exports},a300:function(e,t,r){"use strict";r("2d14")}}]);
//# sourceMappingURL=chunk-58e8bc78.333d9c32.js.map