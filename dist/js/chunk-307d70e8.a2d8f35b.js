(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-307d70e8"],{"54e1":function(t,e,a){"use strict";a("a73e")},a29f:function(t,e,a){"use strict";a("d3b7");var n=a("7f80");e["a"]={namespaced:!0,state:{},getters:{},mutations:{},actions:{fetchInvoices:function(t,e){return new Promise((function(t,a){n["a"].get("/apps/invoice/invoices",{params:e}).then((function(e){return t(e)})).catch((function(t){return a(t)}))}))},fetchInvoice:function(t,e){var a=e.id;return new Promise((function(t,e){n["a"].get("/apps/invoice/invoices/".concat(a)).then((function(e){return t(e)})).catch((function(t){return e(t)}))}))},fetchClients:function(){return new Promise((function(t,e){n["a"].get("/apps/invoice/clients").then((function(e){return t(e)})).catch((function(t){return e(t)}))}))}}}},a35f:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-card",{attrs:{"no-body":""}},[a("div",{staticClass:"m-2"},[a("b-row",[a("b-col",{staticClass:"d-flex align-items-center justify-content-start mb-1 mb-md-0",attrs:{cols:"12",md:"6"}},[a("label",[t._v("Entries")]),a("v-select",{staticClass:"per-page-selector d-inline-block ml-50 mr-1",attrs:{dir:t.$store.state.appConfig.isRTL?"rtl":"ltr",options:t.perPageOptions,clearable:!1},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}}),a("b-button",{attrs:{variant:"primary",to:{name:"apps-invoice-add"}}},[t._v(" Add Record ")])],1),a("b-col",{attrs:{cols:"12",md:"6"}},[a("div",{staticClass:"d-flex align-items-center justify-content-end"},[a("b-form-input",{staticClass:"d-inline-block mr-1",attrs:{placeholder:"Search..."},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}}),a("v-select",{staticClass:"invoice-filter-select",attrs:{dir:t.$store.state.appConfig.isRTL?"rtl":"ltr",options:t.statusOptions,placeholder:"Select Status"},scopedSlots:t._u([{key:"selected-option",fn:function(e){var n=e.label;return[a("span",{staticClass:"text-truncate overflow-hidden"},[t._v(" "+t._s(n)+" ")])]}}]),model:{value:t.statusFilter,callback:function(e){t.statusFilter=e},expression:"statusFilter"}})],1)])],1)],1),a("b-table",{ref:"refInvoiceListTable",staticClass:"position-relative",attrs:{items:t.fetchInvoices,responsive:"",fields:t.tableColumns,"primary-key":"id","sort-by":t.sortBy,"show-empty":"","empty-text":"No matching records found","sort-desc":t.isSortDirDesc},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.isSortDirDesc=e},"update:sort-desc":function(e){t.isSortDirDesc=e}},scopedSlots:t._u([{key:"head(invoiceStatus)",fn:function(){return[a("feather-icon",{staticClass:"mx-auto",attrs:{icon:"TrendingUpIcon"}})]},proxy:!0},{key:"cell(id)",fn:function(e){return[a("b-link",{staticClass:"font-weight-bold",attrs:{to:{name:"apps-invoice-preview",params:{id:e.item.id}}}},[t._v(" #"+t._s(e.value)+" ")])]}},{key:"cell(invoiceStatus)",fn:function(e){return[a("b-avatar",{attrs:{id:"invoice-row-"+e.item.id,size:"32",variant:"light-"+t.resolveInvoiceStatusVariantAndIcon(e.item.invoiceStatus).variant}},[a("feather-icon",{attrs:{icon:t.resolveInvoiceStatusVariantAndIcon(e.item.invoiceStatus).icon}})],1),a("b-tooltip",{attrs:{target:"invoice-row-"+e.item.id,placement:"top"}},[a("p",{staticClass:"mb-0"},[t._v(" "+t._s(e.item.invoiceStatus)+" ")]),a("p",{staticClass:"mb-0"},[t._v(" Balance: "+t._s(e.item.balance)+" ")]),a("p",{staticClass:"mb-0"},[t._v(" Due Date: "+t._s(e.item.dueDate)+" ")])])]}},{key:"cell(client)",fn:function(e){return[a("b-media",{attrs:{"vertical-align":"center"},scopedSlots:t._u([{key:"aside",fn:function(){return[a("b-avatar",{attrs:{size:"32",src:e.item.avatar,text:t.avatarText(e.item.client.name),variant:"light-"+t.resolveClientAvatarVariant(e.item.invoiceStatus)}})]},proxy:!0}],null,!0)},[a("span",{staticClass:"font-weight-bold d-block text-nowrap"},[t._v(" "+t._s(e.item.client.name)+" ")]),a("small",{staticClass:"text-muted"},[t._v(t._s(e.item.client.companyEmail))])])]}},{key:"cell(issuedDate)",fn:function(e){return[a("span",{staticClass:"text-nowrap"},[t._v(" "+t._s(e.value)+" ")])]}},{key:"cell(balance)",fn:function(e){return[0===e.value?[a("b-badge",{attrs:{pill:"",variant:"light-success"}},[t._v(" Paid ")])]:[t._v(" "+t._s(e.value)+" ")]]}},{key:"cell(actions)",fn:function(e){return[a("div",{staticClass:"text-nowrap"},[a("feather-icon",{staticClass:"cursor-pointer",attrs:{id:"invoice-row-"+e.item.id+"-send-icon",icon:"SendIcon",size:"16"}}),a("b-tooltip",{staticClass:"cursor-pointer",attrs:{title:"Send Invoice",target:"invoice-row-"+e.item.id+"-send-icon"}}),a("feather-icon",{staticClass:"mx-1",attrs:{id:"invoice-row-"+e.item.id+"-preview-icon",icon:"EyeIcon",size:"16"},on:{click:function(a){return t.$router.push({name:"apps-invoice-preview",params:{id:e.item.id}})}}}),a("b-tooltip",{attrs:{title:"Preview Invoice",target:"invoice-row-"+e.item.id+"-preview-icon"}}),a("b-dropdown",{attrs:{variant:"link","toggle-class":"p-0","no-caret":"",right:t.$store.state.appConfig.isRTL},scopedSlots:t._u([{key:"button-content",fn:function(){return[a("feather-icon",{staticClass:"align-middle text-body",attrs:{icon:"MoreVerticalIcon",size:"16"}})]},proxy:!0}],null,!0)},[a("b-dropdown-item",[a("feather-icon",{attrs:{icon:"DownloadIcon"}}),a("span",{staticClass:"align-middle ml-50"},[t._v("Download")])],1),a("b-dropdown-item",{attrs:{to:{name:"apps-invoice-edit",params:{id:e.item.id}}}},[a("feather-icon",{attrs:{icon:"EditIcon"}}),a("span",{staticClass:"align-middle ml-50"},[t._v("Edit")])],1),a("b-dropdown-item",[a("feather-icon",{attrs:{icon:"TrashIcon"}}),a("span",{staticClass:"align-middle ml-50"},[t._v("Delete")])],1),a("b-dropdown-item",[a("feather-icon",{attrs:{icon:"CopyIcon"}}),a("span",{staticClass:"align-middle ml-50"},[t._v("Duplicate")])],1)],1)],1)]}}])}),a("div",{staticClass:"mx-2 mb-2"},[a("b-row",[a("b-col",{staticClass:"d-flex align-items-center justify-content-center justify-content-sm-start",attrs:{cols:"12",sm:"6"}},[a("span",{staticClass:"text-muted"},[t._v("Showing "+t._s(t.dataMeta.from)+" to "+t._s(t.dataMeta.to)+" of "+t._s(t.dataMeta.of)+" entries")])]),a("b-col",{staticClass:"d-flex align-items-center justify-content-center justify-content-sm-end",attrs:{cols:"12",sm:"6"}},[a("b-pagination",{staticClass:"mb-0 mt-1 mt-sm-0",attrs:{"total-rows":t.totalInvoices,"per-page":t.perPage,"first-number":"","last-number":"","prev-class":"prev-item","next-class":"next-item"},scopedSlots:t._u([{key:"prev-text",fn:function(){return[a("feather-icon",{attrs:{icon:"ChevronLeftIcon",size:"18"}})]},proxy:!0},{key:"next-text",fn:function(){return[a("feather-icon",{attrs:{icon:"ChevronRightIcon",size:"18"}})]},proxy:!0}]),model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1)],1)},i=[],s=a("205f"),r=a("a15b"),o=a("b28b"),c=a("4797"),l=a("1947"),u=a("29a1"),d=a("34b6"),v=a("e8a3"),f=a("aa59"),p=a("e98b"),m=a("dd9a"),b=a("9eaa"),g=a("26d2"),h=a("b4ae"),y=a("0e20"),C=a("4a7a"),w=a.n(C),I=a("ed09"),D=a("4360"),P=a("04b0"),_=a("223c");function k(){var t=Object(P["useToast"])(),e=Object(I["ref"])(null),a=[{key:"id",label:"#",sortable:!0},{key:"invoiceStatus",sortable:!0},{key:"client",sortable:!0},{key:"total",sortable:!0,formatter:function(t){return"$".concat(t)}},{key:"issuedDate",sortable:!0},{key:"balance",sortable:!0},{key:"actions"}],n=Object(I["ref"])(10),i=Object(I["ref"])(0),s=Object(I["ref"])(1),r=[10,25,50,100],o=Object(I["ref"])(""),c=Object(I["ref"])("id"),l=Object(I["ref"])(!0),u=Object(I["ref"])(null),d=Object(I["computed"])((function(){var t=e.value?e.value.localItems.length:0;return{from:n.value*(s.value-1)+(t?1:0),to:n.value*(s.value-1)+t,of:i.value}})),v=function(){e.value.refresh()};Object(I["watch"])([s,n,o,u],(function(){v()}));var f=function(e,a){D["a"].dispatch("app-invoice/fetchInvoices",{q:o.value,perPage:n.value,page:s.value,sortBy:c.value,sortDesc:l.value,status:u.value}).then((function(t){var e=t.data,n=e.invoices,s=e.total;a(n),i.value=s})).catch((function(){t({component:_["a"],props:{title:"Error fetching invoices' list",icon:"AlertTriangleIcon",variant:"danger"}})}))},p=function(t){return"Partial Payment"===t?{variant:"warning",icon:"PieChartIcon"}:"Paid"===t?{variant:"success",icon:"CheckCircleIcon"}:"Downloaded"===t?{variant:"info",icon:"ArrowDownCircleIcon"}:"Draft"===t?{variant:"primary",icon:"SaveIcon"}:"Sent"===t?{variant:"secondary",icon:"SendIcon"}:"Past Due"===t?{variant:"danger",icon:"InfoIcon"}:{variant:"secondary",icon:"XIcon"}},m=function(t){return"Partial Payment"===t?"primary":"Paid"===t?"danger":"Downloaded"===t?"secondary":"Draft"===t?"warning":"Sent"===t?"info":"Past Due"===t?"success":"primary"};return{fetchInvoices:f,tableColumns:a,perPage:n,currentPage:s,totalInvoices:i,dataMeta:d,perPageOptions:r,searchQuery:o,sortBy:c,isSortDirDesc:l,refInvoiceListTable:e,statusFilter:u,resolveInvoiceStatusVariantAndIcon:p,resolveClientAvatarVariant:m,refetchData:v}}var S=a("a29f"),x={components:{BCard:s["a"],BRow:r["a"],BCol:o["a"],BFormInput:c["a"],BButton:l["a"],BTable:u["a"],BMedia:d["a"],BAvatar:v["a"],BLink:f["a"],BBadge:p["a"],BDropdown:m["a"],BDropdownItem:b["a"],BPagination:g["a"],BTooltip:h["a"],vSelect:w.a},setup:function(){var t="app-invoice";D["a"].hasModule(t)||D["a"].registerModule(t,S["a"]),Object(I["onUnmounted"])((function(){D["a"].hasModule(t)&&D["a"].unregisterModule(t)}));var e=["Downloaded","Draft","Paid","Partial Payment","Past Due"],a=k(),n=a.fetchInvoices,i=a.tableColumns,s=a.perPage,r=a.currentPage,o=a.totalInvoices,c=a.dataMeta,l=a.perPageOptions,u=a.searchQuery,d=a.sortBy,v=a.isSortDirDesc,f=a.refInvoiceListTable,p=a.statusFilter,m=a.refetchData,b=a.resolveInvoiceStatusVariantAndIcon,g=a.resolveClientAvatarVariant;return{fetchInvoices:n,tableColumns:i,perPage:s,currentPage:r,totalInvoices:o,dataMeta:c,perPageOptions:l,searchQuery:u,sortBy:d,isSortDirDesc:v,refInvoiceListTable:f,statusFilter:p,refetchData:m,statusOptions:e,avatarText:y["a"],resolveInvoiceStatusVariantAndIcon:b,resolveClientAvatarVariant:g}}},B=x,j=(a("d1a3"),a("54e1"),a("2877")),O=Object(j["a"])(B,n,i,!1,null,"9a6e255c",null);e["default"]=O.exports},a73e:function(t,e,a){},c4fe:function(t,e,a){},d1a3:function(t,e,a){"use strict";a("c4fe")}}]);
//# sourceMappingURL=chunk-307d70e8.a2d8f35b.js.map