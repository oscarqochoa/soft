(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42c46290"],{"34ec":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-row",[n("b-col",{class:[t.colsHeader,"mb-1"],attrs:{lg:""}},[n("b-input-group",[n("b-input-group-prepend",{staticClass:"w-30"},[n("b-input-group-text",{staticClass:"font-weight-bolder w-100 justify-content-center"},[n("span",[t._v("USER")])])],1),n("b-form-input",{staticClass:"text-center",attrs:{type:"text",disabled:""},model:{value:t.info.user_name,callback:function(e){t.$set(t.info,"user_name",e)},expression:"info.user_name"}})],1)],1),t.isDetails?n("b-col",{class:[t.colsHeader,"mb-1"],attrs:{lg:""}},[n("b-input-group",[n("b-input-group-prepend",{staticClass:"w-30"},[n("b-input-group-text",{staticClass:"font-weight-bolder w-100 justify-content-center"},[n("span",[t._v("MODULE")])])],1),n("b-form-input",{staticClass:"text-center",attrs:{type:"text",disabled:""},model:{value:t.info.module_name,callback:function(e){t.$set(t.info,"module_name",e)},expression:"info.module_name"}})],1)],1):t._e(),t.isPayment?n("b-col",{class:[t.colsHeader,"mb-1"],attrs:{lg:""}},[n("b-input-group",[n("b-input-group-prepend",{staticClass:"w-30"},[n("b-input-group-text",{staticClass:"font-weight-bolder w-100 justify-content-center"},[n("span",[t._v("AMOUNT")])])],1),n("b-form-input",{staticClass:"text-center",attrs:{type:"text",disabled:""},model:{value:t.amountToShow,callback:function(e){t.amountToShow=e},expression:"amountToShow"}})],1)],1):t._e(),n("b-col",{class:[t.colsHeader,"mb-1"],attrs:{lg:""}},[n("b-input-group",[n("b-input-group-prepend",{staticClass:"w-30"},[n("b-input-group-text",{staticClass:"font-weight-bolder w-100 justify-content-center"},[n("span",[t._v("YEAR")])])],1),n("b-form-input",{staticClass:"text-center",attrs:{type:"text",disabled:""},model:{value:t.info.year,callback:function(e){t.$set(t.info,"year",e)},expression:"info.year"}})],1)],1),n("b-col",{class:[t.colsHeader,"mb-1"],attrs:{lg:""}},[n("b-input-group",[n("b-input-group-prepend",{staticClass:"w-30"},[n("b-input-group-text",{staticClass:"font-weight-bolder w-100 justify-content-center"},[n("span",[t._v("MONTH")])])],1),n("b-form-input",{staticClass:"text-center",attrs:{type:"text",disabled:""},model:{value:t.info.monthName,callback:function(e){t.$set(t.info,"monthName",e)},expression:"info.monthName"}})],1)],1)],1)},s=[],i={name:"ModalHeader",props:{info:{type:Object,required:!0}},computed:{isDetails:function(){return"details"===this.info.type},isPayment:function(){return"payment"===this.info.type},colsHeader:function(){return this.isDetails?"col-lg-3":"col-lg-6"},amountToShow:function(){return"crm"==this.info.tab?this.info.amountToPay:this.info.amount}}},o=i,r=(n("ebb0"),n("2877")),l=Object(r["a"])(o,a,s,!1,null,"736b3dab",null);e["a"]=l.exports},"3de9":function(t,e,n){"use strict";n("5b2e")},5177:function(t,e,n){},"5b2e":function(t,e,n){},"68d7":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-overlay",{attrs:{show:t.showOverlay,rounded:"sm",variant:t.variantOverlay},scopedSlots:t._u([{key:"overlay",fn:function(){return[n("div",{staticClass:"text-center"},[n("b-icon",{attrs:{icon:"stopwatch","font-scale":"4",animation:"cylon",variant:"primary"}}),n("p",{staticClass:"text-primary font-weight-bold h4",attrs:{id:"cancel-label"}},[t._v("Please wait...")])],1)]},proxy:!0}])},[t._t("content")],2)},s=[],i=n("5530"),o=n("2f62"),r={name:"OverlayWait",props:{showOverlay:{type:Boolean,default:!1}},methods:{},computed:Object(i["a"])(Object(i["a"])({},Object(o["c"])({skin:"appConfig/skin"})),{},{variantOverlay:function(){return"dark"===this.skin?"dark":"light"}})},l=r,c=n("2877"),u=Object(c["a"])(l,a,s,!1,null,null,null);e["a"]=u.exports},"7d9a":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{attrs:{"title-class":"h2",size:"lg",title:"COMMISSION PAYMENT","modal-class":"modal-primary","footer-class":t.showEdit||t.showAnull?"justify-content-between":"",centered:""},on:{hidden:function(e){return t.hideModal(!1,null)}},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[t.showEdit||t.showAnull?n("div",[n("label",{staticClass:"font-weight-bolder"},[t._v(t._s(t.anullApprove)+" Â ")]),n("span",[t._v(t._s(t.anullApproveName))]),2==t.info.paid_state?n("span",[t._v("("+t._s(t._f("myGlobal")(t.payment.anullDate))+")")]):t._e()]):t._e(),n("div",[n("b-button",{attrs:{size:"sm",variant:"gradient-success"},on:{click:function(e){return t.approveCommissions()}}},[t._v(t._s(t.saveUpdate))]),t.showEdit?n("b-button",{attrs:{size:"sm",variant:"gradient-info"},on:{click:function(e){return t.editPayment()}}},[t._v("EDIT")]):t._e(),n("b-button",{attrs:{size:"sm",variant:"gradient-danger ml-1"},on:{click:function(e){return t.anullPayment()}}},[t._v("ANULL")])],1)]},proxy:!0}]),model:{value:t.modalUp,callback:function(e){t.modalUp=e},expression:"modalUp"}},[n("b-card-text",[n("ModalHeader",{attrs:{info:t.info}}),n("ValidationObserver",{ref:"form"},[n("PaymentBody",{attrs:{info:t.info,"disabled-payment":t.disabledPayment,payment:t.payment}})],1)],1)],1)],1)},s=[],i=n("1da1"),o=n("5530"),r=(n("96cf"),n("2f62")),l=n("c1df"),c=n.n(l),u=n("93bb"),m=n("34ec"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-row",[n("b-col",{attrs:{lg:"6"}},[n("b-form-group",{attrs:{label:"Method of Payment:","label-size":"lg","label-class":"font-weight-bolder"}},[n("b-form-radio-group",{attrs:{disabled:t.disabledPayment,stacked:""},model:{value:t.payment.methoPayment,callback:function(e){t.$set(t.payment,"methoPayment",e)},expression:"payment.methoPayment"}},[n("b-form-radio",{attrs:{value:"1"}},[t._v("Check")]),n("b-form-radio",{attrs:{value:"2"}},[t._v("Transfer")])],1)],1)],1),n("b-col",{attrs:{lg:"6"}},[n("b-form-group",{attrs:{label:"Date:","label-size":"lg","label-class":"font-weight-bolder"}},[n("flat-pickr",{staticClass:"form-control",attrs:{config:{dateFormat:"m/d/Y"},disabled:t.disabledPayment},model:{value:t.payment.datePayment,callback:function(e){t.$set(t.payment,"datePayment",e)},expression:"payment.datePayment"}})],1)],1)],1),n("b-row",[n("b-col",{attrs:{lg:"6"}},[n("ValidationProvider",{attrs:{rules:"required",name:"Operation Number"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.valid,s=e.errors;return[n("b-form-group",{attrs:{label:"Operation Number:","label-size":"lg","label-class":"font-weight-bolder"}},[n("b-form-input",{attrs:{type:"number",state:!s[0]&&(!!a||null),placeholder:"Enter The Operation Number",min:"0",pattern:"^[0-9]+",disabled:t.disabledPayment},model:{value:t.payment.numberPayment,callback:function(e){t.$set(t.payment,"numberPayment",e)},expression:"payment.numberPayment"}}),n("b-form-invalid-feedback",[t._v("Operation Number "+t._s(s[0]))])],1)]}}])})],1),n("b-col",{attrs:{lg:"6"}},[n("b-form-group",{attrs:{label:"Observation:","label-size":"lg","label-class":"font-weight-bolder"}},[n("b-form-textarea",{attrs:{placeholder:"Enter The Observation",rows:"1","max-rows":"3",disabled:t.disabledPayment},model:{value:t.payment.observation,callback:function(e){t.$set(t.payment,"observation",e)},expression:"payment.observation"}})],1)],1)],1)],1)},p=[],f=n("c38f"),b=n.n(f),h={name:"PaymentBody",components:{flatPickr:b.a},props:{disabledPayment:{type:Boolean,default:!1},payment:{type:Object,default:function(){return{}}}},data:function(){return{}}},v=h,g=(n("3de9"),n("2877")),_=Object(g["a"])(v,d,p,!1,null,null,null),y=_.exports,w={name:"ModalCommissionsPayment",components:{ModalHeader:m["a"],PaymentBody:y},props:{showModal:{type:Boolean,default:!1},info:{type:Object,default:function(){return{}}}},data:function(){return{modalUp:!1,disabledPayment:!1,isPaid:null,approveBy:null,payment:{methoPayment:2,datePayment:c()().format("MM-DD-YYYY"),numberPayment:null,observation:"",approveName:null,anullName:null,anullDate:null,loading:null}}},created:function(){this.searchCommission()},mounted:function(){this.modalUp=this.showModal,this.isPaid=this.info.paid_state,this.disabledPayment=1==this.info.paid_state||2==this.info.paid_state},computed:Object(o["a"])(Object(o["a"])({},Object(r["c"])({loading:"app/loading",currentUser:"auth/currentUser"})),{},{anullApprove:function(){return 1==this.info.paid_state?"Approved by:   ":2==this.info.paid_state?"Anulled by:   ":void 0},anullApproveName:function(){return 1==this.info.paid_state?this.payment.approveName:2==this.info.paid_state?this.payment.anullName:void 0},amountToShow:function(){return"crm"==this.info.tab?this.info.amountToPay:this.info.amount},isCeo:function(){return 1==this.info.role_id},isSupervisor:function(){return 2==this.info.role_id},isCrm:function(){return 2==this.info.module},isAdm:function(){return 4==this.info.module},isDepartment:function(){return 2!=this.info.module&&4!=this.info.module},saveUpdate:function(){return this.info.paid_state?"UPDATE":"SAVE"},showEdit:function(){return 1==this.isPaid||2==this.isPaid},showAnull:function(){return 3==this.isPaid},showSave:function(){return null==this.isPaid||3==this.isPaid}}),methods:Object(o["a"])(Object(o["a"])({},Object(r["d"])({setLoading:"app/SET_LOADING"})),{},{hideModal:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;this.modalUp=!1,this.$emit("hide-modal",t,e,n,a)},searchCommission:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.info.paid_state){e.next=21;break}return t.setLoading(!0),e.prev=2,n={user_id:t.info.user_id,year:t.info.year,month:t.info.month},e.next=6,u["a"].searchCommissionsApprove(n);case 6:a=e.sent,t.payment.methoPayment=a[0].paid_type,t.payment.observation=a[0].observation,t.payment.datePayment=c()(a[0].payment_date).format("MM-DD-YYYY"),t.payment.numberPayment=a[0].num_operation,t.payment.approveName=a[0].approve_name,t.payment.anullName=a[0].annulled_name,t.payment.anullDate=a[0].annulled_at,t.setLoading(!1),e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](2),t.showErrorSwal(),t.setLoading(!1);case 21:case"end":return e.stop()}}),e,null,[[2,17]])})))()},approveCommissions:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.form.validate();case 2:if(n=e.sent,!n){e.next=22;break}return e.next=6,t.showConfirmSwal("Are you sure?","Are you sure of pay this commission?","warning");case 6:if(a=e.sent,!a.isConfirmed){e.next=22;break}return e.prev=8,t.setLoading(!0),s={user_id:t.info.user_id,year:t.info.year,month:t.info.month,method:t.payment.methoPayment,observation:t.payment.observation,approve_by:t.currentUser.user_id,approve_date:c()(t.payment.datePayment).format("MM/DD/YYYY"),module:t.info.module,num_operation:t.payment.numberPayment,amount_paid:t.amountToShow},e.next=13,u["a"].approveCommissions(s);case 13:e.sent,t.hideModal(!0,1,t.info.user_id,t.info.ps_month),e.next=22;break;case 17:e.prev=17,e.t0=e["catch"](8),t.showErrorSwal(),t.setLoading(!1),t.hideModal(!1,null);case 22:case"end":return e.stop()}}),e,null,[[8,17]])})))()},editPayment:function(){this.disabledPayment=!1,this.isPaid=3},anullPayment:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.showConfirmSwal("Are you sure?","Are you sure of anull this commission?","warning");case 2:if(n=e.sent,!n.isConfirmed){e.next=18;break}return e.prev=4,t.setLoading(!0),a={user_id:t.info.user_id,year:t.info.year,month:t.info.month,method:t.payment.methoPayment,observation:t.payment.observation,num_operation:t.operationNumber,anulled_by:t.currentUser.user_id,module:t.info.module},e.next=9,u["a"].anullComissions(a);case 9:e.sent,t.hideModal(!0,2,t.info.user_id,t.info.ps_month),e.next=18;break;case 13:e.prev=13,e.t0=e["catch"](4),t.showErrorSwal(),t.setLoading(!1),t.hideModal(!1,null);case 18:case"end":return e.stop()}}),e,null,[[4,13]])})))()}}),watch:{}},x=w,C=Object(g["a"])(x,a,s,!1,null,null,null);e["a"]=C.exports},"7e8f":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{attrs:{"title-class":"h2 text-white",size:"xl","modal-class":"modal-primary","ok-only":"",title:"DETAIL OF COMMISSIONS"},on:{hidden:function(e){return t.hideModal()}},model:{value:t.modalUp,callback:function(e){t.modalUp=e},expression:"modalUp"}},[n("b-card-text",[n("ModalHeader",{attrs:{info:t.info}}),t.isCrm?n("DetailsCrm",{attrs:{info:t.info}}):t._e(),t.isAdm?n("DetailsAdm",{attrs:{info:t.info}}):t._e(),t.isDepartment?n("DetailsDepartments",{attrs:{info:t.info}}):t._e()],1)],1)],1)},s=[],i=n("93bb"),o=n("34ec"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-table",{staticClass:"mt-2",attrs:{items:t.commissionsUser,fields:t.fields,responsive:"","no-border-collapse":"",striped:"","sticky-header":"50vh",busy:t.isBusy},scopedSlots:t._u([{key:"table-busy",fn:function(){return[n("div",{staticClass:"text-center text-primary my-2"},[n("b-spinner",{staticClass:"align-middle"}),n("strong",[t._v("Loading...")])],1)]},proxy:!0},{key:"empty",fn:function(){return[n("div",{staticClass:"text-center text-primary my-2"},[n("strong",[t._v("No commissions found")])])]},proxy:!0},t.isManagement?{key:"cell(account)",fn:function(e){return[n("b-link",[t._v(t._s(e.value))])]}}:null,{key:"cell(account_status)",fn:function(t){return[n("div",{staticClass:"text-center"},[2==t.value?n("b-icon",{staticStyle:{color:"#ffc107"},attrs:{icon:"triangle-fill"}}):n("b-icon",{style:"color:"+(1==t.value?"#00CC00":3==t.value?"#0066FF":"red"),attrs:{icon:"circle-fill"}})],1)]}},{key:"cell(created_at)",fn:function(e){return[n("span",[t._v(t._s(t._f("myGlobal")(e.value)))])]}},{key:"cell(approve_date)",fn:function(e){return[n("span",[t._v(t._s(t._f("myGlobal")(e.value)))])]}}],null,!0)}),n("b-row",[t.isCeo?t._e():[n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("SUM:")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(this.total_amount))])])],t.isCeo||t.isSupervisor?t._e():[n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("DISCOUNT:")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(this.discount))])])],t.isSupervisor?[n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("20% OF COMMISSIONS")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(this.total_department))])]),n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("10% OF COMMISSIONS")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(this.total_commission))])]),n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("10% OF PROGRAMS")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(this.total_programs))])])]:t._e(),t.isCeo||t.isSupervisor?t._e():[t.total_supervisor_program>0?[n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("10% OF CRM:")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(this.total_supervisor_program))])])]:t._e()],n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("TOTAL GENERATED:")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(this.total))])]),t.isSupervisor?t._e():[n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("DISCOUNT FOR PENALTIES:")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(t.discounts_penalties))])])],t.isCeo||t.isSupervisor?t._e():[n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("TOTAL TO PAY:")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(this.total_to_pay))])])]],2)],1)},l=[],c=n("1da1"),u=n("5530"),m=(n("96cf"),n("b680"),n("4de4"),n("d3b7"),n("2f62")),d={name:"DetailsCrm",props:{info:{type:Object,default:function(){return{}}}},data:function(){return{commissionsUser:[],fields:[],isBusy:!0,total_amount:"",discount:"",total:"",total_commission:"",total_department:"",total_programs:"",total_to_pay:"",total_supervisor_program:"",discounts_penalties:null}},created:function(){this.searchCommissions()},mounted:function(){this.modalUp=this.showModal,this.showOverlay=this.showModal},computed:Object(u["a"])(Object(u["a"])({},Object(m["c"])({bigWindow:"app/bigWindow"})),{},{textRightBig:function(){return this.bigWindow?"text-right":"text-center"},textLeftBig:function(){return this.bigWindow?"text-left":"text-center mb-1"},isCeo:function(){return 1==this.info.role_id},isSupervisor:function(){return 2==this.info.role_id},isManagement:function(){return 16==this.info.moduleSession}}),methods:{searchCommissions:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getFields(),e.next=3,i["a"].searchCommissionsUserCrm(t.info);case 3:n=e.sent,n.length>0&&(t.filterCommissions(n),t.total_amount=n[0].total_amount,t.discount=n[0].discount,t.total=n[0].total,t.total_department=n[0].commission_department,t.total_commission=n[0].commission_bond,t.total_programs=n[0].amount_programs,t.total_to_pay=n[0].total_to_pay,t.discounts_penalties=parseFloat(t.total-t.total_to_pay).toFixed(2)),t.ifNotEntries(),t.isBusy=!1;case 7:case"end":return e.stop()}}),e)})))()},ifNotEntries:function(){0==this.commissionsUser.length?(this.total_amount=0,this.discount=0,this.info.amountTotal=parseFloat(this.info.amountTotal).toFixed(2),this.total=this.info.amountTotal,this.total_to_pay=this.info.amountTotal,this.total_supervisor_program=this.info.amountTotal):this.total_supervisor_program=parseFloat(this.info.amountTotal-(this.total_amount-this.discount)).toFixed(2)},redirectToClientDashboard:function(t,e){var n="";switch(t){case 1:n="/bussiness/clients/account/"+e;break;case 2:n="/boostcredit/clients/account/"+e;break;case 3:n="/creditexperts/clients/account/"+e;break;case 4:n="/debtsolution/clients/account/"+e;break;case 5:n="/taxresearch/clients/account/"+e;break;case 7:n="/specialists/clients/account/"+e;break;case 8:n="/bookeeping/clients/account/"+e;break;case 9:n="/ti/clients/account/"+e;break}return n},getFields:function(){this.fields=[{key:"lead",label:"Client"},{key:"account",label:"Account"},{key:"account_status",label:"Status"},{key:"value",label:"Program"},{key:"type",label:"Type"},{key:"commission",label:"Amount"},{key:"percentage_pay",label:"Percentage to pay"},{key:"approve_date",label:"Approved Date"},{key:"created_at",label:"Created Date"}]},filterCommissions:function(t){var e=this;this.commissionsUser=t.filter((function(t){return t.user_id==e.info.user}))}},watch:{}},p=d,f=n("2877"),b=Object(f["a"])(p,r,l,!1,null,null,null),h=b.exports,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-table",{staticClass:"mt-2",attrs:{items:t.commissionsUser,fields:t.fields,responsive:"",striped:"","no-border-collapse":"","sticky-header":"50vh",busy:t.isBusy},scopedSlots:t._u([{key:"table-busy",fn:function(){return[n("div",{staticClass:"text-center text-primary my-2"},[n("b-spinner",{staticClass:"align-middle"}),n("strong",[t._v("Loading...")])],1)]},proxy:!0},{key:"cell(request_from_id)",fn:function(e){return[n("span",[t._v(t._s(2==e.value||15==e.value?"Lead":"Client"))])]}},{key:"cell(created_at)",fn:function(e){return[n("span",[t._v(t._s(t._f("myGlobal")(e.value)))])]}},{key:"cell(request_date)",fn:function(e){return[n("span",[t._v(t._s(t._f("myGlobal")(e.value)))])]}}])}),n("b-row",[t.isSupervisor||t.isAdministrator?[n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("SUM:")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(this.total_amount))])])]:t._e(),t.isAdministrator?[n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("DISCOUNT:")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(t.discount))])])]:t._e(),t.isSupervisor?[n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("20% OF COMMISSIONS")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(t.total_department))])])]:t._e(),n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("TOTAL:")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(t.total))])])],2)],1)},g=[],_={name:"DetailsAdm",props:{info:{type:Object,default:function(){return{}}}},data:function(){return{modalUp:!1,showOverlay:!1,commissionsUser:[],fields:[],isBusy:!0,total_amount:"",discount:"",total:"",total_commission:"",total_department:"",total_programs:""}},created:function(){this.searchCommissions()},mounted:function(){},computed:Object(u["a"])(Object(u["a"])({},Object(m["c"])({bigWindow:"app/bigWindow"})),{},{textRightBig:function(){return this.bigWindow?"text-right":"text-center"},textLeftBig:function(){return this.bigWindow?"text-left":"text-center mb-1"},isSupervisor:function(){return 2==this.info.role_id},isAdministrator:function(){return 6==this.info.role_id}}),methods:{searchCommissions:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getFields(),e.next=3,i["a"].searchCommissionsUserAdm(t.info);case 3:n=e.sent,n.length>0&&(t.filterCommissions(n),t.total_amount=n[0].total_amount,t.discount=n[0].discount,t.total=n[0].total,t.total_department=n[0].commission_department,t.total_commission=n[0].commission_bond,t.total_programs=n[0].amount_programs),t.isBusy=!1;case 6:case"end":return e.stop()}}),e)})))()},getFields:function(){this.fields=[{key:"lead",label:"Client"},{key:"value",label:"Program"},{key:"type",label:"Type"},{key:"commission",label:"Amount"},{key:"created_at",label:"Created Date"},{key:"request_from",label:"Request From"},{key:"request_from_id",label:"Origin"},{key:"request_by",label:"Request By"},{key:"request_date",label:"Request Date"}]},filterCommissions:function(t){var e=this;this.commissionsUser=t.filter((function(t){return t.user_id==e.info.user}))}},watch:{}},y=_,w=Object(f["a"])(y,v,g,!1,null,null,null),x=w.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-table",{staticClass:"mt-2",attrs:{items:t.commissionsUser,fields:t.fields,responsive:"",striped:"","no-border-collapse":"","sticky-header":"50vh",busy:t.isBusy},scopedSlots:t._u([{key:"table-busy",fn:function(){return[n("div",{staticClass:"text-center text-primary my-2"},[n("b-spinner",{staticClass:"align-middle"}),n("strong",[t._v("Loading...")])],1)]},proxy:!0},{key:"cell(approve_date)",fn:function(e){return[n("span",[t._v(t._s(t._f("myGlobal")(e.value)))])]}}])}),n("b-row",[t.isSupervisor||t.isAdvisor||t.isSeller?[n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("SUM:")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(t.total_amount))])])]:t._e(),t.isAdvisor||t.isSeller?[n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("DISCOUNT:")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(t.discount))])])]:t._e(),t.isSupervisor?[n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[t.currentDate>="2021-11-24"?n("div",{staticClass:"font-weight-bolder"},[t._v("20% OF COMMISSIONS")]):n("div",{staticClass:"font-weight-bolder"},[t._v("10% OF COMMISSIONS")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(t.total_department))])])]:t._e(),n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("TOTAL:")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(t.total))])])],2)],1)},k=[],O=n("c1df"),S=n.n(O),B={name:"DetailsDepartments",props:{info:{type:Object,default:function(){return{}}}},data:function(){return{commissionsUser:[],fields:[],isBusy:!0,total_amount:"",discount:"",total:"",total_department:"",currentDate:S()().format("YYYY-MM-DD")}},created:function(){this.searchCommissions()},mounted:function(){},computed:Object(u["a"])(Object(u["a"])({},Object(m["c"])({bigWindow:"app/bigWindow"})),{},{textRightBig:function(){return this.bigWindow?"text-right":"text-center"},textLeftBig:function(){return this.bigWindow?"text-left":"text-center mb-1"},isSupervisor:function(){return 2==this.info.role_id},isAdvisor:function(){return 3==this.info.role_id},isSeller:function(){return 5==this.info.role_id}}),methods:{searchCommissions:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getFields(),e.next=3,i["a"].searchCommissionsUserDepartment(t.info);case 3:n=e.sent,n.length>0&&(t.filterCommissions(n),t.total_amount=n[0].total_amount,t.discount=n[0].discount,t.total_amount=n[0].total_amount,t.discount=n[0].discount,t.total=n[0].total,t.total_department=n[0].commission_department),t.isBusy=!1;case 6:case"end":return e.stop()}}),e)})))()},getFields:function(){this.fields=[{key:"lead",label:"Client"},{key:"value",label:"Program"},{key:"type",label:"Type"},{key:"commission",label:"Amount"},{key:"approve_date",label:"Approved Date"}]},filterCommissions:function(t){var e=this;this.commissionsUser=t.filter((function(t){return t.user_id==e.info.user}))}},watch:{}},P=B,M=Object(f["a"])(P,C,k,!1,null,null,null),R=M.exports,j={name:"ModalCommissionsDetails",components:{ModalHeader:o["a"],DetailsCrm:h,DetailsAdm:x,DetailsDepartments:R},props:{showModal:{type:Boolean,default:!1},info:{type:Object,default:function(){return{}}}},data:function(){return{modalUp:!1}},created:function(){},mounted:function(){this.modalUp=this.showModal},computed:{isCeo:function(){return 1==this.info.role_id},isSupervisor:function(){return 2==this.info.role_id},isCrm:function(){return 2==this.info.module},isAdm:function(){return 4==this.info.module},isDepartment:function(){return 2!=this.info.module&&4!=this.info.module}},methods:{hideModal:function(t){this.modalUp=!1,this.$emit("hide-modal")}},watch:{}},A=j,D=Object(f["a"])(A,a,s,!1,null,null,null);e["a"]=D.exports},"93bb":function(t,e,n){"use strict";var a=n("1da1"),s=n("d4ec"),i=n("bee2"),o=(n("96cf"),n("2777")),r=function(){function t(){Object(s["a"])(this,t)}return Object(i["a"])(t,[{key:"searchCommissions",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o["a"].post("/commissions/get-report-commissions",e);case 3:return n=t.sent,a=n.data,console.log("data",a,e),t.abrupt("return",a);case 9:throw t.prev=9,t.t0=t["catch"](0),t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"searchCommissionsDepartments",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o["a"].post("/commissions/get-report-commissions-department",e);case 3:return n=t.sent,a=n.data,console.log("commissions by departments",a,e),t.abrupt("return",a);case 9:throw t.prev=9,t.t0=t["catch"](0),t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"updatePercentage",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o["a"].post("/commissions/edit-percentage-to-pay-crm",e);case 3:return n=t.sent,a=n.data,t.abrupt("return",a);case 8:throw t.prev=8,t.t0=t["catch"](0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getDepartmentPercentage",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o["a"].post("/commissions/get-percentage-by-department",e);case 3:return n=t.sent,a=n.data,t.abrupt("return",a);case 8:throw t.prev=8,t.t0=t["catch"](0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"searchCommissionsUserCrm",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o["a"].post("/commissions/get-details-of-commissions-crm",e);case 3:return n=t.sent,a=n.data,t.abrupt("return",a);case 8:throw t.prev=8,t.t0=t["catch"](0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"searchCommissionsUserAdm",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o["a"].post("/commissions/get-details-of-commissions-administration",e);case 3:return n=t.sent,a=n.data,t.abrupt("return",a);case 8:throw t.prev=8,t.t0=t["catch"](0),console.log("Something went wrong on Commissions:",t.t0),t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"searchCommissionsUserDepartment",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o["a"].post("/commissions/get-details-of-commissions-departments",e);case 3:return n=t.sent,a=n.data,t.abrupt("return",a);case 8:throw t.prev=8,t.t0=t["catch"](0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"searchCommissionsApprove",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o["a"].post("/commissions/get-approve-commissions",e);case 3:return n=t.sent,a=n.data,t.abrupt("return",a);case 8:throw t.prev=8,t.t0=t["catch"](0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"anullComissions",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o["a"].post("/commissions/anull-commissions",e);case 3:return n=t.sent,a=n.data,t.abrupt("return",a);case 8:throw t.prev=8,t.t0=t["catch"](0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"approveCommissions",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o["a"].post("/commissions/approve-commissions",e);case 3:return n=t.sent,a=n.data,t.abrupt("return",a);case 8:throw t.prev=8,t.t0=t["catch"](0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()}]),t}();e["a"]=new r},"9f49":function(t,e,n){"use strict";n("c5ae")},c5ae:function(t,e,n){},eafc:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-inline-flex"},[n("b-button",{directives:[{name:"show",rawName:"v-show",value:!t.editMode,expression:"!editMode"},{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:"Edit",expression:"'Edit'",modifiers:{hover:!0,bottom:!0}}],staticClass:"btn-icon button-little-size button-margin-l",attrs:{variant:"gradient-warning",title:"'Edit'"},on:{click:function(e){return t.edit()}}},[n("feather-icon",{attrs:{icon:"SettingsIcon"}})],1),n("b-button",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"},{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:"Cancel",expression:"'Cancel'",modifiers:{hover:!0,bottom:!0}}],staticClass:"btn-icon button-little-size button-margin-l",attrs:{variant:"gradient-danger"},on:{click:function(e){return t.cancel()}}},[n("feather-icon",{attrs:{icon:"Trash2Icon"}})],1),n("b-button",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"},{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:"Update",expression:"'Update'",modifiers:{hover:!0,bottom:!0}}],staticClass:"btn-icon button-little-size button-margin-l",attrs:{variant:"gradient-success"},on:{click:function(e){return t.update()}}},[n("feather-icon",{attrs:{icon:"CheckIcon"}})],1)],1)},s=[],i={emits:["edit","cancel","update"],props:{editMode:{type:Boolean,default:!1},data:{type:Object,default:function(){return{messageEdit:"Information",messageUpdate:"Information"}}}},methods:{edit:function(){var t=this;this.$swal({icon:"warning",title:"Are you sure?",text:"Do you want to edit the ".concat(this.data.messageEdit,"?"),showCancelButton:!0,reverseButtons:!0,buttonsStyling:!1,confirmButtonText:"Yes",customClass:{confirmButton:"btn btn-gradient-success  ml-3 ",cancelButton:"btn btn-gradient-danger  "}}).then((function(e){e.value&&t.$emit("edit")}))},cancel:function(){var t=this;this.$swal({icon:"warning",title:"Are you sure?",text:"Changes will be lost",showCancelButton:!0,reverseButtons:!0,buttonsStyling:!1,confirmButtonText:"Yes",customClass:{confirmButton:"btn btn-gradient-success  ml-3 ",cancelButton:"btn btn-gradient-danger  "}}).then((function(e){e.value&&t.$emit("cancel")}))},update:function(){var t=this;this.$swal({icon:"warning",title:"Are you sure?",text:"The  ".concat(this.data.messageUpdate," will be save!"),showCancelButton:!0,reverseButtons:!0,buttonsStyling:!1,confirmButtonText:"Yes",customClass:{confirmButton:"btn btn-gradient-success  ml-3",cancelButton:"btn btn-gradient-danger"}}).then((function(e){e.value&&t.$emit("update")}))}}},o=i,r=(n("9f49"),n("2877")),l=Object(r["a"])(o,a,s,!1,null,"7cf8f449",null);e["a"]=l.exports},ebb0:function(t,e,n){"use strict";n("5177")}}]);
//# sourceMappingURL=chunk-42c46290.e5798d8b.js.map