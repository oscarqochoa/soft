(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d8547a80"],{"2d63":function(t,e,n){"use strict";n("d4fc")},"3de9":function(t,e,n){"use strict";n("5b2e")},5177:function(t,e,n){},"5b2e":function(t,e,n){},"7a8e":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("header-slot"),t.isSupervisorCrm?n("b-tabs",{attrs:{lazy:"",pills:"","nav-class":"mb-0","active-nav-item-class":"bg-primary box-shadow-info"}},[n("b-tab",{attrs:{lazy:"",title:"CRM","title-link-class":[t.bgTabsNavs,"px-3"]}},[n("CommissionsComponent",{attrs:{module:t.$route.meta.module,tab:"crm",tabSupervisorCrm:""}})],1),t.isSupervisorCrm&&!t.isCoordinator?n("b-tab",{attrs:{lazy:"",title:"Departments","title-link-class":[t.bgTabsNavs,"px-3"]}},[n("CommissionsComponent",{attrs:{module:t.$route.meta.module,tab:"supervisorCrm",tabSupervisorCrm:""}})],1):t._e()],1):n("commissions-component",{attrs:{module:t.$route.meta.module,tab:t.$route.meta.tab}})],1)},s=[],r=n("5530"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",{class:t.tabSupervisorCrm?"border-top-primary border-3 box-shadow-3 rounded-bottom border-table-radius pb-1":"pb-2",attrs:{"no-body":""}},[n("CommissionsHeader",{class:[t.isSeller?"mt-2 ml-1 mr-1":""],attrs:{tab:t.tab,isManagement:t.isManagement},on:{search:function(e){return t.searchCommissions(!0)},"update-percentage":t.updatePercentageDepartment}}),n("div",{class:["mt-1",t.isSeller?"margin-is-seller":""]},[t.commissions?n("b-table-simple",{attrs:{responsive:"","sticky-header":"74vh","no-border-collapse":"",hover:"",bordered:""}},[n("b-thead",[n("b-tr",{staticClass:"width-th"},[n("b-th",{staticStyle:{width:"100px !important"}},[t._v("User")]),t.isCrm||t.isDepartment?n("b-th"):t._e(),t.halfYear?[n("b-th",[t._v(" Jan "),t.isCrm?n("span",{staticClass:"float-right"},[t._v(t._s(t.percentages.january_percentage)+"%")]):t._e()]),n("b-th",[t._v(" Feb "),t.isCrm?n("span",{staticClass:"float-right"},[t._v(t._s(t.percentages.february_percentage)+"%")]):t._e()]),n("b-th",[t._v(" Mar "),t.isCrm?n("span",{staticClass:"float-right"},[t._v(t._s(t.percentages.march_percentage)+"%")]):t._e()]),n("b-th",[t._v(" Apr "),t.isCrm?n("span",{staticClass:"float-right"},[t._v(t._s(t.percentages.april_percentage)+"%")]):t._e()]),n("b-th",[t._v(" May "),t.isCrm?n("span",{staticClass:"float-right"},[t._v(t._s(t.percentages.may_percentage)+"%")]):t._e()]),n("b-th",[t._v(" Jun "),t.isCrm?n("span",{staticClass:"float-right"},[t._v(t._s(t.percentages.june_percentage)+"%")]):t._e()])]:[n("b-th",[t._v(" Jul "),t.isCrm?n("span",{staticClass:"float-right"},[t._v(t._s(t.percentages.july_percentage)+"%")]):t._e()]),n("b-th",[t._v(" Aug "),t.isCrm?n("span",{staticClass:"float-right"},[t._v(t._s(t.percentages.august_percentage)+"%")]):t._e()]),n("b-th",[t._v(" Sep "),t.isCrm?n("span",{staticClass:"float-right"},[t._v(t._s(t.percentages.september_percentage)+"%")]):t._e()]),n("b-th",[t._v(" Oct "),t.isCrm?n("span",{staticClass:"float-right"},[t._v(t._s(t.percentages.october_percentage)+"%")]):t._e()]),n("b-th",[t._v(" Nov "),t.isCrm?n("span",{staticClass:"float-right"},[t._v(t._s(t.percentages.november_percentage)+"%")]):t._e()]),n("b-th",[t._v(" Dic "),t.isCrm?n("span",{staticClass:"float-right"},[t._v(t._s(t.percentages.december_percentage)+"%")]):t._e()])]],2)],1),n("b-tbody",t._l(t.commissions,(function(e,a){return n("b-tr",{key:e.user_id},[n("b-td",[n("div",{staticClass:"font-weight-bolder text-dark"},[t._v(" "+t._s(e.user_name)+" ")]),t.isSupervisorCrm?n("div",{staticClass:"color-gray-m fs10"},[t._v(" "+t._s(e.main_name)+" ")]):t._e()]),t.isCrm?n("b-td",[n("div",[n("div",{staticClass:"font-weight-bold"},[t._v("Generated:")]),2!=e.role_id?n("div",{staticClass:"margin-t-pay font-weight-bold"},[t._v(" % to Pay: ")]):t._e(),n("div",{staticClass:"margin-t-pay font-weight-bold"},[t._v("To Pay:")])])]):t._e(),t.isDepartment?n("b-td",[n("div",{staticClass:"font-weight-bold"},[t._v("Add/Change:")]),n("div",{staticClass:"margin-t-pay font-weight-bold"},[t._v("CRM:")]),n("div",{staticClass:"margin-t-pay font-weight-bold"},[t._v("Total:")])]):t._e(),t.halfYear?[n("b-td",[n("commissions-monthly",{attrs:{editPercentage:0!=e.edit_jan,info:{ps:e.ps_jan,to_pay:e.jan_to_pay,percentage_pay:e.jan_percentage_pay,month_pay:e.jan,monthUser:"January-"+e.user_name,rol:e.role_id,monthYear:t.year+"-01-01"},halfYear:t.halfYear,tab:t.tab,isManagement:t.isManagement,commissionsDepartments:t.isDepartment?e.commissions:[],month:"jan",year:t.year},on:{max:function(e){return t.maxPercentageUser(e,a,"jan_percentage_pay")},find:function(n){return t.findCommissions(n,"01",e,"January")},pay:function(n){return t.payCommissions(n,"01",e,e.ps_jan,e.jan_to_pay,e.jan,"ps_jan","January")},edit:function(n){return t.editPercentageUser(a,"edit_jan",e)},cancel:function(n){return t.cancelPercentageUser(a,"edit_jan",e)},update:function(n){return t.updatePercentageUser(n,a,"edit_jan","jan_percentage_pay","jan_to_pay","01",e)}}})],1),n("b-td",[n("commissions-monthly",{attrs:{editPercentage:0!=e.edit_feb,info:{ps:e.ps_feb,to_pay:e.feb_to_pay,percentage_pay:e.feb_percentage_pay,month_pay:e.feb,monthUser:"February-"+e.user_name,rol:e.role_id,monthYear:t.year+"-02-01"},halfYear:t.halfYear,tab:t.tab,isManagement:t.isManagement,commissionsDepartments:t.isDepartment?e.commissions:[],month:"feb"},on:{max:function(e){return t.maxPercentageUser(e,a,"feb_percentage_pay")},find:function(n){return t.findCommissions(n,"02",e,"February")},pay:function(n){return t.payCommissions(n,"02",e,e.ps_feb,e.feb_to_pay,e.feb,"ps_feb","February")},edit:function(n){return t.editPercentageUser(a,"edit_feb",e)},cancel:function(n){return t.cancelPercentageUser(a,"edit_feb",e)},update:function(n){return t.updatePercentageUser(n,a,"edit_feb","feb_percentage_pay","feb_to_pay","02",e)}}})],1),n("b-td",[n("commissions-monthly",{attrs:{editPercentage:0!=e.edit_mar,info:{ps:e.ps_mar,to_pay:e.mar_to_pay,percentage_pay:e.mar_percentage_pay,month_pay:e.mar,monthUser:"March-"+e.user_name,rol:e.role_id,monthYear:t.year+"-03-01"},halfYear:t.halfYear,tab:t.tab,isManagement:t.isManagement,commissionsDepartments:t.isDepartment?e.commissions:[],month:"mar"},on:{max:function(e){return t.maxPercentageUser(e,a,"mar_percentage_pay")},find:function(n){return t.findCommissions(n,"03",e,"March")},pay:function(n){return t.payCommissions(n,"03",e,e.ps_mar,e.mar_to_pay,e.mar,"ps_mar","March")},edit:function(n){return t.editPercentageUser(a,"edit_mar",e)},cancel:function(n){return t.cancelPercentageUser(a,"edit_mar",e)},update:function(n){return t.updatePercentageUser(n,a,"edit_mar","mar_percentage_pay","mar_to_pay","03",e)}}})],1),n("b-td",[n("commissions-monthly",{attrs:{editPercentage:0!=e.edit_apr,info:{ps:e.ps_apr,to_pay:e.apr_to_pay,percentage_pay:e.apr_percentage_pay,month_pay:e.apr,monthUser:"April-"+e.user_name,rol:e.role_id,monthYear:t.year+"-04-01"},halfYear:t.halfYear,tab:t.tab,isManagement:t.isManagement,commissionsDepartments:t.isDepartment?e.commissions:[],month:"apr"},on:{max:function(e){return t.maxPercentageUser(e,a,"apr_percentage_pay")},find:function(n){return t.findCommissions(n,"04",e,"April")},pay:function(n){return t.payCommissions(n,"04",e,e.ps_apr,e.apr_to_pay,e.apr,"ps_apr","April")},edit:function(n){return t.editPercentageUser(a,"edit_apr",e)},cancel:function(n){return t.cancelPercentageUser(a,"edit_apr",e)},update:function(n){return t.updatePercentageUser(n,a,"edit_apr","apr_percentage_pay","apr_to_pay","04",e)}}})],1),n("b-td",[n("commissions-monthly",{attrs:{editPercentage:0!=e.edit_may,info:{ps:e.ps_may,to_pay:e.may_to_pay,percentage_pay:e.may_percentage_pay,month_pay:e.may,monthUser:"May-"+e.user_name,rol:e.role_id,monthYear:t.year+"-05-01"},halfYear:t.halfYear,tab:t.tab,isManagement:t.isManagement,commissionsDepartments:t.isDepartment?e.commissions:[],month:"may"},on:{max:function(e){return t.maxPercentageUser(e,a,"may_percentage_pay")},find:function(n){return t.findCommissions(n,"05",e,"May")},pay:function(n){return t.payCommissions(n,"05",e,e.ps_may,e.may_to_pay,e.may,"ps_may","May")},edit:function(n){return t.editPercentageUser(a,"edit_may",e)},cancel:function(n){return t.cancelPercentageUser(a,"edit_may",e)},update:function(n){return t.updatePercentageUser(n,a,"edit_may","may_percentage_pay","may_to_pay","05",e)}}})],1),n("b-td",[n("commissions-monthly",{attrs:{editPercentage:0!=e.edit_jun,info:{ps:e.ps_jun,to_pay:e.jun_to_pay,percentage_pay:e.jun_percentage_pay,month_pay:e.jun,monthUser:"June-"+e.user_name,rol:e.role_id,monthYear:t.year+"-06-01"},halfYear:t.halfYear,tab:t.tab,isManagement:t.isManagement,commissionsDepartments:t.isDepartment?e.commissions:[],month:"jun"},on:{max:function(e){return t.maxPercentageUser(e,a,"jun_percentage_pay")},find:function(n){return t.findCommissions(n,"06",e,"June")},pay:function(n){return t.payCommissions(n,"06",e,e.ps_jun,e.jun_to_pay,e.jun,"ps_jun","June")},edit:function(n){return t.editPercentageUser(a,"edit_jun",e)},cancel:function(n){return t.cancelPercentageUser(a,"edit_jun",e)},update:function(n){return t.updatePercentageUser(n,a,"edit_jun","jun_percentage_pay","jun_to_pay","06",e)}}})],1)]:[n("b-td",[n("commissions-monthly",{attrs:{editPercentage:0!=e.edit_jul,info:{ps:e.ps_jul,to_pay:e.jul_to_pay,percentage_pay:e.jul_percentage_pay,month_pay:e.jul,monthUser:"July-"+e.user_name,rol:e.role_id,monthYear:t.year+"-07-01"},halfYear:t.halfYear,tab:t.tab,isManagement:t.isManagement,commissionsDepartments:t.isDepartment?e.commissions:[],month:"jul"},on:{max:function(e){return t.maxPercentageUser(e,a,"jul_percentage_pay")},find:function(n){return t.findCommissions(n,"07",e,"July")},pay:function(n){return t.payCommissions(n,"07",e,e.ps_jul,e.jul_to_pay,e.jun,"ps_jul","July")},edit:function(n){return t.editPercentageUser(a,"edit_jul",e)},cancel:function(n){return t.cancelPercentageUser(a,"edit_jul",e)},update:function(n){return t.updatePercentageUser(n,a,"edit_jul","jul_percentage_pay","jul_to_pay","07",e)}}})],1),n("b-td",[n("commissions-monthly",{attrs:{editPercentage:0!=e.edit_aug,info:{ps:e.ps_aug,to_pay:e.aug_to_pay,percentage_pay:e.aug_percentage_pay,month_pay:e.aug,monthUser:"August-"+e.user_name,rol:e.role_id,monthYear:t.year+"-08-01"},halfYear:t.halfYear,tab:t.tab,isManagement:t.isManagement,commissionsDepartments:t.isDepartment?e.commissions:[],month:"aug"},on:{max:function(e){return t.maxPercentageUser(e,a,"aug_percentage_pay")},find:function(n){return t.findCommissions(n,"08",e,"August")},pay:function(n){return t.payCommissions(n,"08",e,e.ps_aug,e.aug_to_pay,e.aug,"ps_aug","August")},edit:function(n){return t.editPercentageUser(a,"edit_aug",e)},cancel:function(n){return t.cancelPercentageUser(a,"edit_aug",e)},update:function(n){return t.updatePercentageUser(n,a,"edit_aug","aug_percentage_pay","aug_to_pay","08",e)}}})],1),n("b-td",[n("commissions-monthly",{attrs:{editPercentage:0!=e.edit_sep,info:{ps:e.ps_sep,to_pay:e.sep_to_pay,percentage_pay:e.sep_percentage_pay,month_pay:e.sep,monthUser:"September-"+e.user_name,rol:e.role_id,monthYear:t.year+"-09-01"},halfYear:t.halfYear,tab:t.tab,isManagement:t.isManagement,commissionsDepartments:t.isDepartment?e.commissions:[],month:"sep"},on:{max:function(e){return t.maxPercentageUser(e,a,"sep_percentage_pay")},find:function(n){return t.findCommissions(n,"09",e,"September")},pay:function(n){return t.payCommissions(n,"09",e,e.ps_sep,e.sep_to_pay,e.sep,"ps_sep","September")},edit:function(n){return t.editPercentageUser(a,"edit_sep",e)},cancel:function(n){return t.cancelPercentageUser(a,"edit_sep",e)},update:function(n){return t.updatePercentageUser(n,a,"edit_sep","sep_percentage_pay","sep_to_pay","09",e)}}})],1),n("b-td",[n("commissions-monthly",{attrs:{editPercentage:0!=e.edit_oct,info:{ps:e.ps_oct,to_pay:e.oct_to_pay,percentage_pay:e.oct_percentage_pay,month_pay:e.oct,monthUser:"October-"+e.user_name,rol:e.role_id,monthYear:t.year+"-10-01"},halfYear:t.halfYear,tab:t.tab,isManagement:t.isManagement,commissionsDepartments:t.isDepartment?e.commissions:[],month:"oct"},on:{max:function(e){return t.maxPercentageUser(e,a,"oct_percentage_pay")},find:function(n){return t.findCommissions(n,"10",e,"October")},pay:function(n){return t.payCommissions(n,"10",e,e.ps_oct,e.oct_to_pay,e.oct,"ps_oct","September")},edit:function(n){return t.editPercentageUser(a,"edit_oct",e)},cancel:function(n){return t.cancelPercentageUser(a,"edit_oct",e)},update:function(n){return t.updatePercentageUser(n,a,"edit_oct","oct_percentage_pay","oct_to_pay","10",e)}}})],1),n("b-td",[n("commissions-monthly",{attrs:{editPercentage:0!=e.edit_nov,info:{ps:e.ps_nov,to_pay:e.nov_to_pay,percentage_pay:e.nov_percentage_pay,month_pay:e.nov,monthUser:"November-"+e.user_name,rol:e.role_id,monthYear:t.year+"-11-01"},halfYear:t.halfYear,tab:t.tab,isManagement:t.isManagement,commissionsDepartments:t.isDepartment?e.commissions:[],month:"nov"},on:{max:function(e){return t.maxPercentageUser(e,a,"nov_percentage_pay")},find:function(n){return t.findCommissions(n,"11",e,"November")},pay:function(n){return t.payCommissions(n,"11",e,e.ps_nov,e.nov_to_pay,e.nov,"ps_nov","November")},edit:function(n){return t.editPercentageUser(a,"edit_nov",e)},cancel:function(n){return t.cancelPercentageUser(a,"edit_nov",e)},update:function(n){return t.updatePercentageUser(n,a,"edit_nov","nov_percentage_pay","nov_to_pay","11",e)}}})],1),n("b-td",[n("commissions-monthly",{attrs:{editPercentage:0!=e.edit_dec,info:{ps:e.ps_dec,to_pay:e.dec_to_pay,percentage_pay:e.dec_percentage_pay,month_pay:e.dec,monthUser:"December-"+e.user_name,rol:e.role_id,monthYear:t.year+"-12-01"},halfYear:t.halfYear,tab:t.tab,isManagement:t.isManagement,commissionsDepartments:t.isDepartment?e.commissions:[],month:"dec"},on:{max:function(e){return t.maxPercentageUser(e,a,"dec_percentage_pay")},find:function(n){return t.findCommissions(n,"12",e,"December")},pay:function(n){return t.payCommissions(n,"12",e,e.ps_dec,e.dec_to_pay,e.dec,"ps_dec","December")},edit:function(n){return t.editPercentageUser(a,"edit_dec",e)},cancel:function(n){return t.cancelPercentageUser(a,"edit_dec",e)},update:function(n){return t.updatePercentageUser(n,a,"edit_dec","dec_percentage_pay","dec_to_pay","12",e)}}})],1)]],2)})),1),t.isSupervisor||t.isCeo?n("b-tfoot",[n("b-tr",[n("b-th",{staticClass:"bgLightDark"},[t._v("Total Generated")]),t.isCrm||t.isDepartment?n("b-th",{staticClass:"bgLightDark"}):t._e(),t.halfYear?[n("b-th",{staticClass:"bgLightDark"},["0.00"!=t.t_jan?n("span",{staticClass:"footer-span"},[t._v("$ "+t._s(t.t_jan))]):t._e(),"0.00"==t.t_jan?n("span",{staticClass:"footer-span"},[t._v("-")]):t._e()]),n("b-th",{staticClass:"bgLightDark"},["0.00"!=t.t_feb?n("span",{staticClass:"footer-span"},[t._v("$ "+t._s(t.t_feb))]):t._e(),"0.00"==t.t_feb?n("span",{staticClass:"footer-span"},[t._v("-")]):t._e()]),n("b-th",{staticClass:"bgLightDark"},["0.00"!=t.t_mar?n("span",{staticClass:"footer-span"},[t._v("$ "+t._s(t.t_mar))]):t._e(),"0.00"==t.t_mar?n("span",{staticClass:"footer-span"},[t._v("-")]):t._e()]),n("b-th",{staticClass:"bgLightDark"},["0.00"!=t.t_apr?n("span",{staticClass:"footer-span"},[t._v("$ "+t._s(t.t_apr))]):t._e(),"0.00"==t.t_apr?n("span",{staticClass:"footer-span"},[t._v("-")]):t._e()]),n("b-th",{staticClass:"bgLightDark"},["0.00"!=t.t_may?n("span",{staticClass:"footer-span"},[t._v("$ "+t._s(t.t_may))]):t._e(),"0.00"==t.t_may?n("span",{staticClass:"footer-span"},[t._v("-")]):t._e()]),n("b-th",{staticClass:"bgLightDark"},["0.00"!=t.t_jun?n("span",{staticClass:"footer-span"},[t._v("$ "+t._s(t.t_jun))]):t._e(),"0.00"==t.t_jun?n("span",{staticClass:"footer-span"},[t._v("-")]):t._e()])]:[n("b-th",{staticClass:"bgLightDark"},["0.00"!=t.t_jul?n("span",{staticClass:"footer-span"},[t._v("$ "+t._s(t.t_jul))]):t._e(),"0.00"==t.t_jul?n("span",{staticClass:"footer-span"},[t._v("-")]):t._e()]),n("b-th",{staticClass:"bgLightDark"},["0.00"!=t.t_aug?n("span",{staticClass:"footer-span"},[t._v("$ "+t._s(t.t_aug))]):t._e(),"0.00"==t.t_aug?n("span",{staticClass:"footer-span"},[t._v("-")]):t._e()]),n("b-th",{staticClass:"bgLightDark"},["0.00"!=t.t_sep?n("span",{staticClass:"footer-span"},[t._v("$ "+t._s(t.t_sep))]):t._e(),"0.00"==t.t_sep?n("span",{staticClass:"footer-span"},[t._v("-")]):t._e()]),n("b-th",{staticClass:"bgLightDark"},["0.00"!=t.t_oct?n("span",{staticClass:"footer-span"},[t._v("$ "+t._s(t.t_oct))]):t._e(),"0.00"==t.t_oct?n("span",{staticClass:"footer-span"},[t._v("-")]):t._e()]),n("b-th",{staticClass:"bgLightDark"},["0.00"!=t.t_nov?n("span",{staticClass:"footer-span"},[t._v("$ "+t._s(t.t_nov))]):t._e(),"0.00"==t.t_nov?n("span",{staticClass:"footer-span"},[t._v("-")]):t._e()]),n("b-th",{staticClass:"bgLightDark"},["0.00"!=t.t_dec?n("span",{staticClass:"footer-span"},[t._v("$ "+t._s(t.t_dec))]):t._e(),"0.00"==t.t_dec?n("span",{staticClass:"footer-span"},[t._v("-")]):t._e()])]],2),t.isCrm?n("b-tr",[n("b-th",{staticClass:"bgLightDark"},[t._v("Total To Pay")]),t.isCrm||t.isDepartment?n("b-th",{staticClass:"bgLightDark"}):t._e(),t.halfYear?[n("b-th",{staticClass:"bgLightDark"},["0.00"!=t.t_feb?n("span",{staticClass:"footer-span"},[t._v("$ "+t._s(t.t_jan_pay))]):t._e(),"0.00"==t.t_jan_pay?n("span",{staticClass:"footer-span"},[t._v("-")]):t._e()]),n("b-th",{staticClass:"bgLightDark"},["0.00"!=t.t_feb_pay?n("span",{staticClass:"footer-span"},[t._v("$ "+t._s(t.t_feb_pay))]):t._e(),"0.00"==t.t_feb_pay?n("span",{staticClass:"footer-span"},[t._v("-")]):t._e()]),n("b-th",{staticClass:"bgLightDark"},["0.00"!=t.t_mar_pay?n("span",{staticClass:"footer-span"},[t._v("$ "+t._s(t.t_mar_pay))]):t._e(),"0.00"==t.t_mar_pay?n("span",{staticClass:"footer-span"},[t._v("-")]):t._e()]),n("b-th",{staticClass:"bgLightDark"},["0.00"!=t.t_apr_pay?n("span",{staticClass:"footer-span"},[t._v("$ "+t._s(t.t_apr_pay))]):t._e(),"0.00"==t.t_apr_pay?n("span",{staticClass:"footer-span"},[t._v("-")]):t._e()]),n("b-th",{staticClass:"bgLightDark"},["0.00"!=t.t_may_pay?n("span",{staticClass:"footer-span"},[t._v("$ "+t._s(t.t_may_pay))]):t._e(),"0.00"==t.t_may_pay?n("span",{staticClass:"footer-span"},[t._v("-")]):t._e()]),n("b-th",{staticClass:"bgLightDark"},["0.00"!=t.t_jun_pay?n("span",{staticClass:"footer-span"},[t._v("$ "+t._s(t.t_jun_pay))]):t._e(),"0.00"==t.t_jun_pay?n("span",{staticClass:"footer-span"},[t._v("-")]):t._e()])]:[n("b-th",{staticClass:"bgLightDark"},["0.00"!=t.t_jul_pay?n("span",{staticClass:"footer-span"},[t._v("$ "+t._s(t.t_jul_pay))]):t._e(),"0.00"==t.t_jul_pay?n("span",{staticClass:"footer-span"},[t._v("-")]):t._e()]),n("b-th",{staticClass:"bgLightDark"},["0.00"!=t.t_aug_pay?n("span",{staticClass:"footer-span"},[t._v("$ "+t._s(t.t_aug_pay))]):t._e(),"0.00"==t.t_aug_pay?n("span",{staticClass:"footer-span"},[t._v("-")]):t._e()]),n("b-th",{staticClass:"bgLightDark"},["0.00"!=t.t_sep_pay?n("span",{staticClass:"footer-span"},[t._v("$ "+t._s(t.t_sep_pay))]):t._e(),"0.00"==t.t_sep_pay?n("span",{staticClass:"footer-span"},[t._v("-")]):t._e()]),n("b-th",{staticClass:"bgLightDark"},["0.00"!=t.t_oct_pay?n("span",{staticClass:"footer-span"},[t._v("$ "+t._s(t.t_oct_pay))]):t._e(),"0.00"==t.t_oct_pay?n("span",{staticClass:"footer-span"},[t._v("-")]):t._e()]),n("b-th",{staticClass:"bgLightDark"},["0.00"!=t.t_nov_pay?n("span",{staticClass:"footer-span"},[t._v("$ "+t._s(t.t_nov_pay))]):t._e(),"0.00"==t.t_nov_pay?n("span",{staticClass:"footer-span"},[t._v("-")]):t._e()]),n("b-th",{staticClass:"bgLightDark"},["0.00"!=t.t_dec_pay?n("span",{staticClass:"footer-span"},[t._v("$ "+t._s(t.t_dec_pay))]):t._e(),"0.00"==t.t_dec_pay?n("span",{staticClass:"footer-span"},[t._v("-")]):t._e()])]],2):t._e()],1):t._e()],1):n("div",{staticClass:"text-center text-primary my-4"},[n("b-spinner",{staticClass:"align-middle mr-1"}),n("strong",[t._v("Loading ...")])],1)],1),t.modalDetails?n("ModalCommissionsDetails",{attrs:{showModal:t.modalDetails,info:t.infoDetails},on:{"hide-modal":t.hideModalDetails}}):t._e(),t.modalPayment?n("ModalCommissionsPayment",{attrs:{showModal:t.modalPayment,info:t.infoPayment},on:{"hide-modal":t.hideModalPayment}}):t._e()],1)},i=[],c=n("1da1"),u=(n("96cf"),n("a9e3"),n("d3b7"),n("159b"),n("b680"),n("caad"),n("4de4"),n("2f62")),l=n("e009"),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-inline-flex"},[n("b-button",{directives:[{name:"show",rawName:"v-show",value:!t.editMode,expression:"!editMode"},{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:"Edit",expression:"'Edit'",modifiers:{hover:!0,bottom:!0}}],staticClass:"btn-icon button-little-size button-margin-l",attrs:{variant:"gradient-warning",title:"'Edit'"},on:{click:function(e){return t.edit()}}},[n("feather-icon",{attrs:{icon:"SettingsIcon"}})],1),n("b-button",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"},{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:"Cancel",expression:"'Cancel'",modifiers:{hover:!0,bottom:!0}}],staticClass:"btn-icon button-little-size button-margin-l",attrs:{variant:"gradient-danger"},on:{click:function(e){return t.cancel()}}},[n("feather-icon",{attrs:{icon:"Trash2Icon"}})],1),n("b-button",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"},{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:"Update",expression:"'Update'",modifiers:{hover:!0,bottom:!0}}],staticClass:"btn-icon button-little-size button-margin-l",attrs:{variant:"gradient-success"},on:{click:function(e){return t.update()}}},[n("feather-icon",{attrs:{icon:"CheckIcon"}})],1)],1)},p=[],d={emits:["edit","cancel","update"],props:{editMode:{type:Boolean,default:!1},data:{type:Object,default:function(){return{messageEdit:"Information",messageUpdate:"Information"}}}},methods:{edit:function(){var t=this;this.$swal({icon:"warning",title:"Are you sure?",text:"Do you want to edit the ".concat(this.data.messageEdit,"?"),showCancelButton:!0,reverseButtons:!0,buttonsStyling:!1,confirmButtonText:"Yes",customClass:{confirmButton:"btn btn-gradient-success  ml-3 ",cancelButton:"btn btn-gradient-danger  "}}).then((function(e){e.value&&t.$emit("edit")}))},cancel:function(){var t=this;this.$swal({icon:"warning",title:"Are you sure?",text:"Changes will be lost",showCancelButton:!0,reverseButtons:!0,buttonsStyling:!1,confirmButtonText:"Yes",customClass:{confirmButton:"btn btn-gradient-success  ml-3 ",cancelButton:"btn btn-gradient-danger  "}}).then((function(e){e.value&&t.$emit("cancel")}))},update:function(){var t=this;this.$swal({icon:"warning",title:"Are you sure?",text:"The  ".concat(this.data.messageUpdate," will be save!"),showCancelButton:!0,reverseButtons:!0,buttonsStyling:!1,confirmButtonText:"Yes",customClass:{confirmButton:"btn btn-gradient-success  ml-3",cancelButton:"btn btn-gradient-danger"}}).then((function(e){e.value&&t.$emit("update")}))}}},_=d,f=(n("9f49"),n("2877")),h=Object(f["a"])(_,m,p,!1,null,"7cf8f449",null),b=h.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-overlay",{attrs:{show:t.showOverlay,rounded:"sm",variant:t.variantOverlay},scopedSlots:t._u([{key:"overlay",fn:function(){return[n("div",{staticClass:"text-center"},[n("b-icon",{attrs:{icon:"stopwatch","font-scale":"4",animation:"cylon",variant:"primary"}}),n("p",{staticClass:"text-primary font-weight-bold h4",attrs:{id:"cancel-label"}},[t._v("Please wait...")])],1)]},proxy:!0}])},[t._t("content")],2)},v=[],y={name:"OverlayWait",props:{showOverlay:{type:Boolean,default:!1}},methods:{},computed:Object(r["a"])(Object(r["a"])({},Object(u["c"])({skin:"appConfig/skin"})),{},{variantOverlay:function(){return"dark"===this.skin?"dark":"light"}})},C=y,w=Object(f["a"])(C,g,v,!1,null,null,null),x=w.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-row",{staticClass:"px-2 pt-2"},[n("b-col",{class:[t.bigWindowLeft],attrs:{lg:"4"}},[n("b-input-group",{class:{"w-40":t.bigWindow},attrs:{prepend:"Year"}},[n("b-form-select",{staticClass:"text-center",attrs:{options:t.optionsYear},on:{change:function(e){return t.searchCommissions()}},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}})],1)],1),t.isSupervisorCrm?n("b-col",{class:[t.bigWindowLeft,"d-flex justify-content-center"],attrs:{lg:"4"}},[n("b-input-group",{attrs:{prepend:"Departments"}},[n("b-form-select",{attrs:{options:t.programs},on:{change:function(e){return t.changeProgram()}},model:{value:t.program,callback:function(e){t.program=e},expression:"program"}})],1)],1):t._e(),t.isSupervisorCrm||t.isCrm&&t.isManagement?t._e():n("b-col",{attrs:{lg:"4"}}),t.isCrm&&t.isManagement?n("b-col",{attrs:{lg:"4 d-flex justify-content-center"}},[[n("b-input-group",{class:{"w-input-percent":t.bigWindow},attrs:{prepend:"To Pay",append:"%"}},[n("b-form-input",{staticClass:"text-center",attrs:{min:"1",max:"100",type:"number",disabled:!t.editPercent},on:{keyup:function(e){return t.maxPercentage()}},model:{value:t.percentApartment,callback:function(e){t.percentApartment=e},expression:"percentApartment"}})],1),n("div",{staticClass:"button-margin"},[n("buttons-edit",{attrs:{editMode:t.editPercent},on:{edit:function(e){return t.editPercentageDepartment()},cancel:function(e){return t.cancelPercentageDepartment()},update:function(e){return t.updatePercentageDepartment()}}})],1)]],2):t._e(),n("b-col",{class:[t.bigWindowRight],attrs:{lg:"4"}},[n("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(113, 102, 240, 0.15)",expression:"'rgba(113, 102, 240, 0.15)'",modifiers:{400:!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Change part of the year",expression:"'Change part of the year'",modifiers:{hover:!0,top:!0}}],class:{"btn-block":!t.bigWindow},attrs:{variant:"gradient-primary",size:"sm"},on:{click:function(e){return t.changePartOfYear()}}},[t.halfYear?n("b-icon",{attrs:{icon:"arrow-right","font-scale":"1.5"}}):n("b-icon",{attrs:{icon:"arrow-left","font-scale":"1.5"}}),t.bigWindow?t._e():n("span",[t._v("Â  Half of the Year")])],1)],1)],1)},k=[],D=(n("e9c4"),n("c1df")),j=n.n(D),O={name:"CommissionsHeader",components:{ButtonsEdit:b},props:{tab:{type:String,default:""},isManagement:{type:Boolean,default:!1}},directives:{Ripple:l["a"]},mounted:function(){},data:function(){return{optionsYear:[],editPercent:!1,programShow:[],program:null}},created:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.year_select(),!t.isSupervisorCrm){e.next=5;break}return e.next=5,t.$store.dispatch("global-store/getPrograms");case 5:t.addProgramSn(),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))()},computed:Object(r["a"])(Object(r["a"])({},Object(u["c"])({bigWindow:"app/bigWindow",halfYear:"commissions-store/halfYear",moduleProgram:"commissions-store/moduleProgram",programs:"global-store/programs"})),{},{year:{get:function(){return this.$store.getters["commissions-store/year"]},set:function(t){this.$store.commit("commissions-store/SET_YEAR_COMMISSIONS",t)}},percentApartment:{get:function(){return this.$store.getters["commissions-store/percentApartment"]},set:function(t){this.$store.commit("commissions-store/SET_PERCENT_APARTMENT_COMMISSIONS",t)}},isSupervisorCrm:function(){return"supervisorCrm"===this.tab},isCrm:function(){return"crm"===this.tab},bigWindowLeft:function(){return this.bigWindow?"":"d-flex justify-content-center mb-1"},bigWindowRight:function(){return this.bigWindow?"text-right":"d-flex justify-content-center mt-1"}}),methods:{addProgramSn:function(){this.programs.unshift({id:null,text:"All"}),this.programs.push({value:15,text:"Social Network"})},changeProgram:function(){var t=this.convertProgramToModule(this.program);this.$store.commit("commissions-store/SET_MODULE_PROGRAM",t)},changePartOfYear:function(){this.$store.commit("commissions-store/SET_HALF_YEAR_COMMISSIONS",!this.halfYear)},year_select:function(){for(var t=2020;t<=j()().format("YYYY");t++)this.optionsYear.push(t)},maxPercentage:function(){this.percentApartment>100&&(this.percentApartment="100.00")},editPercentageDepartment:function(){this.returnPercent=JSON.parse(JSON.stringify(this.percentApartment)),this.editPercent=!0},cancelPercentageDepartment:function(){this.percentApartment=this.returnPercent,this.editPercent=!1},searchCommissions:function(){this.$emit("search")},updatePercentageDepartment:function(){this.editPercent=!1,this.$emit("update-percentage")}}},S=O,U=(n("e2a1"),Object(f["a"])(S,P,k,!1,null,"040f1501",null)),M=U.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isCrm?[n("div",["0.00"!=t.info.month_pay?n("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"name-class color-gray-m cursor-pointer",attrs:{title:t.info.monthUser},on:{click:function(e){return t.findCommissions("crm",t.info.month_pay)}}},[t._v("$ "+t._s(t.info.month_pay))]):t._e()]),"0.00"==t.info.month_pay||t.isSupervisor?t._e():[n("b-form-input",{staticClass:"d-inline-flex text-center w-input-percentage p-0 mt-2 font-fam",attrs:{min:"1",max:"100",type:"number",disabled:!t.editPercentage},nativeOn:{keyup:function(e){return t.maxPercentage()}},model:{value:t.percentage,callback:function(e){t.percentage=e},expression:"percentage"}}),t.isManagement?n("buttons-edit",{attrs:{editMode:t.editPercentage},on:{edit:function(e){return t.editPercentageUser()},cancel:function(e){return t.cancelPercentageUser()},update:function(e){return t.updatePercentageUser()}}}):t._e()]]:t._e(),t.admCrm||t.isSupervisorCrm?["0.00"!=t.info.month_pay?n("div",{class:{"mt-2":t.isCrm}},[n("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"name-class text-color-m cursor-pointer",attrs:{title:t.info.monthUser},on:{click:function(e){return t.findCommissions("crm",t.info.month_pay)}}},[t._v(" $ "),"crm"==t.tab?n("span",[t._v(t._s(t.info.to_pay))]):n("span",[t._v(t._s(t.info.month_pay))])]),t.isManagement?[null==t.info.ps?n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:"NOT PAID",expression:"'NOT PAID'",modifiers:{hover:!0,bottom:!0}}],staticClass:"btn-icon button-size button-margin-l",attrs:{variant:"outline-warning"},on:{click:function(e){return t.payCommissions()}}},[n("feather-icon",{attrs:{icon:"ClockIcon"}})],1):t._e(),1==t.info.ps?n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:"PAID",expression:"'PAID'",modifiers:{hover:!0,bottom:!0}}],staticClass:"btn-icon button-size button-margin-l",attrs:{variant:"outline-success"},on:{click:function(e){return t.payCommissions()}}},[n("feather-icon",{attrs:{icon:"ClockIcon"}})],1):t._e(),2==t.info.ps?n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:"ANULL",expression:"'ANULL'",modifiers:{hover:!0,bottom:!0}}],staticClass:"btn-icon button-size button-margin-l",attrs:{variant:"outline-danger"},on:{click:function(e){return t.payCommissions()}}},[n("feather-icon",{attrs:{icon:"ClockIcon"}})],1):t._e()]:t._e()],2):t._e()]:t._e(),!t.admCrm&&t.total?[n("div",[t.payDepartment?n("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"name-class text-color-m cursor-pointer",attrs:{title:t.info.monthUser+"-ADD/CHANGE"},on:{click:function(e){return t.findCommissions("program")}}},[t._v("$ "+t._s(t.payDepartment.toFixed(2)))]):n("span",{staticClass:"name-class text-color-m"},[t._v("$ 0.00")])]),n("div",{staticClass:"margin-t-pay"},[t.payDepartmentCrm?n("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"name-class text-color-m cursor-pointer",attrs:{title:t.info.monthUser+"-CRM"},on:{click:function(e){return t.findCommissions("crm",t.payDepartmentCrm)}}},[t._v("$ "+t._s(t.payDepartmentCrm.toFixed(2)))]):n("span",{staticClass:"name-class text-color-m"},[t._v("$ 0.00")])]),n("div",{staticClass:"name-class margin-t-pay"},[n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:t.info.monthUser+"-TOTAL"}},[t._v("$ "+t._s(t.total.toFixed(2)))]),t.isManagement?[null==t.psDepartment?n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:"NOT PAID",expression:"'NOT PAID'",modifiers:{hover:!0,bottom:!0}}],staticClass:"btn-icon button-size button-margin-l",attrs:{variant:"outline-warning"},on:{click:function(e){return t.payCommissions()}}},[n("feather-icon",{attrs:{icon:"ClockIcon"}})],1):t._e(),1==t.psDepartment?n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:"PAID",expression:"'PAID'",modifiers:{hover:!0,bottom:!0}}],staticClass:"btn-icon button-size button-margin-l",attrs:{variant:"outline-success"},on:{click:function(e){return t.payCommissions()}}},[n("feather-icon",{attrs:{icon:"ClockIcon"}})],1):t._e(),2==t.psDepartment?n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:"ANULL",expression:"'ANULL'",modifiers:{hover:!0,bottom:!0}}],staticClass:"btn-icon button-size button-margin-l",attrs:{variant:"outline-danger"},on:{click:function(e){return t.payCommissions()}}},[n("feather-icon",{attrs:{icon:"ClockIcon"}})],1):t._e()]:t._e()],2)]:t._e()],2)},A=[],$={name:"CommissionsMonthly",components:{ButtonsEdit:b},emits:["edit","cancel","update","max"],props:{editPercentage:{type:Boolean,default:!1},info:{type:Object,default:{ps:1,to_pay:"0.00",percentage_pay:"0.00",month_pay:"0.00",monthUser:"",rol:null,monthYear:null}},halfYear:{type:Boolean},tab:{type:String,default:"crm"},isManagement:{type:Boolean,default:!1},commissionsDepartments:{type:Array,default:function(){return[]}},month:{type:String,default:""}},data:function(){return{percentage:null,returnPercentage:null,payDepartment:0,payDepartmentCrm:0,psDepartment:null}},created:function(){this.getCommissionsDepartments()},mounted:function(){this.percentage=this.info.percentage_pay},computed:{isSupervisor:function(){return 2==this.info.rol},admCrm:function(){return"adm"==this.tab||"crm"==this.tab},isCrm:function(){return"crm"==this.tab},isSupervisorCrm:function(){return"supervisorCrm"===this.tab},total:function(){return this.payDepartmentCrm+this.payDepartment},buttonsDisabled:function(){var t=j()(),e=j()(this.info.monthYear),n=t.diff(e,"months");return n>1}},methods:{maxPercentage:function(){Number(this.percentage)>100&&(this.percentage="100.00")},getCommissionsDepartments:function(){var t=this;this.admCrm||this.commissionsDepartments.forEach((function(e){e["ps_"+t.month]&&(t.psDepartment=e["ps_"+t.month]),2==e.module_id?t.payDepartmentCrm=e[t.month]:t.payDepartment=e[t.month]}))},findCommissions:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$emit("find",{type:t,amountTotal:e})},payCommissions:function(){var t={ps:this.psDepartment,total:this.total};this.$emit("pay",t)},editPercentageUser:function(){this.returnPercentage=JSON.parse(JSON.stringify(this.percentage)),this.$emit("edit")},cancelPercentageUser:function(){this.percentage=this.returnPercentage,this.$emit("cancel")},updatePercentageUser:function(){this.$emit("update",this.percentage)}},watch:{halfYear:function(){this.percentage=this.info.percentage_pay,this.getCommissionsDepartments()},info:function(t,e){t&&this.getCommissionsDepartments()}}},R=$,N=(n("2d63"),Object(f["a"])(R,T,A,!1,null,"c2c7f966",null)),L=N.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{attrs:{"title-class":"h2 text-white",size:"xl","modal-class":"modal-primary","ok-only":"",title:"DETAIL OF COMMISSIONS"},on:{hidden:function(e){return t.hideModal()}},model:{value:t.modalUp,callback:function(e){t.modalUp=e},expression:"modalUp"}},[n("b-card-text",[n("ModalHeader",{attrs:{info:t.info}}),t.isCrm?n("DetailsCrm",{attrs:{info:t.info}}):t._e(),t.isAdm?n("DetailsAdm",{attrs:{info:t.info}}):t._e(),t.isDepartment?n("DetailsDepartments",{attrs:{info:t.info}}):t._e()],1)],1)],1)},B=[],E=n("d4ec"),I=n("bee2"),F=n("2777"),W=function(){function t(){Object(E["a"])(this,t)}return Object(I["a"])(t,[{key:"searchCommissions",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F["a"].post("/commissions/get-report-commissions",e);case 3:return n=t.sent,a=n.data,t.abrupt("return",a);case 8:throw t.prev=8,t.t0=t["catch"](0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"searchCommissionsDepartments",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F["a"].post("/commissions/get-report-commissions-department",e);case 3:return n=t.sent,a=n.data,t.abrupt("return",a);case 8:throw t.prev=8,t.t0=t["catch"](0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"updatePercentage",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F["a"].post("/commissions/edit-percentage-to-pay-crm",e);case 3:return n=t.sent,a=n.data,t.abrupt("return",a);case 8:throw t.prev=8,t.t0=t["catch"](0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getDepartmentPercentage",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F["a"].post("/commissions/get-percentage-by-department",e);case 3:return n=t.sent,a=n.data,t.abrupt("return",a);case 8:throw t.prev=8,t.t0=t["catch"](0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"searchCommissionsUserCrm",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F["a"].post("/commissions/get-details-of-commissions-crm",e);case 3:return n=t.sent,a=n.data,t.abrupt("return",a);case 8:throw t.prev=8,t.t0=t["catch"](0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"searchCommissionsUserAdm",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F["a"].post("/commissions/get-details-of-commissions-administration",e);case 3:return n=t.sent,a=n.data,t.abrupt("return",a);case 8:throw t.prev=8,t.t0=t["catch"](0),console.log("Something went wrong on Commissions:",t.t0),t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"searchCommissionsUserDepartment",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F["a"].post("/commissions/get-details-of-commissions-departments",e);case 3:return n=t.sent,a=n.data,t.abrupt("return",a);case 8:throw t.prev=8,t.t0=t["catch"](0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"searchCommissionsApprove",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F["a"].post("/commissions/get-approve-commissions",e);case 3:return n=t.sent,a=n.data,t.abrupt("return",a);case 8:throw t.prev=8,t.t0=t["catch"](0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"anullComissions",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F["a"].post("/commissions/anull-commissions",e);case 3:return n=t.sent,a=n.data,t.abrupt("return",a);case 8:throw t.prev=8,t.t0=t["catch"](0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"approveCommissions",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F["a"].post("/commissions/approve-commissions",e);case 3:return n=t.sent,a=n.data,t.abrupt("return",a);case 8:throw t.prev=8,t.t0=t["catch"](0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),z=new W,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-row",[n("b-col",{class:[t.colsHeader,"mb-1"],attrs:{lg:""}},[n("b-input-group",[n("b-input-group-prepend",{staticClass:"w-30"},[n("b-input-group-text",{staticClass:"font-weight-bolder w-100 justify-content-center"},[n("span",[t._v("USER")])])],1),n("b-form-input",{staticClass:"text-center",attrs:{type:"text",disabled:""},model:{value:t.info.user_name,callback:function(e){t.$set(t.info,"user_name",e)},expression:"info.user_name"}})],1)],1),t.isDetails?n("b-col",{class:[t.colsHeader,"mb-1"],attrs:{lg:""}},[n("b-input-group",[n("b-input-group-prepend",{staticClass:"w-30"},[n("b-input-group-text",{staticClass:"font-weight-bolder w-100 justify-content-center"},[n("span",[t._v("MODULE")])])],1),n("b-form-input",{staticClass:"text-center",attrs:{type:"text",disabled:""},model:{value:t.info.module_name,callback:function(e){t.$set(t.info,"module_name",e)},expression:"info.module_name"}})],1)],1):t._e(),t.isPayment?n("b-col",{class:[t.colsHeader,"mb-1"],attrs:{lg:""}},[n("b-input-group",[n("b-input-group-prepend",{staticClass:"w-30"},[n("b-input-group-text",{staticClass:"font-weight-bolder w-100 justify-content-center"},[n("span",[t._v("AMOUNT")])])],1),n("b-form-input",{staticClass:"text-center",attrs:{type:"text",disabled:""},model:{value:t.amountToShow,callback:function(e){t.amountToShow=e},expression:"amountToShow"}})],1)],1):t._e(),n("b-col",{class:[t.colsHeader,"mb-1"],attrs:{lg:""}},[n("b-input-group",[n("b-input-group-prepend",{staticClass:"w-30"},[n("b-input-group-text",{staticClass:"font-weight-bolder w-100 justify-content-center"},[n("span",[t._v("YEAR")])])],1),n("b-form-input",{staticClass:"text-center",attrs:{type:"text",disabled:""},model:{value:t.info.year,callback:function(e){t.$set(t.info,"year",e)},expression:"info.year"}})],1)],1),n("b-col",{class:[t.colsHeader,"mb-1"],attrs:{lg:""}},[n("b-input-group",[n("b-input-group-prepend",{staticClass:"w-30"},[n("b-input-group-text",{staticClass:"font-weight-bolder w-100 justify-content-center"},[n("span",[t._v("MONTH")])])],1),n("b-form-input",{staticClass:"text-center",attrs:{type:"text",disabled:""},model:{value:t.info.monthName,callback:function(e){t.$set(t.info,"monthName",e)},expression:"info.monthName"}})],1)],1)],1)},J=[],G={name:"ModalHeader",props:{info:{type:Object,required:!0}},computed:{isDetails:function(){return"details"===this.info.type},isPayment:function(){return"payment"===this.info.type},colsHeader:function(){return this.isDetails?"col-lg-3":"col-lg-6"},amountToShow:function(){return"crm"==this.info.tab?this.info.amountToPay:this.info.amount}}},q=G,V=(n("ebb0"),Object(f["a"])(q,H,J,!1,null,"736b3dab",null)),K=V.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-table",{staticClass:"mt-2",attrs:{items:t.commissionsUser,fields:t.fields,responsive:"","no-border-collapse":"",striped:"","sticky-header":"50vh",busy:t.isBusy},scopedSlots:t._u([{key:"table-busy",fn:function(){return[n("div",{staticClass:"text-center text-primary my-2"},[n("b-spinner",{staticClass:"align-middle"}),n("strong",[t._v("Loading...")])],1)]},proxy:!0},{key:"empty",fn:function(){return[n("div",{staticClass:"text-center text-primary my-2"},[n("strong",[t._v("No commissions found")])])]},proxy:!0},t.isManagement?{key:"cell(account)",fn:function(e){return[n("b-link",[t._v(t._s(e.value))])]}}:null,{key:"cell(account_status)",fn:function(t){return[n("div",{staticClass:"text-center"},[2==t.value?n("b-icon",{staticStyle:{color:"#ffc107"},attrs:{icon:"triangle-fill"}}):n("b-icon",{style:"color:"+(1==t.value?"#00CC00":3==t.value?"#0066FF":"red"),attrs:{icon:"circle-fill"}})],1)]}},{key:"cell(created_at)",fn:function(e){return[n("span",[t._v(t._s(t._f("myGlobal")(e.value)))])]}},{key:"cell(approve_date)",fn:function(e){return[n("span",[t._v(t._s(t._f("myGlobal")(e.value)))])]}}],null,!0)}),n("b-row",[t.isCeo?t._e():[n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("SUM:")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(this.total_amount))])])],t.isCeo||t.isSupervisor?t._e():[n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("DISCOUNT:")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(this.discount))])])],t.isSupervisor?[n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("20% OF COMMISSIONS")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(this.total_department))])]),n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("10% OF COMMISSIONS")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(this.total_commission))])]),n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("10% OF PROGRAMS")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(this.total_programs))])])]:t._e(),t.isCeo||t.isSupervisor?t._e():[t.total_supervisor_program>0?[n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("10% OF CRM:")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(this.total_supervisor_program))])])]:t._e()],n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("TOTAL GENERATED:")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(this.total))])]),t.isSupervisor?t._e():[n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("DISCOUNT FOR PENALTIES:")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(t.discounts_penalties))])])],t.isCeo||t.isSupervisor?t._e():[n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("TOTAL TO PAY:")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(this.total_to_pay))])])]],2)],1)},X=[],Z={name:"DetailsCrm",props:{info:{type:Object,default:function(){return{}}}},data:function(){return{commissionsUser:[],fields:[],isBusy:!0,total_amount:"",discount:"",total:"",total_commission:"",total_department:"",total_programs:"",total_to_pay:"",total_supervisor_program:"",discounts_penalties:null}},created:function(){this.searchCommissions()},mounted:function(){this.modalUp=this.showModal,this.showOverlay=this.showModal},computed:Object(r["a"])(Object(r["a"])({},Object(u["c"])({bigWindow:"app/bigWindow"})),{},{textRightBig:function(){return this.bigWindow?"text-right":"text-center"},textLeftBig:function(){return this.bigWindow?"text-left":"text-center mb-1"},isCeo:function(){return 1==this.info.role_id},isSupervisor:function(){return 2==this.info.role_id},isManagement:function(){return 16==this.info.moduleSession}}),methods:{searchCommissions:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getFields(),e.next=3,z.searchCommissionsUserCrm(t.info);case 3:n=e.sent,n.length>0&&(t.filterCommissions(n),t.total_amount=n[0].total_amount,t.discount=n[0].discount,t.total=n[0].total,t.total_department=n[0].commission_department,t.total_commission=n[0].commission_bond,t.total_programs=n[0].amount_programs,t.total_to_pay=n[0].total_to_pay,t.discounts_penalties=parseFloat(t.total-t.total_to_pay).toFixed(2)),t.ifNotEntries(),t.isBusy=!1;case 7:case"end":return e.stop()}}),e)})))()},ifNotEntries:function(){0==this.commissionsUser.length?(this.total_amount=0,this.discount=0,this.info.amountTotal=parseFloat(this.info.amountTotal).toFixed(2),this.total=this.info.amountTotal,this.total_to_pay=this.info.amountTotal,this.total_supervisor_program=this.info.amountTotal):this.total_supervisor_program=parseFloat(this.info.amountTotal-(this.total_amount-this.discount)).toFixed(2)},redirectToClientDashboard:function(t,e){var n="";switch(t){case 1:n="/bussiness/clients/account/"+e;break;case 2:n="/boostcredit/clients/account/"+e;break;case 3:n="/creditexperts/clients/account/"+e;break;case 4:n="/debtsolution/clients/account/"+e;break;case 5:n="/taxresearch/clients/account/"+e;break;case 7:n="/specialists/clients/account/"+e;break;case 8:n="/bookeeping/clients/account/"+e;break;case 9:n="/ti/clients/account/"+e;break}return n},getFields:function(){this.fields=[{key:"lead",label:"Client"},{key:"account",label:"Account"},{key:"account_status",label:"Status"},{key:"value",label:"Program"},{key:"type",label:"Type"},{key:"commission",label:"Amount"},{key:"percentage_pay",label:"Percentage to pay"},{key:"approve_date",label:"Approved Date"},{key:"created_at",label:"Created Date"}]},filterCommissions:function(t){var e=this;this.commissionsUser=t.filter((function(t){return t.user_id==e.info.user}))}},watch:{}},tt=Z,et=Object(f["a"])(tt,Q,X,!1,null,null,null),nt=et.exports,at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-table",{staticClass:"mt-2",attrs:{items:t.commissionsUser,fields:t.fields,responsive:"",striped:"","no-border-collapse":"","sticky-header":"50vh",busy:t.isBusy},scopedSlots:t._u([{key:"table-busy",fn:function(){return[n("div",{staticClass:"text-center text-primary my-2"},[n("b-spinner",{staticClass:"align-middle"}),n("strong",[t._v("Loading...")])],1)]},proxy:!0},{key:"cell(request_from_id)",fn:function(e){return[n("span",[t._v(t._s(2==e.value||15==e.value?"Lead":"Client"))])]}},{key:"cell(created_at)",fn:function(e){return[n("span",[t._v(t._s(t._f("myGlobal")(e.value)))])]}},{key:"cell(request_date)",fn:function(e){return[n("span",[t._v(t._s(t._f("myGlobal")(e.value)))])]}}])}),n("b-row",[t.isSupervisor||t.isAdministrator?[n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("SUM:")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(this.total_amount))])])]:t._e(),t.isAdministrator?[n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("DISCOUNT:")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(t.discount))])])]:t._e(),t.isSupervisor?[n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("20% OF COMMISSIONS")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(t.total_department))])])]:t._e(),n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("TOTAL:")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(t.total))])])],2)],1)},st=[],rt={name:"DetailsAdm",props:{info:{type:Object,default:function(){return{}}}},data:function(){return{modalUp:!1,showOverlay:!1,commissionsUser:[],fields:[],isBusy:!0,total_amount:"",discount:"",total:"",total_commission:"",total_department:"",total_programs:""}},created:function(){this.searchCommissions()},mounted:function(){},computed:Object(r["a"])(Object(r["a"])({},Object(u["c"])({bigWindow:"app/bigWindow"})),{},{textRightBig:function(){return this.bigWindow?"text-right":"text-center"},textLeftBig:function(){return this.bigWindow?"text-left":"text-center mb-1"},isSupervisor:function(){return 2==this.info.role_id},isAdministrator:function(){return 6==this.info.role_id}}),methods:{searchCommissions:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getFields(),e.next=3,z.searchCommissionsUserAdm(t.info);case 3:n=e.sent,n.length>0&&(t.filterCommissions(n),t.total_amount=n[0].total_amount,t.discount=n[0].discount,t.total=n[0].total,t.total_department=n[0].commission_department,t.total_commission=n[0].commission_bond,t.total_programs=n[0].amount_programs),t.isBusy=!1;case 6:case"end":return e.stop()}}),e)})))()},getFields:function(){this.fields=[{key:"lead",label:"Client"},{key:"value",label:"Program"},{key:"type",label:"Type"},{key:"commission",label:"Amount"},{key:"created_at",label:"Created Date"},{key:"request_from",label:"Request From"},{key:"request_from_id",label:"Origin"},{key:"request_by",label:"Request By"},{key:"request_date",label:"Request Date"}]},filterCommissions:function(t){var e=this;this.commissionsUser=t.filter((function(t){return t.user_id==e.info.user}))}},watch:{}},ot=rt,it=Object(f["a"])(ot,at,st,!1,null,null,null),ct=it.exports,ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-table",{staticClass:"mt-2",attrs:{items:t.commissionsUser,fields:t.fields,responsive:"",striped:"","no-border-collapse":"","sticky-header":"50vh",busy:t.isBusy},scopedSlots:t._u([{key:"table-busy",fn:function(){return[n("div",{staticClass:"text-center text-primary my-2"},[n("b-spinner",{staticClass:"align-middle"}),n("strong",[t._v("Loading...")])],1)]},proxy:!0},{key:"cell(approve_date)",fn:function(e){return[n("span",[t._v(t._s(t._f("myGlobal")(e.value)))])]}}])}),n("b-row",[t.isSupervisor||t.isAdvisor||t.isSeller?[n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("SUM:")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(t.total_amount))])])]:t._e(),t.isAdvisor||t.isSeller?[n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("DISCOUNT:")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(t.discount))])])]:t._e(),t.isSupervisor?[n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[t.currentDate>="2021-11-24"?n("div",{staticClass:"font-weight-bolder"},[t._v("20% OF COMMISSIONS")]):n("div",{staticClass:"font-weight-bolder"},[t._v("10% OF COMMISSIONS")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(t.total_department))])])]:t._e(),n("b-col",{class:[t.textRightBig],attrs:{lg:"6"}},[n("div",{staticClass:"font-weight-bolder"},[t._v("TOTAL:")])]),n("b-col",{class:[t.textLeftBig],attrs:{lg:"6"}},[n("div",[t._v("$ "+t._s(t.total))])])],2)],1)},lt=[],mt={name:"DetailsDepartments",props:{info:{type:Object,default:function(){return{}}}},data:function(){return{commissionsUser:[],fields:[],isBusy:!0,total_amount:"",discount:"",total:"",total_department:"",currentDate:j()().format("YYYY-MM-DD")}},created:function(){this.searchCommissions()},mounted:function(){},computed:Object(r["a"])(Object(r["a"])({},Object(u["c"])({bigWindow:"app/bigWindow"})),{},{textRightBig:function(){return this.bigWindow?"text-right":"text-center"},textLeftBig:function(){return this.bigWindow?"text-left":"text-center mb-1"},isSupervisor:function(){return 2==this.info.role_id},isAdvisor:function(){return 3==this.info.role_id},isSeller:function(){return 5==this.info.role_id}}),methods:{searchCommissions:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getFields(),e.next=3,z.searchCommissionsUserDepartment(t.info);case 3:n=e.sent,n.length>0&&(t.filterCommissions(n),t.total_amount=n[0].total_amount,t.discount=n[0].discount,t.total_amount=n[0].total_amount,t.discount=n[0].discount,t.total=n[0].total,t.total_department=n[0].commission_department),t.isBusy=!1;case 6:case"end":return e.stop()}}),e)})))()},getFields:function(){this.fields=[{key:"lead",label:"Client"},{key:"value",label:"Program"},{key:"type",label:"Type"},{key:"commission",label:"Amount"},{key:"approve_date",label:"Approved Date"}]},filterCommissions:function(t){var e=this;this.commissionsUser=t.filter((function(t){return t.user_id==e.info.user}))}},watch:{}},pt=mt,dt=Object(f["a"])(pt,ut,lt,!1,null,null,null),_t=dt.exports,ft={name:"ModalCommissionsDetails",components:{ModalHeader:K,DetailsCrm:nt,DetailsAdm:ct,DetailsDepartments:_t},props:{showModal:{type:Boolean,default:!1},info:{type:Object,default:function(){return{}}}},data:function(){return{modalUp:!1}},created:function(){},mounted:function(){this.modalUp=this.showModal},computed:{isCeo:function(){return 1==this.info.role_id},isSupervisor:function(){return 2==this.info.role_id},isCrm:function(){return 2==this.info.module},isAdm:function(){return 4==this.info.module},isDepartment:function(){return 2!=this.info.module&&4!=this.info.module}},methods:{hideModal:function(t){this.modalUp=!1,this.$emit("hide-modal")}},watch:{}},ht=ft,bt=Object(f["a"])(ht,Y,B,!1,null,null,null),gt=bt.exports,vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{attrs:{"title-class":"h2",size:"lg",title:"COMMISSION PAYMENT","modal-class":"modal-primary","footer-class":t.showEdit||t.showAnull?"justify-content-between":"",centered:""},on:{hidden:function(e){return t.hideModal(!1,null)}},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[t.showEdit||t.showAnull?n("div",[n("label",{staticClass:"font-weight-bolder"},[t._v(t._s(t.anullApprove)+" Â ")]),n("span",[t._v(t._s(t.anullApproveName))]),2==t.info.paid_state?n("span",[t._v("("+t._s(t._f("myGlobal")(t.payment.anullDate))+")")]):t._e()]):t._e(),n("div",[n("b-button",{attrs:{size:"sm",variant:"gradient-success"},on:{click:function(e){return t.approveCommissions()}}},[t._v(t._s(t.saveUpdate))]),t.showEdit?n("b-button",{attrs:{size:"sm",variant:"gradient-info"},on:{click:function(e){return t.editPayment()}}},[t._v("EDIT")]):t._e(),n("b-button",{attrs:{size:"sm",variant:"gradient-danger ml-1"},on:{click:function(e){return t.anullPayment()}}},[t._v("ANULL")])],1)]},proxy:!0}]),model:{value:t.modalUp,callback:function(e){t.modalUp=e},expression:"modalUp"}},[n("b-card-text",[n("ModalHeader",{attrs:{info:t.info}}),n("ValidationObserver",{ref:"form"},[n("PaymentBody",{attrs:{info:t.info,"disabled-payment":t.disabledPayment,payment:t.payment}})],1)],1)],1)],1)},yt=[],Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-row",[n("b-col",{attrs:{lg:"6"}},[n("b-form-group",{attrs:{label:"Method of Payment:","label-size":"lg","label-class":"font-weight-bolder"}},[n("b-form-radio-group",{attrs:{disabled:t.disabledPayment,stacked:""},model:{value:t.payment.methoPayment,callback:function(e){t.$set(t.payment,"methoPayment",e)},expression:"payment.methoPayment"}},[n("b-form-radio",{attrs:{value:"1"}},[t._v("Check")]),n("b-form-radio",{attrs:{value:"2"}},[t._v("Transfer")])],1)],1)],1),n("b-col",{attrs:{lg:"6"}},[n("b-form-group",{attrs:{label:"Date:","label-size":"lg","label-class":"font-weight-bolder"}},[n("flat-pickr",{staticClass:"form-control",attrs:{config:{dateFormat:"m/d/Y"},disabled:t.disabledPayment},model:{value:t.payment.datePayment,callback:function(e){t.$set(t.payment,"datePayment",e)},expression:"payment.datePayment"}})],1)],1)],1),n("b-row",[n("b-col",{attrs:{lg:"6"}},[n("ValidationProvider",{attrs:{rules:"required",name:"Operation Number"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.valid,s=e.errors;return[n("b-form-group",{attrs:{label:"Operation Number:","label-size":"lg","label-class":"font-weight-bolder"}},[n("b-form-input",{attrs:{type:"number",state:!s[0]&&(!!a||null),placeholder:"Enter The Operation Number",min:"0",pattern:"^[0-9]+",disabled:t.disabledPayment},model:{value:t.payment.numberPayment,callback:function(e){t.$set(t.payment,"numberPayment",e)},expression:"payment.numberPayment"}}),n("b-form-invalid-feedback",[t._v("Operation Number "+t._s(s[0]))])],1)]}}])})],1),n("b-col",{attrs:{lg:"6"}},[n("b-form-group",{attrs:{label:"Observation:","label-size":"lg","label-class":"font-weight-bolder"}},[n("b-form-textarea",{attrs:{placeholder:"Enter The Observation",rows:"1","max-rows":"3",disabled:t.disabledPayment},model:{value:t.payment.observation,callback:function(e){t.$set(t.payment,"observation",e)},expression:"payment.observation"}})],1)],1)],1)],1)},wt=[],xt=n("c38f"),Pt=n.n(xt),kt={name:"PaymentBody",components:{flatPickr:Pt.a},props:{disabledPayment:{type:Boolean,default:!1},payment:{type:Object,default:function(){return{}}}},data:function(){return{}}},Dt=kt,jt=(n("3de9"),Object(f["a"])(Dt,Ct,wt,!1,null,null,null)),Ot=jt.exports,St={name:"ModalCommissionsPayment",components:{ModalHeader:K,PaymentBody:Ot},props:{showModal:{type:Boolean,default:!1},info:{type:Object,default:function(){return{}}}},data:function(){return{modalUp:!1,disabledPayment:!1,isPaid:null,approveBy:null,payment:{methoPayment:2,datePayment:j()().format("MM-DD-YYYY"),numberPayment:null,observation:"",approveName:null,anullName:null,anullDate:null,loading:null}}},created:function(){this.searchCommission()},mounted:function(){this.modalUp=this.showModal,this.isPaid=this.info.paid_state,this.disabledPayment=1==this.info.paid_state||2==this.info.paid_state},computed:Object(r["a"])(Object(r["a"])({},Object(u["c"])({loading:"app/loading",currentUser:"auth/currentUser"})),{},{anullApprove:function(){return 1==this.info.paid_state?"Approved by:   ":2==this.info.paid_state?"Anulled by:   ":void 0},anullApproveName:function(){return 1==this.info.paid_state?this.payment.approveName:2==this.info.paid_state?this.payment.anullName:void 0},amountToShow:function(){return"crm"==this.info.tab?this.info.amountToPay:this.info.amount},isCeo:function(){return 1==this.info.role_id},isSupervisor:function(){return 2==this.info.role_id},isCrm:function(){return 2==this.info.module},isAdm:function(){return 4==this.info.module},isDepartment:function(){return 2!=this.info.module&&4!=this.info.module},saveUpdate:function(){return this.info.paid_state?"UPDATE":"SAVE"},showEdit:function(){return 1==this.isPaid||2==this.isPaid},showAnull:function(){return 3==this.isPaid},showSave:function(){return null==this.isPaid||3==this.isPaid}}),methods:Object(r["a"])(Object(r["a"])({},Object(u["d"])({setLoading:"app/SET_LOADING"})),{},{hideModal:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;this.modalUp=!1,this.$emit("hide-modal",t,e,n,a)},searchCommission:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.info.paid_state){e.next=21;break}return t.setLoading(!0),e.prev=2,n={user_id:t.info.user_id,year:t.info.year,month:t.info.month},e.next=6,z.searchCommissionsApprove(n);case 6:a=e.sent,t.payment.methoPayment=a[0].paid_type,t.payment.observation=a[0].observation,t.payment.datePayment=j()(a[0].payment_date).format("MM-DD-YYYY"),t.payment.numberPayment=a[0].num_operation,t.payment.approveName=a[0].approve_name,t.payment.anullName=a[0].annulled_name,t.payment.anullDate=a[0].annulled_at,t.setLoading(!1),e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](2),t.showErrorSwal(),t.setLoading(!1);case 21:case"end":return e.stop()}}),e,null,[[2,17]])})))()},approveCommissions:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.form.validate();case 2:if(n=e.sent,!n){e.next=22;break}return e.next=6,t.showConfirmSwal("Are you sure?","Are you sure of pay this commission?","warning");case 6:if(a=e.sent,!a.isConfirmed){e.next=22;break}return e.prev=8,t.setLoading(!0),s={user_id:t.info.user_id,year:t.info.year,month:t.info.month,method:t.payment.methoPayment,observation:t.payment.observation,approve_by:t.currentUser.user_id,approve_date:j()(t.payment.datePayment).format("MM/DD/YYYY"),module:t.info.module,num_operation:t.payment.numberPayment,amount_paid:t.amountToShow},e.next=13,z.approveCommissions(s);case 13:e.sent,t.hideModal(!0,1,t.info.user_id,t.info.ps_month),e.next=22;break;case 17:e.prev=17,e.t0=e["catch"](8),t.showErrorSwal(),t.setLoading(!1),t.hideModal(!1,null);case 22:case"end":return e.stop()}}),e,null,[[8,17]])})))()},editPayment:function(){this.disabledPayment=!1,this.isPaid=3},anullPayment:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.showConfirmSwal("Are you sure?","Are you sure of anull this commission?","warning");case 2:if(n=e.sent,!n.isConfirmed){e.next=18;break}return e.prev=4,t.setLoading(!0),a={user_id:t.info.user_id,year:t.info.year,month:t.info.month,method:t.payment.methoPayment,observation:t.payment.observation,num_operation:t.operationNumber,anulled_by:t.currentUser.user_id,module:t.info.module},e.next=9,z.anullComissions(a);case 9:e.sent,t.hideModal(!0,2,t.info.user_id,t.info.ps_month),e.next=18;break;case 13:e.prev=13,e.t0=e["catch"](4),t.showErrorSwal(),t.setLoading(!1),t.hideModal(!1,null);case 18:case"end":return e.stop()}}),e,null,[[4,13]])})))()}}),watch:{}},Ut=St,Mt=Object(f["a"])(Ut,vt,yt,!1,null,null,null),Tt=Mt.exports,At={name:"CommissionsComponent",components:{ButtonsEdit:b,OverlayWait:x,CommissionsHeader:M,CommissionsMonthly:L,ModalCommissionsDetails:gt,ModalCommissionsPayment:Tt},directives:{Ripple:l["a"]},props:{module:{type:Number,default:null},tab:{type:String,default:null},tabSupervisorCrm:{type:Boolean,default:!1}},mounted:function(){this.$store.commit("commissions-store/SET_MODULE_PROGRAM",null)},data:function(){return{sessionUser:null,commissions:null,returnPercent:null,editPercent:!1,user_id:null,supervisorCrm:0,users:"",user_name:"",modal:!1,month:"",ps_month:"",role_id:"",approve_by:"",paid_state:"",module_id:null,type:"",modalm:!1,module_name:"",percentages:null,amountTotal:null,showOverlay:!1,modalDetails:!1,modalPayment:!1,infoDetails:null,infoPayment:null}},created:function(){this.getCurrentMonth(),this.getDepartmentPercentage(),this.searchCommissions()},computed:Object(r["a"])(Object(r["a"])({},Object(u["c"])({currentUser:"auth/currentUser",isCeo:"auth/isCeo",isSupervisor:"auth/isSupervisor",userSession:"auth/userSession",token:"auth/token",currentBreakPoint:"app/currentBreakPoint",bigWindow:"app/bigWindow",year:"commissions-store/year",halfYear:"commissions-store/halfYear",percentApartment:"commissions-store/percentApartment",skin:"appConfig/skin",loading:"commissions-store/loading",moduleProgram:"commissions-store/moduleProgram",isSeller:"auth/isSeller"})),{},{isManagement:function(){return 16==this.module},isDepartment:function(){return 2!=this.module_id&&4!=this.module_id},isCrm:function(){return"crm"==this.tab},isSupervisorCrm:function(){return"supervisorCrm"==this.tab},t_jan:function(){return this.sumTotal("jan")},t_jan_pay:function(){return this.sumTotal("jan_to_pay")},t_feb:function(){return this.sumTotal("feb")},t_feb_pay:function(){return this.sumTotal("feb_to_pay")},t_mar:function(){return this.sumTotal("mar")},t_mar_pay:function(){return this.sumTotal("mar_to_pay")},t_apr:function(){return this.sumTotal("apr")},t_apr_pay:function(){return this.sumTotal("apr_to_pay")},t_may:function(){return this.sumTotal("may")},t_may_pay:function(){return this.sumTotal("may_to_pay")},t_jun:function(){return this.sumTotal("jun")},t_jun_pay:function(){return this.sumTotal("jun_to_pay")},t_jul:function(){return this.sumTotal("jul")},t_jul_pay:function(){return this.sumTotal("jul_to_pay")},t_aug:function(){return this.sumTotal("aug")},t_aug_pay:function(){return this.sumTotal("aug_to_pay")},t_sep:function(){return this.sumTotal("sep")},t_sep_pay:function(){return this.sumTotal("sep_to_pay")},t_oct:function(){return this.sumTotal("oct")},t_oct_pay:function(){return this.sumTotal("oct_to_pay")},t_nov:function(){return this.sumTotal("nov")},t_nov_pay:function(){return this.sumTotal("nov_to_pay")},t_dec:function(){return this.sumTotal("dec")},t_dec_pay:function(){return this.sumTotal("dec_to_pay")}}),methods:{sumTotal:function(t){if(this.isDepartment){for(var e=0,n=0;n<this.commissions.length;n++)this.commissions[n].commissions.forEach((function(n){e+=n[t]}));return e=parseFloat(e).toFixed(2),e}if(this.commissions&&!this.isDepartment){var a=this.commissions.reduce((function(e,n){return e+Number(n[t])}),0);return a=parseFloat(a).toFixed(2),a}return 0},getCurrentMonth:function(){var t=j()().format("MM"),e=["01","02","03","04","05","06"];e.includes(t)?this.$store.commit("commissions-store/SET_HALF_YEAR_COMMISSIONS",!0):this.$store.commit("commissions-store/SET_HALF_YEAR_COMMISSIONS",!1)},searchCommissions:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t&&(e.commissions=null),e.module_id=e.convertModuleToProgramString(e.tab),e.isSupervisor||e.isCeo||e.isManagement||e.isCoordinator||(e.user_id=e.currentUser.user_id),e.isSupervisorCrm&&(e.supervisorCrm=1),a={user:e.user_id,year:e.year,module:e.module_id,supervisorCrm:e.supervisorCrm,subProgram:e.isSupervisorCrm?e.moduleProgram:null},!e.isDepartment||e.isSupervisorCrm){n.next=11;break}return n.next=8,z.searchCommissionsDepartments(a);case 8:n.t0=n.sent,n.next=14;break;case 11:return n.next=13,z.searchCommissions(a);case 13:n.t0=n.sent;case 14:s=n.t0,e.commissions=s,e.filterCommissionsCoordinator(),e.departmentCommissions();case 18:case"end":return n.stop()}}),n)})))()},filterCommissionsCoordinator:function(){this.isCoordinator&&(this.commissions=this.commissions.filter((function(t){return 2!=t.role_id})))},departmentCommissions:function(){this.isDepartment&&this.commissions.forEach((function(t){t.commissions=JSON.parse(t.commissions)}))},getDepartmentPercentage:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isCrm){e.next=6;break}return n={year:t.year},e.next=4,z.getDepartmentPercentage(n);case 4:a=e.sent,t.percentages=a[0];case 6:case"end":return e.stop()}}),e)})))()},updatePercentageDepartment:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.addPreloader(),n={type:1,percent:t.percentApartment,modul:t.module_id,id_user:t.currentUser.user_id},e.next=4,z.updatePercentage(n);case 4:return e.next=6,t.searchCommissions();case 6:t.removePreloader(),t.showSuccessSwal("Percentage updated","The percentage to pay of the department was updated","success");case 8:case"end":return e.stop()}}),e)})))()},editPercentageUser:function(t,e){this.commissions[t][e]=1},cancelPercentageUser:function(t,e){this.commissions[t][e]=0},updatePercentageUser:function(t,e,n,a,s,r,o){var i=this;return Object(c["a"])(regeneratorRuntime.mark((function c(){var u,l;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return i.addPreloader(),u={type:2,percent:t,modul:i.module_id,year:i.year,month:r,seller:o.user_id},c.next=4,z.updatePercentage(u);case 4:l=c.sent,i.commissions[e][s]=l[0].to_pay,i.commissions[e][a]=t,i.commissions[e][n]=0,i.removePreloader(),i.showSuccessSwal("Percentage updated","","success","The percentage to pay of <b> ".concat(o.user_name,"</b> was updated"));case 10:case"end":return c.stop()}}),c)})))()},findCommissions:function(t,e,n,a){this.infoDetails={user:n.user_id,month:e,user_name:n.user_name,role_id:this.isDepartment?1==n.commissions.length||2==n.commissions[0].module_id&&"crm"==t.type?n.commissions[0].role_id:n.commissions[1].role_id:n.role_id,role:this.isDepartment?1==n.commissions.length||2==n.commissions[0].module_id&&"crm"==t.type?n.commissions[0].role_id:n.commissions[1].role_id:n.role_id,module:this.isDepartment?"crm"==t.type?2:this.module_id:n.module_id,module_name:this.isDepartment?"crm"==t.type?"CRM":n.main_module_name:n.module,amountTotal:t.amountTotal,year:this.year,monthName:a,type:"details",moduleSession:this.module},this.modalDetails=!0},hideModalDetails:function(){this.modalDetails=!1},payCommissions:function(t,e,n,a,s,r,o,i){this.infoPayment={month:e,ps_month:o,user_name:n.user_name,user_id:n.user_id,amountToPay:s,amount:this.isDepartment?t.total:r,approve_by:this.currentUser.user_id,paid_state:this.isDepartment?t.ps:a,module:n.module_id,monthName:i,tab:this.tab,type:"payment",year:this.year},this.modalPayment=!0},hideModalPayment:function(t,e,n,a){t&&(this.changeStatusPayment(e,n,a),this.removePreloader()),this.modalPayment=!1},changeStatusPayment:function(t,e,n){this.isDepartment?this.commissions.forEach((function(a){a.user_id==e&&a.commissions.forEach((function(e){e[n]=t}))})):this.commissions.forEach((function(a){a.user_id==e&&(a[n]=t)}))}},watch:{moduleProgram:function(t,e){this.searchCommissions(!0)}}},$t=At,Rt=(n("9fa8"),Object(f["a"])($t,o,i,!1,null,"dc68f2dc",null)),Nt=Rt.exports,Lt={components:{CommissionsComponent:Nt},mounted:function(){},computed:Object(r["a"])(Object(r["a"])({},Object(u["c"])({currentUser:"auth/currentUser"})),{},{isSupervisorCrm:function(){return(2===this.currentUser.role_id||1===this.currentUser.role_id||null===this.currentUser.role_id)&&2===this.$route.meta.module}})},Yt=Lt,Bt=Object(f["a"])(Yt,a,s,!1,null,null,null);e["default"]=Bt.exports},"804f":function(t,e,n){},"9f49":function(t,e,n){"use strict";n("c5ae")},"9fa8":function(t,e,n){"use strict";n("804f")},c5ae:function(t,e,n){},d2c1:function(t,e,n){},d4fc:function(t,e,n){},e2a1:function(t,e,n){"use strict";n("d2c1")},ebb0:function(t,e,n){"use strict";n("5177")}}]);
//# sourceMappingURL=chunk-d8547a80.685fff25.js.map