(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e1ee2"],{"7d10":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("header-slot"),r("b-card",{staticClass:"mb-2",attrs:{"no-body":""}},[r("filter-slot",{attrs:{filter:e.filter,"filter-principal":e.filterPrincipal,"total-rows":e.totalRows,paginate:e.paginate,"start-page":e.startPage,"to-page":e.toPage},on:{"reset-all-filters":e.resetAllFilters,reload:function(t){return e.$refs["migrationList"].refresh()}}},[r("b-table",{ref:"migrationList",attrs:{slot:"table",id:"migrationList","sticky-header":"50vh","no-provider-filtering":"",busy:e.isBusy,items:e.search,fields:e.filteredFields,"per-page":e.paginate.perPage,"current-page":e.paginate.currentPage,filter:e.filter,"show-empty":"",responsive:"sm"},on:{"update:busy":function(t){e.isBusy=t}},slot:"table",scopedSlots:e._u([{key:"table-busy",fn:function(){return[r("div",{staticClass:"text-center text-primary my-2"},[r("b-spinner",{staticClass:"align-middle mr-1"}),r("strong",[e._v("Loading ...")])],1)]},proxy:!0},{key:"cell(name)",fn:function(t){return[r("div",{staticClass:"d-flex flex-column justify-content-start align-items-start text-important"},[r("router-link",{class:[e.textLink],attrs:{to:"/crm/leads/"+t.item.id,target:"_blank"}},[e._v(" "+e._s(t.item.lead_name))])],1)]}},{key:"cell(mobile)",fn:function(t){return[r("p",{staticClass:"mb-0 font-weight-bold"},[e._v(" "+e._s(t.item.mobile)+" ")])]}},{key:"cell(cr)",fn:function(t){return["1"==t.item.credit_report?r("span",{staticClass:"text-danger"},[e._v(" NO ")]):e._e(),"2"==t.item.credit_report?r("span",{staticClass:"text-primary"},[e._v(" YES ")]):e._e()]}},{key:"cell(sale)",fn:function(t){return["1"==t.item.sale?r("span",{staticClass:"text-danger"},[e._v(" NO ")]):e._e(),"2"==t.item.sale?r("span",{staticClass:"text-primary"},[e._v(" YES ")]):e._e()]}},{key:"cell(programs)",fn:function(t){return e._l(JSON.parse(t.item.programs),(function(t,a){return r("p",{key:a,staticClass:"d-flex flex-column justify-content-start align-items-start"},[e._v(e._s(t))])}))}},{key:"cell(created_by)",fn:function(t){return[r("div",{staticClass:"d-flex flex-column justify-content-start align-items-start"},[r("p",[e._v(e._s(t.item.owner))]),r("p",[e._v(e._s(e._f("myGlobalDay")(t.item.created_at))+" ")])])]}},{key:"cell(actions)",fn:function(t){return[r("feather-icon",{staticClass:"cursor-pointer m-1 text-danger",attrs:{title:"DELETED",icon:"Trash2Icon",size:"20"},on:{click:function(r){return e.deletedMigrationLead(t.item.id)}}})]}}])})],1)],1)],1)},n=[],l=r("5530"),s=r("1da1"),i=(r("96cf"),r("d3b7"),r("159b"),r("4de4"),r("d81d"),r("b0c0"),r("3ca3"),r("ddb0"),r("2f62")),o=r("d98c"),c=[{key:"name",sortable:!0,label:"Name"},{key:"status",sortable:!1,label:"Status"},{key:"mobile",sortable:!0,label:"Mobile"},{key:"cr",sortable:!1,label:"Cr"},{key:"sale",sortable:!0,label:"Sale"},{key:"programs",sortable:!0,label:"Programs"},{key:"created_by",sortable:!0,label:"Created by"},{key:"actions",sortable:!1,label:"Actions"}],u=[{type:"datepicker",margin:!0,showLabel:!0,label:"From",placeholder:"Date",class:"font-small-3",model:null,locale:"en",dateFormatOptions:{year:"numeric",month:"numeric",day:"numeric"},cols:6},{type:"datepicker",margin:!0,showLabel:!0,label:"To",placeholder:"Date",class:"font-small-3",model:null,locale:"en",dateFormatOptions:{year:"numeric",month:"numeric",day:"numeric"},cols:6},{type:"select",margin:!0,showLabel:!0,label:"Status Lead",model:null,options:[],reduce:"id",selectText:"value",cols:12},{type:"select",label:"Programs",margin:!0,showLabel:!0,model:null,options:[],reduce:"id",selectText:"value",cols:12},{type:"select",margin:!0,showLabel:!0,label:"Owner",model:null,options:[],reduce:"id",selectText:"value",cols:12},{type:"select",label:"Last Action",margin:!0,showLabel:!0,options:[{value:0,label:"All"},{value:1,label:"Pending"},{value:2,label:"Not Answer"},{value:3,label:"Closed"},{value:4,label:"Information requested"}],model:"",reduce:"value",selectText:"label",cols:12,md:2,visible:!0},{type:"select",label:"Task",margin:!0,showLabel:!0,options:[{value:0,label:"All"},{value:1,label:"Attend"},{value:2,label:"Yes"},{value:3,label:"No"}],model:"",reduce:"value",selectText:"label",cols:12,md:2,visible:!0},{type:"select",label:"Sale",margin:!0,showLabel:!0,options:[{value:0,label:"All"},{value:2,label:"Yes"},{value:1,label:"No"}],model:"",reduce:"value",selectText:"label",cols:12,md:2,visible:!0}],d=r("d4ec"),p=r("bee2"),m=r("2777"),f=function(){function e(){Object(d["a"])(this,e)}return Object(p["a"])(e,[{key:"getLeadsMigration",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m["a"].post("social-network/migrations/search-leads-migration?page=".concat(r),t);case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e["catch"](0),console.log("Something went wrong on getLeadsMigration:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getStatusLead",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m["a"].get("social-network/migrations/search-status-leads");case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e["catch"](0),console.log("Something went wrong on getStatusLead:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getUserModule",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m["a"].post("commons/user-module/15",t);case 3:return r=e.sent,e.abrupt("return",r);case 7:throw e.prev=7,e.t0=e["catch"](0),console.log("Something went wrong on getUserModule:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteLeadsMigration",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m["a"].post("social-network/migrations/delete-leads-migration",t);case 3:return r=e.sent,e.abrupt("return",r);case 7:throw e.prev=7,e.t0=e["catch"](0),console.log("Something went wrong on deleteLeadsMigration:",e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),g=new f,b={components:{FilterSlot:o["a"]},data:function(){return{fields:c,totalRows:0,filterPrincipal:{type:"input",inputType:"text",placeholder:"Search...",model:""},paginate:{currentPage:1,perPage:10},isBusy:!1,basicSearch:!0,filter:u,startPage:null,toPage:null,items:[],baseImg:"http://localhost:8080",statusLead:[]}},methods:{resetAllFilters:function(){this.filter.forEach((function(e){e.model=null})),this.filterPrincipal.model=null,this.$refs.migrationList.refresh()},resetSearch:function(){this.searchInput="",this.$refs.migrationList.refresh()},search:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,n,l,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,a=10,n="desc","name"===e.sortBy&&(n=e.sortDesc?"desc":"asc",a=17),l={per_page:t.paginate.perPage,orderby:a,order:n,date_from:t.filter[0].model,date_to:t.filter[1].model,name_text:t.filterPrincipal.model,iduser:t.currentUser.user_id,idrole:1,lead_status:t.filter[2].model,cr:t.cr,program:t.filter[3].model,user_owner:t.filter[4].model,type:1,last_action:t.filter[5].model,sale:t.filter[7].model,appointment:t.filter[6].model,fanpage:t.fanpage},r.next=7,g.getLeadsMigration(l,e.currentPage);case 7:return s=r.sent,t.items=s.data.data,t.startPage=s.data.from,t.paginate.currentPage=s.data.current_page,t.paginate.perPage=s.data.per_page,t.nextPage=t.startPage+1,t.endPage=s.data.last_page,t.totalData=s.data.total,t.totalRows=s.data.total,t.toPage=s.data.to,r.abrupt("return",t.items);case 20:return r.prev=20,r.t0=r["catch"](0),t.showErrorSwal(r.t0),r.abrupt("return",[]);case 24:case"end":return r.stop()}}),r,null,[[0,20]])})))()},getStatusLead:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.getStatusLead();case 3:return r=t.sent,a={value:"All",id:0},n=r.data.map((function(e){return{value:e.name,id:e.id}})),n.unshift(a),e.filter[2].options=n,t.abrupt("return",n);case 11:return t.prev=11,t.t0=t["catch"](0),e.showErrorSwal(t.t0),t.abrupt("return",[]);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))()},getUserModule:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a,n,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r={roles:"[]",type:"0"},t.next=4,g.getUserModule(r);case 4:return a=t.sent,n={value:"All",id:0},l=a.data.map((function(e){return{value:e.user_name,id:e.id}})),l.unshift(n),e.filter[4].options=l,t.abrupt("return",l);case 12:return t.prev=12,t.t0=t["catch"](0),e.showErrorSwal(t.t0),t.abrupt("return",[]);case 16:case"end":return t.stop()}}),t,null,[[0,12]])})))()},deletedMigrationLead:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={id:e},r.prev=1,r.next=4,t.showConfirmSwal();case 4:if(n=r.sent,!n.isConfirmed){r.next=10;break}return r.next=8,g.deleteLeadsMigration(a);case 8:t.$refs.migrationList.refresh(),t.showSuccessSwal("File has been deleted successfully");case 10:r.next=16;break;case 12:return r.prev=12,r.t0=r["catch"](1),t.showErrorSwal(r.t0),r.abrupt("return",[]);case 16:case"end":return r.stop()}}),r,null,[[1,12]])})))()}},computed:Object(l["a"])(Object(l["a"])({filteredFields:function(){return this.fields}},Object(i["c"])({currentUser:"auth/currentUser",token:"auth/token"})),Object(i["e"])({programs:function(e){return e.SocialNetworkGlobalStore.S_PROGRAMS}})),mounted:function(){this.getStatusLead(),this.getUserModule()},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([e.$store.dispatch("SocialNetworkGlobalStore/A_GET_PROGRAMS")]);case 3:e.filter[3].options=e.programs,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}},h=b,v=r("2877"),w=Object(v["a"])(h,a,n,!1,null,"61d7d871",null);t["default"]=w.exports}}]);
//# sourceMappingURL=chunk-2d0e1ee2.85ef1eef.js.map