{"version":3,"sources":["webpack:///./src/views/social-network/views/migrations/migration-module/MigrationsList.vue?7d4d","webpack:///./src/views/social-network/views/migrations/migration-module/fields.data.js","webpack:///./src/views/social-network/views/migrations/migration-module/filters.data.js","webpack:///./src/views/social-network/views/migrations/migrations.service.js","webpack:///src/views/social-network/views/migrations/migration-module/MigrationsList.vue","webpack:///./src/views/social-network/views/migrations/migration-module/MigrationsList.vue?abb6","webpack:///./src/views/social-network/views/migrations/migration-module/MigrationsList.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","filter","filterPrincipal","totalRows","paginate","startPage","toPage","on","resetAllFilters","$event","$refs","refresh","ref","isBusy","search","filteredFields","perPage","currentPage","slot","scopedSlots","_u","key","fn","_v","proxy","data","class","textLink","item","_s","lead_name","mobile","credit_report","_e","sale","_l","JSON","parse","programs","program","index","owner","_f","created_at","deletedMigrationLead","id","staticRenderFns","sortable","label","type","margin","showLabel","placeholder","model","locale","dateFormatOptions","year","month","day","cols","options","reduce","selectText","value","md","visible","MigrationService","body","page","amgApi","post","console","log","get","components","FilterSlot","fields","inputType","basicSearch","items","baseImg","statusLead","methods","forEach","migrationList","resetSearch","searchInput","ctx","orderBy","sortDirection","params","per_page","orderby","order","date_from","date_to","name_text","iduser","idrole","lead_status","cr","user_owner","last_action","appointment","fanpage","MigrationsService","getStatusLead","firstOption","newData","getUserModule","roles","response","computed","mapGetters","currentUser","token","mapState","mounted","created","Promise","component"],"mappings":"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","file":"js/chunk-2d0e1ee2.ea963d36.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('header-slot'),_c('b-card',{staticClass:\"mb-2\",attrs:{\"no-body\":\"\"}},[_c('filter-slot',{attrs:{\"filter\":_vm.filter,\"filter-principal\":_vm.filterPrincipal,\"total-rows\":_vm.totalRows,\"paginate\":_vm.paginate,\"start-page\":_vm.startPage,\"to-page\":_vm.toPage},on:{\"reset-all-filters\":_vm.resetAllFilters,\"reload\":function($event){return _vm.$refs['migrationList'].refresh()}}},[_c('b-table',{ref:\"migrationList\",attrs:{\"slot\":\"table\",\"id\":\"migrationList\",\"sticky-header\":\"50vh\",\"no-provider-filtering\":\"\",\"busy\":_vm.isBusy,\"items\":_vm.search,\"fields\":_vm.filteredFields,\"per-page\":_vm.paginate.perPage,\"current-page\":_vm.paginate.currentPage,\"filter\":_vm.filter,\"show-empty\":\"\",\"responsive\":\"sm\"},on:{\"update:busy\":function($event){_vm.isBusy=$event}},slot:\"table\",scopedSlots:_vm._u([{key:\"table-busy\",fn:function(){return [_c('div',{staticClass:\"text-center text-primary my-2\"},[_c('b-spinner',{staticClass:\"align-middle mr-1\"}),_c('strong',[_vm._v(\"Loading ...\")])],1)]},proxy:true},{key:\"cell(name)\",fn:function(data){return [_c('div',{staticClass:\"d-flex flex-column justify-content-start align-items-start text-important\"},[_c('router-link',{class:[_vm.textLink],attrs:{\"to\":(\"/crm/leads/\" + (data.item.id)),\"target\":\"_blank\"}},[_vm._v(\" \"+_vm._s(data.item.lead_name))])],1)]}},{key:\"cell(mobile)\",fn:function(data){return [_c('p',{staticClass:\"mb-0 font-weight-bold\"},[_vm._v(\" \"+_vm._s(data.item.mobile)+\" \")])]}},{key:\"cell(cr)\",fn:function(data){return [(data.item.credit_report == '1')?_c('span',{staticClass:\"text-danger\"},[_vm._v(\" NO \")]):_vm._e(),(data.item.credit_report == '2')?_c('span',{staticClass:\"text-primary\"},[_vm._v(\" YES \")]):_vm._e()]}},{key:\"cell(sale)\",fn:function(data){return [(data.item.sale == '1')?_c('span',{staticClass:\"text-danger\"},[_vm._v(\" NO \")]):_vm._e(),(data.item.sale == '2')?_c('span',{staticClass:\"text-primary\"},[_vm._v(\" YES \")]):_vm._e()]}},{key:\"cell(programs)\",fn:function(data){return _vm._l((JSON.parse(data.item.programs)),function(program,index){return _c('p',{key:index,staticClass:\"d-flex flex-column justify-content-start align-items-start\"},[_vm._v(_vm._s(program))])})}},{key:\"cell(created_by)\",fn:function(data){return [_c('div',{staticClass:\"d-flex flex-column justify-content-start align-items-start\"},[_c('p',[_vm._v(_vm._s(data.item.owner))]),_c('p',[_vm._v(_vm._s(_vm._f(\"myGlobalDay\")(data.item.created_at))+\" \")])])]}},{key:\"cell(actions)\",fn:function(data){return [_c('feather-icon',{staticClass:\"cursor-pointer m-1 text-danger\",attrs:{\"title\":\"DELETED\",\"icon\":\"Trash2Icon\",\"size\":\"20\"},on:{\"click\":function($event){return _vm.deletedMigrationLead(data.item.id)}}})]}}])})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default [\r\n  {\r\n    key: 'name',\r\n    sortable: true,\r\n    label: 'Name',\r\n  },\r\n  {\r\n    key: 'status',\r\n    sortable: false,\r\n    label: 'Status',\r\n  },\r\n  {\r\n    key: 'mobile',\r\n    sortable: true,\r\n    label: 'Mobile',\r\n  },\r\n  {\r\n    key: 'cr',\r\n    sortable: false,\r\n    label: 'Cr',\r\n  },\r\n  {\r\n    key: 'sale',\r\n    sortable: true,\r\n    label: 'Sale',\r\n  },\r\n  {\r\n    key: 'programs',\r\n    sortable: true,\r\n    label: 'Programs',\r\n  },\r\n  {\r\n    key: 'created_by',\r\n    sortable: true,\r\n    label: 'Created by',\r\n  },\r\n  {\r\n    key: 'actions',\r\n    sortable: false,\r\n    label: 'Actions',\r\n  },\r\n\r\n]\r\n","export default [\r\n  {\r\n    type: 'datepicker',\r\n    margin: true,\r\n    showLabel: true,\r\n    label: 'From',\r\n    placeholder: 'Date',\r\n    class: 'font-small-3',\r\n    model: null,\r\n    locale: 'en',\r\n    dateFormatOptions: { year: 'numeric', month: 'numeric', day: 'numeric' },\r\n    cols: 6,\r\n  },\r\n  {\r\n    type: 'datepicker',\r\n    margin: true,\r\n    showLabel: true,\r\n    label: 'To',\r\n    placeholder: 'Date',\r\n    class: 'font-small-3',\r\n    model: null,\r\n    locale: 'en',\r\n    dateFormatOptions: { year: 'numeric', month: 'numeric', day: 'numeric' },\r\n    cols: 6,\r\n  },\r\n  {\r\n    type: 'select',\r\n    margin: true,\r\n    showLabel: true,\r\n    label: 'Status Lead',\r\n    model: null,\r\n    options: [],\r\n    reduce: 'id',\r\n    selectText: 'value',\r\n    cols: 12,\r\n\r\n  },\r\n  {\r\n    type: 'select',\r\n    label: 'Programs',\r\n    margin: true,\r\n    showLabel: true,\r\n    model: null,\r\n    options: [],\r\n    reduce: 'id',\r\n    selectText: 'value',\r\n    cols: 12,\r\n  },\r\n  {\r\n    type: 'select',\r\n    margin: true,\r\n    showLabel: true,\r\n    label: 'Owner',\r\n    model: null,\r\n    options: [],\r\n    reduce: 'id',\r\n    selectText: 'value',\r\n    cols: 12,\r\n  },\r\n  {\r\n    type: 'select',\r\n    label: 'Last Action',\r\n    margin: true,\r\n    showLabel: true,\r\n    options: [\r\n      { value: 0, label: 'All' },\r\n      { value: 1, label: 'Pending' },\r\n      { value: 2, label: 'Not Answer' },\r\n      { value: 3, label: 'Closed' },\r\n      { value: 4, label: 'Information requested' },\r\n\r\n    ],\r\n    model: '',\r\n    reduce: 'value',\r\n    selectText: 'label',\r\n    cols: 12,\r\n    md: 2,\r\n    visible: true,\r\n  },\r\n  {\r\n    type: 'select',\r\n    label: 'Task',\r\n    margin: true,\r\n    showLabel: true,\r\n    options: [\r\n      { value: 0, label: 'All' },\r\n      { value: 1, label: 'Attend' },\r\n      { value: 2, label: 'Yes' },\r\n      { value: 3, label: 'No' },\r\n    ],\r\n    model: '',\r\n    reduce: 'value',\r\n    selectText: 'label',\r\n    cols: 12,\r\n    md: 2,\r\n    visible: true,\r\n  },\r\n  {\r\n    type: 'select',\r\n    label: 'Sale',\r\n    margin: true,\r\n    showLabel: true,\r\n    options: [\r\n      { value: 0, label: 'All' },\r\n      { value: 2, label: 'Yes' },\r\n      { value: 1, label: 'No' },\r\n\r\n    ],\r\n    model: '',\r\n    reduce: 'value',\r\n    selectText: 'label',\r\n    cols: 12,\r\n    md: 2,\r\n    visible: true,\r\n  },\r\n\r\n]\r\n","import { amgApi } from '@/service/axios'\r\n// General services on module Social Network after refactoring\r\nclass MigrationService {\r\n  async getLeadsMigration(body, page) {\r\n    try {\r\n      const data = await amgApi.post(`social-network/migrations/search-leads-migration?page=${page}`, body)\r\n      return data\r\n    } catch (error) {\r\n      console.log('Something went wrong on getLeadsMigration:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  async getStatusLead() {\r\n    try {\r\n      const data = await amgApi.get('social-network/migrations/search-status-leads')\r\n      return data\r\n    } catch (error) {\r\n      console.log('Something went wrong on getStatusLead:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  async getUserModule(body) {\r\n    try {\r\n      const data = await amgApi.post('commons/user-module/15', body)\r\n      return data\r\n    } catch (error) {\r\n      console.log('Something went wrong on getUserModule:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  async deleteLeadsMigration(body) {\r\n    try {\r\n      const data = await amgApi.post('social-network/migrations/delete-leads-migration', body)\r\n      return data\r\n    } catch (error) {\r\n      console.log('Something went wrong on deleteLeadsMigration:', error)\r\n      throw error\r\n    }\r\n  }\r\n}\r\nexport default new MigrationService()\r\n","<template>\r\n  <div>\r\n\r\n    <header-slot />\r\n    <b-card\r\n      no-body\r\n      class=\"mb-2\"\r\n    >\r\n\r\n      <filter-slot\r\n\r\n        :filter=\"filter\"\r\n        :filter-principal=\"filterPrincipal\"\r\n        :total-rows=\"totalRows\"\r\n        :paginate=\"paginate\"\r\n        :start-page=\"startPage\"\r\n        :to-page=\"toPage\"\r\n        @reset-all-filters=\"resetAllFilters\"\r\n        @reload=\"$refs['migrationList'].refresh()\"\r\n      >\r\n\r\n        <b-table\r\n          id=\"migrationList\"\r\n          slot=\"table\"\r\n          ref=\"migrationList\"\r\n\r\n          sticky-header=\"50vh\"\r\n          no-provider-filtering\r\n          :busy.sync=\"isBusy\"\r\n          :items=\"search\"\r\n          :fields=\"filteredFields\"\r\n          :per-page=\"paginate.perPage\"\r\n          :current-page=\"paginate.currentPage\"\r\n          :filter=\"filter\"\r\n          show-empty\r\n          responsive=\"sm\"\r\n        >\r\n          <template #table-busy>\r\n            <div class=\"text-center text-primary my-2\">\r\n              <b-spinner class=\"align-middle mr-1\" />\r\n              <strong>Loading ...</strong>\r\n            </div>\r\n          </template>\r\n          <template v-slot:cell(name)=\"data\">\r\n\r\n            <div class=\"d-flex flex-column justify-content-start align-items-start text-important\">\r\n\r\n              <router-link\r\n                :class=\"[textLink]\"\r\n                :to=\"`/crm/leads/${data.item.id}`\"\r\n                target=\"_blank\"\r\n              >  {{ data.item.lead_name }}</router-link>\r\n\r\n            </div>\r\n\r\n          </template>\r\n\r\n          <template v-slot:cell(mobile)=\"data\">\r\n\r\n            <p class=\"mb-0 font-weight-bold\">\r\n              {{ data.item.mobile }}\r\n            </p>\r\n\r\n          </template>\r\n\r\n          <template v-slot:cell(cr)=\"data\">\r\n\r\n            <span\r\n              v-if=\"data.item.credit_report == '1'\"\r\n              class=\"text-danger\"\r\n            >\r\n              NO\r\n            </span>\r\n\r\n            <span\r\n              v-if=\"data.item.credit_report == '2'\"\r\n              class=\"text-primary\"\r\n            >\r\n              YES\r\n            </span>\r\n          </template>\r\n          <template v-slot:cell(sale)=\"data\">\r\n\r\n            <span\r\n              v-if=\"data.item.sale == '1'\"\r\n              class=\"text-danger\"\r\n            >\r\n              NO\r\n            </span>\r\n\r\n            <span\r\n              v-if=\"data.item.sale == '2'\"\r\n              class=\"text-primary\"\r\n            >\r\n              YES\r\n            </span>\r\n          </template>\r\n          <template v-slot:cell(programs)=\"data\">\r\n\r\n            <p\r\n              v-for=\"(program, index) in JSON.parse(data.item.programs)\"\r\n              :key=\"index\"\r\n              class=\"d-flex flex-column justify-content-start align-items-start\"\r\n            >{{ program }}</p>\r\n\r\n          </template>\r\n\r\n          <template v-slot:cell(created_by)=\"data\">\r\n            <div\r\n              class=\"d-flex flex-column justify-content-start align-items-start\"\r\n            >\r\n              <p>{{ data.item.owner }}</p>\r\n              <p>{{ data.item.created_at | myGlobalDay }}  </p>\r\n            </div>\r\n          </template>\r\n\r\n          <template v-slot:cell(actions)=\"data\">\r\n            <feather-icon\r\n              title=\"DELETED\"\r\n              icon=\"Trash2Icon\"\r\n              size=\"20\"\r\n              class=\"cursor-pointer m-1 text-danger\"\r\n              @click=\"deletedMigrationLead(data.item.id)\"\r\n            />\r\n          </template>\r\n        </b-table>\r\n\r\n      </filter-slot>\r\n\r\n    </b-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapState } from 'vuex'\r\nimport FilterSlot from '@/views/crm/views/sales-made/components/slots/FilterSlot.vue'\r\nimport dataFields from '@/views/social-network/views/migrations/migration-module/fields.data'\r\nimport dataFilters from '@/views/social-network/views/migrations/migration-module/filters.data'\r\nimport MigrationsService from '@/views/social-network/views/migrations/migrations.service'\r\n\r\nexport default {\r\n  components: {\r\n    FilterSlot,\r\n\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      fields: dataFields,\r\n      totalRows: 0,\r\n      filterPrincipal: {\r\n        type: 'input',\r\n        inputType: 'text',\r\n        placeholder: 'Search...',\r\n        model: '',\r\n      },\r\n      paginate: {\r\n        currentPage: 1,\r\n        perPage: 10,\r\n      },\r\n      isBusy: false,\r\n      basicSearch: true,\r\n      filter: dataFilters,\r\n      startPage: null,\r\n      toPage: null,\r\n      items: [],\r\n      baseImg: process.env.VUE_APP_BASE_URL_FRONT,\r\n      statusLead: [],\r\n    }\r\n  },\r\n  methods: {\r\n\r\n    resetAllFilters() {\r\n      this.filter.forEach(filter => {\r\n        // eslint-disable-next-line no-param-reassign\r\n        filter.model = null\r\n      })\r\n      this.filterPrincipal.model = null\r\n      this.$refs.migrationList.refresh()\r\n    },\r\n    resetSearch() {\r\n      this.searchInput = ''\r\n      this.$refs.migrationList.refresh()\r\n    },\r\n    async search(ctx) {\r\n      try {\r\n        let orderBy = 10\r\n        let sortDirection = 'desc'\r\n        if (ctx.sortBy === 'name') {\r\n          if (ctx.sortDesc) sortDirection = 'desc'\r\n          else sortDirection = 'asc'\r\n          orderBy = 17\r\n        }\r\n\r\n        const params = {\r\n          per_page: this.paginate.perPage,\r\n          orderby: orderBy,\r\n          order: sortDirection,\r\n          date_from: this.filter[0].model,\r\n          date_to: this.filter[1].model,\r\n          name_text: this.filterPrincipal.model,\r\n          iduser: this.currentUser.user_id,\r\n          idrole: 1,\r\n          lead_status: this.filter[2].model,\r\n          cr: this.cr,\r\n          program: this.filter[3].model,\r\n          user_owner: this.filter[4].model,\r\n          type: 1,\r\n          last_action: this.filter[5].model,\r\n          sale: this.filter[7].model,\r\n          appointment: this.filter[6].model,\r\n          fanpage: this.fanpage,\r\n        }\r\n        const data = await MigrationsService.getLeadsMigration(params, ctx.currentPage)\r\n\r\n        this.items = data.data.data\r\n        // Must return an array of items or an empty array if an error occurred\r\n\r\n        this.startPage = data.data.from\r\n        this.paginate.currentPage = data.data.current_page\r\n        this.paginate.perPage = data.data.per_page\r\n        this.nextPage = this.startPage + 1\r\n        this.endPage = data.data.last_page\r\n        this.totalData = data.data.total\r\n        this.totalRows = data.data.total\r\n        this.toPage = data.data.to\r\n\r\n        return this.items\r\n      } catch (e) {\r\n        this.showErrorSwal(e)\r\n        return []\r\n      }\r\n    },\r\n\r\n    async getStatusLead() {\r\n      try {\r\n        const data = await MigrationsService.getStatusLead()\r\n\r\n        const firstOption = {\r\n          value: 'All',\r\n          id: 0,\r\n        }\r\n\r\n        const newData = data.data.map(el => ({ value: el.name, id: el.id }))\r\n        newData.unshift(firstOption)\r\n        this.filter[2].options = newData\r\n\r\n        return newData\r\n      } catch (e) {\r\n        this.showErrorSwal(e)\r\n        return []\r\n      }\r\n    },\r\n\r\n    async getUserModule() {\r\n      try {\r\n        const params = {\r\n          roles: '[]',\r\n          type: '0',\r\n        }\r\n        const data = await MigrationsService.getUserModule(params)\r\n\r\n        const firstOption = {\r\n          value: 'All',\r\n          id: 0,\r\n        }\r\n\r\n        const newData = data.data.map(el => ({ value: el.user_name, id: el.id }))\r\n        newData.unshift(firstOption)\r\n        this.filter[4].options = newData\r\n\r\n        return newData\r\n      } catch (e) {\r\n        this.showErrorSwal(e)\r\n        return []\r\n      }\r\n    },\r\n\r\n    // eslint-disable-next-line consistent-return\r\n    async deletedMigrationLead(id) {\r\n      const params = {\r\n        id,\r\n\r\n      }\r\n      try {\r\n        const response = await this.showConfirmSwal()\r\n        if (response.isConfirmed) {\r\n          await MigrationsService.deleteLeadsMigration(params)\r\n\r\n          this.$refs.migrationList.refresh()\r\n\r\n          this.showSuccessSwal('File has been deleted successfully')\r\n        }\r\n      } catch (e) {\r\n        this.showErrorSwal(e)\r\n        return []\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    filteredFields() {\r\n      return this.fields\r\n    },\r\n    ...mapGetters({\r\n      currentUser: 'auth/currentUser',\r\n      token: 'auth/token',\r\n\r\n    }),\r\n    ...mapState({\r\n\r\n      programs: state => state.SocialNetworkGlobalStore.S_PROGRAMS,\r\n\r\n    }),\r\n\r\n  },\r\n\r\n  mounted() {\r\n    this.getStatusLead()\r\n    this.getUserModule()\r\n  },\r\n\r\n  async created() {\r\n    try {\r\n      await Promise.all([\r\n        this.$store.dispatch('SocialNetworkGlobalStore/A_GET_PROGRAMS'),\r\n\r\n      ])\r\n\r\n      this.filter[3].options = this.programs\r\n    } catch (error) {\r\n      console.error(error)\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MigrationsList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MigrationsList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MigrationsList.vue?vue&type=template&id=61d7d871&scoped=true&\"\nimport script from \"./MigrationsList.vue?vue&type=script&lang=js&\"\nexport * from \"./MigrationsList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"61d7d871\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}