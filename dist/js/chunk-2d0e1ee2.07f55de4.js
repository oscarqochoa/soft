(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e1ee2"],{"7d10":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("header-slot"),a("b-card",{staticClass:"mb-2",attrs:{"no-body":""}},[a("filter-slot",{attrs:{filter:e.filter,"filter-principal":e.filterPrincipal,"total-rows":e.totalRows,paginate:e.paginate,"start-page":e.startPage,"to-page":e.toPage},on:{"reset-all-filters":e.resetAllFilters,reload:function(t){return e.$refs["migrationList"].refresh()}}},[a("b-table",{ref:"migrationList",attrs:{slot:"table",id:"migrationList","sticky-header":"50vh","no-provider-filtering":"",busy:e.isBusy,items:e.search,fields:e.filteredFields,"per-page":e.paginate.perPage,"current-page":e.paginate.currentPage,filter:e.filter,"show-empty":"",responsive:"sm"},on:{"update:busy":function(t){e.isBusy=t}},slot:"table",scopedSlots:e._u([{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-primary my-2"},[a("b-spinner",{staticClass:"align-middle mr-1"}),a("strong",[e._v("Loading ...")])],1)]},proxy:!0},{key:"cell(name)",fn:function(t){return[a("div",{staticClass:"d-flex flex-column justify-content-start align-items-start text-important"},[a("router-link",{class:[e.textLink],attrs:{to:"/social-network/leads/new/dashboard/"+t.item.id,target:"_blank"}},[e._v(" "+e._s(t.item.lead_name)+" ")])],1)]}},{key:"cell(mobile)",fn:function(t){return[a("p",{staticClass:"mb-0 font-weight-bold"},[e._v(" "+e._s(t.item.mobile)+" ")])]}},{key:"cell(cr)",fn:function(t){return[1===t.item.credit_report?a("span",{staticClass:"text-danger"},[e._v(" NO ")]):e._e(),2===t.item.credit_report?a("span",{staticClass:"text-success"},[e._v(" YES ")]):e._e()]}},{key:"cell(sale)",fn:function(t){return[1===t.item.sale?a("span",{staticClass:"text-danger"},[e._v(" NO ")]):e._e(),2===t.item.sale?a("span",{staticClass:"text-success"},[e._v(" YES ")]):e._e()]}},{key:"cell(programs)",fn:function(t){return e._l(JSON.parse(t.item.programs),(function(t,r){return a("p",{key:r,staticClass:"d-flex flex-column justify-content-start align-items-start"},[e._v(e._s(t))])}))}},{key:"cell(created_by)",fn:function(t){return[a("div",{staticClass:"d-flex flex-column justify-content-start align-items-start"},[a("p",[e._v(e._s(t.item.owner))]),a("p",[e._v(e._s(e._f("myGlobalDay")(t.item.created_at))+" ")])])]}},{key:"cell(actions)",fn:function(t){return[a("feather-icon",{staticClass:"cursor-pointer m-1 text-danger",attrs:{title:"DELETED",icon:"Trash2Icon",size:"20"},on:{click:function(a){return e.deletedMigrationLead(t.item.id)}}})]}}])})],1)],1)],1)},l=[],n=a("5530"),s=a("1da1"),i=(a("96cf"),a("d3b7"),a("159b"),a("4de4"),a("d81d"),a("b0c0"),a("3ca3"),a("ddb0"),a("2f62")),o=a("d98c"),c=[{key:"name",sortable:!0,label:"Name"},{key:"status",sortable:!1,label:"Status"},{key:"mobile",sortable:!0,label:"Mobile"},{key:"cr",sortable:!1,label:"Cr"},{key:"sale",sortable:!0,label:"Sale"},{key:"programs",sortable:!0,label:"Programs"},{key:"created_by",sortable:!0,label:"Created by"},{key:"actions",sortable:!1,label:"Actions"}],u=[{type:"datepicker",margin:!0,showLabel:!0,label:"From",placeholder:"Date",class:"font-small-3",model:null,locale:"en",dateFormatOptions:{year:"numeric",month:"numeric",day:"numeric"},cols:6},{type:"datepicker",margin:!0,showLabel:!0,label:"To",placeholder:"Date",class:"font-small-3",model:null,locale:"en",dateFormatOptions:{year:"numeric",month:"numeric",day:"numeric"},cols:6},{type:"select",margin:!0,showLabel:!0,label:"Status Lead",model:null,options:[],reduce:"id",selectText:"value",cols:12},{type:"select",label:"Programs",margin:!0,showLabel:!0,model:null,options:[],reduce:"id",selectText:"value",cols:12},{type:"select",margin:!0,showLabel:!0,label:"Owner",model:null,options:[],reduce:"id",selectText:"value",cols:12},{type:"select",label:"Last Action",margin:!0,showLabel:!0,options:[{value:0,label:"All"},{value:1,label:"Pending"},{value:2,label:"Not Answer"},{value:3,label:"Closed"},{value:4,label:"Information requested"}],model:"",reduce:"value",selectText:"label",cols:12,md:2,visible:!0},{type:"select",label:"Task",margin:!0,showLabel:!0,options:[{value:0,label:"All"},{value:1,label:"Attend"},{value:2,label:"Yes"},{value:3,label:"No"}],model:"",reduce:"value",selectText:"label",cols:12,md:2,visible:!0},{type:"select",label:"Sale",margin:!0,showLabel:!0,options:[{value:0,label:"All"},{value:2,label:"Yes"},{value:1,label:"No"}],model:"",reduce:"value",selectText:"label",cols:12,md:2,visible:!0}],d=a("4d87"),p={components:{FilterSlot:o["a"]},data:function(){return{fields:c,totalRows:0,filterPrincipal:{type:"input",inputType:"text",placeholder:"Search...",model:""},paginate:{currentPage:1,perPage:10},isBusy:!1,basicSearch:!0,filter:u,startPage:null,toPage:null,items:[],baseImg:"https://prefront.amgsoft.us",statusLead:[]}},methods:{resetAllFilters:function(){this.filter.forEach((function(e){e.model=null})),this.filterPrincipal.model=null,this.$refs.migrationList.refresh()},resetSearch:function(){this.searchInput="",this.$refs.migrationList.refresh()},search:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,l,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,r=10,l="desc","name"===e.sortBy&&(l=e.sortDesc?"desc":"asc",r=17),n={per_page:t.paginate.perPage,orderby:r,order:l,date_from:t.filter[0].model,date_to:t.filter[1].model,name_text:t.filterPrincipal.model,iduser:t.currentUser.user_id,idrole:1,lead_status:t.filter[2].model,cr:t.cr,program:t.filter[3].model,user_owner:t.filter[4].model,type:1,last_action:t.filter[5].model,sale:t.filter[7].model,appointment:t.filter[6].model,fanpage:t.fanpage},a.next=7,d["a"].getLeadsMigration(n,e.currentPage);case 7:return s=a.sent,t.items=s.data.data,t.startPage=s.data.from,t.paginate.currentPage=s.data.current_page,t.paginate.perPage=s.data.per_page,t.nextPage=t.startPage+1,t.endPage=s.data.last_page,t.totalData=s.data.total,t.totalRows=s.data.total,t.toPage=s.data.to,a.abrupt("return",t.items);case 20:return a.prev=20,a.t0=a["catch"](0),t.showErrorSwal(a.t0),a.abrupt("return",[]);case 24:case"end":return a.stop()}}),a,null,[[0,20]])})))()},getStatusLead:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d["a"].getStatusLead();case 3:return a=t.sent,r={value:"All",id:0},l=a.data.map((function(e){return{value:e.name,id:e.id}})),l.unshift(r),e.filter[2].options=l,t.abrupt("return",l);case 11:return t.prev=11,t.t0=t["catch"](0),e.showErrorSwal(t.t0),t.abrupt("return",[]);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))()},getUserModule:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,l,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={roles:"[]",type:"0"},t.next=4,d["a"].getUserModule(a);case 4:return r=t.sent,l={value:"All",id:0},n=r.data.map((function(e){return{value:e.user_name,id:e.id}})),n.unshift(l),e.filter[4].options=n,t.abrupt("return",n);case 12:return t.prev=12,t.t0=t["catch"](0),e.showErrorSwal(t.t0),t.abrupt("return",[]);case 16:case"end":return t.stop()}}),t,null,[[0,12]])})))()},deletedMigrationLead:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={id:e},a.prev=1,a.next=4,t.showConfirmSwal();case 4:if(l=a.sent,!l.isConfirmed){a.next=10;break}return a.next=8,d["a"].deleteLeadsMigration(r);case 8:t.$refs.migrationList.refresh(),t.showSuccessSwal();case 10:a.next=16;break;case 12:return a.prev=12,a.t0=a["catch"](1),t.showErrorSwal(a.t0),a.abrupt("return",[]);case 16:case"end":return a.stop()}}),a,null,[[1,12]])})))()}},computed:Object(n["a"])(Object(n["a"])({filteredFields:function(){return this.fields}},Object(i["c"])({currentUser:"auth/currentUser",token:"auth/token"})),Object(i["e"])({programs:function(e){return e.SocialNetworkGlobalStore.S_PROGRAMS}})),mounted:function(){this.getStatusLead(),this.getUserModule()},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([e.$store.dispatch("SocialNetworkGlobalStore/A_GET_PROGRAMS")]);case 3:e.filter[3].options=e.programs,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}},m=p,f=a("2877"),b=Object(f["a"])(m,r,l,!1,null,"f50db16a",null);t["default"]=b.exports}}]);
//# sourceMappingURL=chunk-2d0e1ee2.07f55de4.js.map